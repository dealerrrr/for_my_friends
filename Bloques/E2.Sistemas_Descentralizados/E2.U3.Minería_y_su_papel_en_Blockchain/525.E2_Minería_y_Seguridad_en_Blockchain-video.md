---
title: Minería y Seguridad en Blockchain | Alberto Mera
URL: https://app.web3mba.io/courses/take/especializacion-2-sistemas-descentralizados/lessons/41081960-3-2-mineria-y-seguridad-en-blockchain-alberto-mera
Tags/Keywords: #Especialidad 2 #Sistemas descentralizados #E2U3 #mineria y seguridad en blockchain #mineria en blockchain #seguridad en blockchain #Alberto Mera
lang: es-AR
---
# Minería y Seguridad en Blockchain
![[525.E2_Minería_y_Seguridad_en_Blockchain.mp4]]
[Mineria y Seguridad en Blockchain](https://app.web3mba.io?wvideo=i3tbmp5m55)

Hablemos de la minería y el consenso, específicamente del papel de la minería en el consenso de la red de blockchain. Recordemos que la minería es el proceso mediante el cual se añaden nuevos bitcoins a la oferta monetaria. Este proceso sirve para asegurar el sistema Bitcoin contra transacciones fraudulentas o aquellas que gastan la misma cantidad de bitcoin más de una vez, lo que se conoce como doble gasto. Aunque, como veremos posteriormente, los nodos son incluso más importantes en este contexto. Es el proceso por el cual los mineros proporcionan potencia de procesamiento a la red Bitcoin a cambio de la oportunidad de recibir una recompensa en bitcoin. A mayor capacidad, más difícil es el ataque a dicha red. Finalmente, también permite comenzar la validación de las nuevas transacciones, es decir, inicia el registro de esas operaciones en la blockchain. Es curioso todo lo que se logra con este pequeño proceso. Todo esto es fundamental para alcanzar el consenso, y en todo ello, la minería juega un papel de primer orden.

En Bitcoin, como comentábamos, cada 10 minutos se mina un nuevo bloque que contiene las transacciones ocurridas desde el último bloque, añadiendo así esas transacciones a la cadena de bloques. Las transacciones que pasan a formar parte de un bloque y se añaden a la cadena de bloques se consideran confirmadas, lo que permite a los nuevos propietarios de dichos bitcoins gastarlas, pues si las recibieron, digamos que ya son suyas. En este punto, el minero emite su nuevo bloque a la red, pasando de nodo a nodo la información, y la cadena de bloques se convierte en un bloque de 10 minutos. Estos nodos verifican las operaciones; al notar que todo está en orden, incluyen ese nuevo bloque en su copia de la blockchain. Como resultado de la cadena de aceptaciones, la red alcanza un consenso general y se dice que el nuevo bloque forma parte integral de la blockchain, reconfirmándose de forma infinita con cada nuevo bloque que se agrega al historial.

Con lo anterior, podemos afirmar que la minería de criptomonedas cumple un doble objetivo. Por una parte, actúa como un mecanismo de seguridad que evita el mal uso de la red y de sus recursos, y por otra parte, sirve como mecanismo para iniciar un consenso distribuido sobre la historia y las operaciones de la red. Ambas funciones se mantienen e incentivan con la entrega de recompensas que están inscritas en las reglas del protocolo. Como resultado, la minería es capaz de mantener un sistema de dinero electrónico peer-to-peer, de persona a persona, que no depende de una autoridad central para validar transacciones, emitir dinero y movilizar ese dinero entre las dos partes.

Por supuesto, un mecanismo de seguridad y consenso en blockchain es un trabajo de nunca acabar. Los mineros que ejecutan nodos completos en la red se mantienen a la escucha tanto de transacciones para agregarlas a los nuevos bloques que se van a crear como de nuevos bloques resueltos. Las primeras llegan todo el tiempo y son almacenadas en el mempool. El mempool es la lista o registro donde están las transacciones por verificar, que luego serán seleccionadas y agregadas al bloque que se crea, el cual se emite al resto de la red para que todos conozcan que se ha resuelto el bloque y se han confirmado nuevas transacciones.

Pero, ¿qué pasa si un minero pierde? ¿Qué ocurre con todos esos mineros que no ganan el bloque? ¿Qué hace un minero cuando escucha en la red que el bloque ha sido resuelto por otro? Pues hace lo que debe hacer: verificar con su nodo que la información cumple con los requisitos de la red y, si todo es correcto, le dará su visto bueno, lo incluirá en su copia de la blockchain y continuará buscando el siguiente bloque. La competencia continúa y nunca termina. Incluso cuando el último bitcoin sea emitido en la red, el mecanismo de minería seguirá haciendo su trabajo porque su papel sigue siendo primordial para el funcionamiento y consenso de las partes que forman la red.

En este punto, podemos comentar varios debates que han surgido alrededor de la pregunta: ¿qué pasará cuando se deje de incentivar a los mineros con nuevos bitcoins? Como hemos comentado, el calendario de emisión de bitcoin llega hasta 2140, pero no más allá. Entonces, cuando llegue a ese punto, ¿cómo se recompensará a los mineros? Porque ya no habrá bloques, es decir, ya no habrá bitcoins que entregar; lo que habrá simplemente serán comisiones. ¿Qué pasa si esas comisiones no son suficientes? Hay muchos debates en este punto, debido a que las comisiones en la red base de bitcoins son bajas, pero estamos en 2022, faltan 120 años para que este problema se vuelva una realidad. Y creo que os invitaría a observar algunos de estos debates, porque son interesantes y es un tema que vale la pena seguir.

Podemos ver todo esto, lo que estoy comentando, de forma sencilla en el siguiente ejemplo. Imagina que la red de Bitcoin está resolviendo el bloque número 739.315. Todos los mineros de la red se centran en resolver el bloque y nuestro amigo Daniel está en esa lucha con sus mineros ASIC trabajando para él. Resulta que, pese a pasar 12 minutos tratando de resolver el bloque, finalmente es Luis quien se lleva el mérito al minar el bloque de manera correcta. Entonces, como decíamos, Luis emite el bloque completo a la red, donde los nodos y el resto de mineros, incluyendo a Daniel, recibirán la confirmación, la verificarán y la incluirán en su copia de la blockchain, porque todo está en orden. Al terminar, comenzará la carrera por resolver el siguiente acertijo que llevará a vencer el siguiente bloque. Un ciclo sin fin, un proceso que se repite una y otra vez, tantas como la red se mantenga activa.

Y es importante que esto sea así, porque, claro, ¿qué pasa si de repente se cae internet? ¿Qué pasa si un meteorito impacta y la red se queda en el bloque 800.324? Si eso ocurre, habrá una copia de esa cadena en algún nodo y sería tan sencillo como conectarse a ese nodo, recuperar esa información y seguir emitiendo bloques sobre esa base, de modo que de esta manera podemos reengancharnos a una información perdida. Es lo mismo que haces tú con tu nodo en casa, si lo tienes, cuando te vas de vacaciones y durante unas dos semanas no actualizas el nodo. Bueno, cuando llegas, tienes que actualizar, tienes que ponerte al día de todos los bloques que se han generado mientras tú no estabas ahí mirando.

Claro, la seguridad y el consenso exigen seguir reglas muy claras y, en la mayoría de las criptomonedas, estas reglas se ajustan a la realidad de sus redes. Esto es, debes ser capaz de probar criptográficamente que el dinero que movilizas es realmente tuyo, y esa verificación es responsabilidad del minero y del resto de la red. Al final, todos están incentivados a comprobar que las transacciones son correctas, pues si hay una transacción que es incorrecta o si hay un doble gasto, todo eso perjudicaría a la red y al valor que todos ellos tienen en ella. De modo que todos están incentivados a seguir estas reglas, reglas que pesan sobre los mineros. Su papel en la seguridad y en el consenso se puede reducir a este sencillo conjunto de reglas que vamos a comentar ahora.

Una parte de los mineros y los nodos debe velar porque la estructura de datos del bloque sea sintácticamente válida, es decir, deben estar formateados y ser legibles dentro de los parámetros del protocolo. El hash del bloque también debe tener un valor menor que la dificultad objetiva de la red; esto indica que se ha realizado de forma correcta la minería o el proceso de minería. También hay que atender a la marca de tiempo, al timestamp del bloque, que deberá ser inferior a dos horas en el futuro. Este mecanismo es una medida de seguridad para evitar ataques temporales en la minería. También deben confirmar que el tamaño del bloque está dentro de los límites aceptables. Y la primera transacción, y solo la primera, es una transacción dentro de ese bloque que genera la Coinbase. Esa Coinbase es la generación de nuevos bitcoins. Que, por cierto, esta es una transacción que puedes opcionalmente no incluir. Es decir, tú puedes rechazar ese regalo de la blockchain y, si ocurre, habrá 6 bitcoins menos ahora en el total de los 21 millones. Finalmente, deben comprobar que todas las transacciones dentro del bloque sean válidas y que cumplan con los requisitos de Script Signature. Y todo esto ocurre cuando se crea un nuevo bloque. No obstante, ten en cuenta que hay un software que lo hace por ti.

Dediquemos un momento ahora a hablar de las alternativas a la minería por proof of work. Al final, todo esto que hemos estado comentando es proof of work, prueba de trabajo. Ahora hablemos de otros sistemas y por qué se han desarrollado. Al final, esto es un mercado libre y, en el momento en que Bitcoin puso de moda, digamos, el sistema de proof of work, más que de moda, digamos que consiguió que este sistema funcionase, pues es un sistema que ya se inventó hace décadas. Sin embargo, no se había conseguido implementar con éxito hasta Bitcoin. En el momento en que esto ocurre, otros sistemas salen a la palestra tratando de ofrecer algo diferente, si bien su objetivo es el mismo, como veremos.

El primero de ellos, y probablemente el más reconocible y conocido por todos, es el de Proof of Stake. La prueba de participación o Proof of Stake es uno de los dos protocolos de consenso más utilizados en la tecnología blockchain. Su nombre en inglés es Proof-of-Stake, como digo, y de ahí derivan las siglas POS con las que se les conoce comúnmente. El objetivo de este algoritmo, al igual que en Proof-of-Work, es crear consenso entre todas las partes que integran la red. A los nodos que minan en Proof-of-Stake se les llama validadores; la decisión sobre qué nodo ha de validar un bloque se hace de forma aleatoria, pero dando mayor probabilidad a quienes cumplan una serie de criterios. Entre estos criterios podemos mencionar la cantidad de moneda reservada o estaqueada y el tiempo de participación en la red, aunque pueden definirse otros.

Una vez establecidos, se inicia el proceso de selección de nodos de forma aleatoria. Una vez terminado este proceso de selección, los nodos elegidos podrán validar transacciones o crear nuevos bloques. Esto revela que Proof of Stake es un proceso completamente distinto al ya explicado protocolo de prueba de trabajo comentado antes. La primera moneda en usar este protocolo fue Peercoin en el año 2012, y luego aparecieron otros como NXT, BitShares y muchos más.

¿Por qué se creó este protocolo diferente? El protocolo de Proof-of-Stake fue creado por el desarrollador Sunny King en el año 2011 y su objetivo era solucionar algunos problemas que él consideraba que afectaban al sistema de Proof-of-Work. Entre ellos, él destacaba los siguientes: falta de escalabilidad y velocidad. El proceso de minería agrega un alto nivel de latencia para poder aprobar transacciones y producir nuevos bloques. Comentaba que si esos bloques en Bitcoin tardan 10 minutos, esto realmente complica mucho el hacer pagos rápidos. Si a mí me envían algo y tengo que esperar 10 minutos para comprobar si ese dinero me ha llegado, pues esto dificulta un poco los pagos rápidos. Y en este sentido, la crítica es acertada. El problema es que si quieres crear un sistema monetario global descentralizado que, como comentábamos antes, requiere de esos 10 minutos para que se alcance un consenso distribuido por la red. No obstante, la crítica es correcta y luego veremos cómo se tratan de solucionar estos problemas en la red de Proof-of-Work.

Proof-of-Stake soluciona este problema. En las blockchains que usan el protocolo de Proof-of-Stake, las verificaciones son realizadas por nodos con una alta cantidad del token que sea y se producen de manera rápida porque son menos los validadores que tienen que llegar a un consenso sobre el estado de la red. Por otra parte, también comentaba este desarrollador el alto consumo energético del proceso de minería por Proof of Work. Como comentábamos antes, Proof of Work requiere trabajo y es un poder de generación que proviene de máquinas con un alto consumo de electricidad. Proof of Stake cambia el proceso de minería por un proceso de participación, una participación reflejada en la tenencia de moneda o tiempo dentro de la red. Algo parecido a los accionistas dentro de una empresa: el que más acciones tiene, más poder tiene dentro de dicha empresa.

Por otra parte, también decía que el Proof-of-Stake restaría interés financiero a este tipo de ataques. ¿Qué son estos ataques? Estos ataques del 51% fueron uno de los temores que inicialmente más se comentaban sobre las redes de Proof-of-Work. La idea es que con un 51% del poder de cómputo podrías atacar la red. En un sistema Proof of Stake también sería posible con la tenencia del 51% de las monedas, pero a pesar de que es un tema que se ha comentado mucho, no es un peligro que se haya materializado jamás en la realidad debido al coste económico de llevar a cabo dicho ataque. Satoshi ya comentaba que es más rentable ser un participante honesto, porque incluso alguien malicioso tendría difícil llevar a cabo este ataque debido a que siempre se podría forkear la red y evitar dicho ataque.

Bien, ahora que hemos comentado un poco por qué surge este otro sistema y qué problemas tiende o pretende solucionar, ¿cómo funciona la prueba de participación? Este sistema busca incentivar a los participantes para que posean en todo momento una determinada cantidad de monedas. La posesión de monedas les permite ser elegidos por el proceso de selección aleatoria que se realiza para designar tareas de verificación. Bajo este esquema, aquellos que tengan más reservas tienen mayor peso en la red y mayores oportunidades de ser elegidos. Una vez elegidos, podrán validar transacciones y recibir ganancias, incentivos y recompensas por ese trabajo realizado. La mayor tenencia no garantiza, no obstante, la selección. Si esto fuese así, digamos que se desincentivaría el proceso, así que siempre queda algo de azar dentro de este tipo de sistemas.

Pasemos ahora al sistema de Delegated Proof of Stake o prueba de participación delegada. Este es un sistema similar al anterior, pero de alguna manera distinto. Es un protocolo de consenso diseñado para blockchains que pretenden ser altamente escalables. Y ahora veremos por qué. La implementación de este protocolo implica que todos los participantes de la red eligen por votación una serie de delegados. Nótese que por esto es necesario que exista confianza parcial en ellos, en estos delegados. Los delegados definen una rotación de líderes. Esto significa que cada uno tiene un turno dentro de la rotación para producir el bloque. Gracias a esta acción, dicho delegado puede generar un bloque y cobrar una recompensa por ello. El poder de voto de cada participante de la red es proporcional a su participación en la misma, parecido al proof of stake. Esta característica es parte de su relación con este protocolo que comentábamos.

Para favorecer la descentralización, es habitual que las redes basadas en Delegated Proof of Stake sometan a votación decisiones relacionadas con su funcionamiento. Temas como las recompensas, la cantidad de delegados, el comportamiento ante bifurcaciones de la red y otros. Además, permiten penalizar a los delegados si no se comportan de acuerdo a lo esperado. Dicho esto, el Delegated Proof of Stake se usa, como decía, para tratar de ser incluso más escalable, incluso más rápido. Hablamos de un número aún menor de personas validando, lo cual permite un consenso incluso más rápido, pero de nuevo, claro, a costa de centralización.

Pasemos ahora a otro sistema, el Proof of Authority, la prueba de autoridad. Esta está diseñada para ser una solución especialmente dirigida a blockchains privadas. El término Proof of Authority fue propuesto por Gavin Wood, cofundador y ex CTO de Ethereum. Este protocolo de consenso tiene una marcada diferencia frente a otros como los comentados Proof-of-Work y Proof-of-Stake. Ello se debe a que Proof-of-Authority se aprovecha de las identidades reales para permitir la validación dentro de una blockchain. Esto significa que los validadores ponen su identidad real y reputación como garantía de transparencia. Este proceso incluye una selección arbitraria de dichos validadores confiables, una situación totalmente diferente a la minería de Proof-of-Work, pero con similitudes al esquema de participación o participación delegada comentado antes. Además, Proof-of-Authority se basa en un número limitado de validadores; esta característica le otorga una clara ventaja y es de nuevo la alta escalabilidad lo que tiene un impacto positivo en aplicaciones donde la velocidad es primordial. Además, mantiene un alto nivel de control de acceso a dicha blockchain, pues solo los nodos con permiso pueden participar.

Bien, ahora que hemos cubierto Proof of Work y otras alternativas como Proof of Stake y similares, hablemos un poco de la conclusión sobre este tipo de minería. La tecnología blockchain necesita de la minería y utiliza esta minería para permitir crear un sistema sin necesidad de confianza. Proof of Work alinea perfectamente los incentivos de los mineros y los usuarios de la red. Las alternativas, como hemos comentado, buscan ofrecer características diferentes, normalmente la escalabilidad y la rapidez. Pero claro, eso no es todo; contradice o dificulta la posibilidad o la capacidad de funcionar sin esa confianza. Y es que nos obliga a usar confianza o a confiar en participantes que se dedican al consenso y a hacer consensual la red y a validar dichos bloques. Así que estos son los diferentes sistemas de minería y los diferentes factores que les afectan.