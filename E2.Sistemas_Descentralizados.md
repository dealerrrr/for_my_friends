---
title: Sistemas Descentralizados | Especialización 2
URL: https://app.web3mba.io/courses/take/especializacion-2-sistemas-descentralizados/texts/41284717-1-1-protocolos-de-consenso-la-clave-de-la-seguridad-en-blockchain
lang: es-AR
---
# Especializacion 2. Sistemas Descentralizados
## U1. Protocolos de Consenso
### Protocolos de Consenso, la clave de la seguridad Blockchain
Los Protocolos de Consenso en Blockchain son una de las piezas fundamentales para el buen funcionamiento de esta tecnología.

Sin ellos, la generación de redes descentralizadas capaces de proteger la información que manejan y almacenan sería imposible de alcanzar, de hecho, sin la generación de protocolos de consenso, muchas aplicaciones más allá de la Blockchain serían inseguras y probablemente imposibles de alcanzar. 

**Pongamos un ejemplo no-Blockchain para ver el alcance de los protocolos de consenso:** 

- Si pensamos en un avión de pasajeros como un Boeing 747, seguramente, lo primero que se nos viene a la cabeza son su gran tamaño y la potencia de sus motores. 
- Sin embargo, el funcionamiento de este avión no sería para nada seguro si sus computadoras no fueran capaces de funcionar de forma distribuida y segura usando un primitivo protocolo de consenso. 
- **La tarea en este caso es sencilla:** Si un sensor del avión da una información, las computadoras de abordo (7 en las versiones más modernas del avión) deben revisar dicha información y alcanzar un consenso sobre la veracidad de dicha información. 
- Cualquier discrepancia debe ser rápidamente solucionada, y si no se soluciona, se avisa a los pilotos de la misma para que tomen las medidas pertinentes.

Esto se da a un nivel muy pequeño, en sistemas que bien podríamos decir “centralizados” por su alcance, pero que nos demuestra un hecho: 
> Los protocolos de consenso están en lugares donde menos los esperas y muchas veces resultan críticos para la operatividad del espacio donde se implementan. 

Con la llegada de Blockchain, los protocolos de consenso sufrieron un enorme desarrollo.

Satoshi Nakamoto diseñó su **Consenso de Nakamoto** usando piezas como _Proof of Work_ (un protocolo de consenso que usa trabajo computacionalmente costoso), _HashCash_ y una serie de reglas sencillas para que Bitcoin, pudiera contar con una red P2P segura. 

Desde entonces, los protocolos de consenso han sufrido una enorme evolución que nos lleva a analizar a sus descendientes  y las diferentes partes que lo hacen factibles.

### BFT y "no-BFT"
En la comunidad existe la idea de que Proof of Work es un “Protocolo de Consenso Completo”, pero esto no es del todo cierto.

Proof of Work es un protocolo de trabajo que permite generar un sistema de consenso donde el trabajo computacional es recompensado. 

Lo que hace PoW es premiar a aquel nodo capaz de lograr primero el trabajo PoW requerido y, ese premio viene en forma de recibir la autorización de realizar una tarea privilegiada en la red, además de recibir alguna compensación. 

En Bitcoin, PoW es lo que habilita a los mineros que hacen su trabajo para que estos puedan emitir un bloque que se agregará a la red (una tarea privilegiada que solo el minero ganador puede hacer) y aparte, reclamar la recompensa de bloque junto con las comisiones (otra tarea privilegiada que el minero ganador puede hacer). 

> En ningún punto, PoW hace algo con el consenso con respecto a la red, ni se preocupa por la veracidad del trabajo, ni por el tamaño de la cadena, ni otros factores que afectan al funcionamiento descentralizado de la red.

Para lograr esto es necesario crear un conjunto de reglas en las que PoW es solo una parte del todo, y eso es lo que Satoshi Nakamoto creó con su Consenso de Nakamoto. El Consenso de Nakamoto es simplemente la unión de PoW y una serie de reglas que son: 
1. Solo el minero ganador puede tener acceso privilegiado para escribir el historial de la red y reclamar la recompensa. Aquí es donde tiene lugar PoW y su esquema. 
2. Los nodos deben estar sincronizados tanto en cuanto al historial, como de tiempo, como en conjunto de reglas a aplicar sobre los bloques que forman la blockchain. Es decir, los nodos deben manejar el mismo protocolo y reglas para aplicar el consenso de forma uniforme.   
3. En caso de que se generen dos bloques al mismo tiempo, ganará aquel que tenga mayor peso. Esta es la regla de la cadena más larga. 
4. La cadena que se mantendrá válida será aquella con mayor poder computacional y por tanto mayor tamaño. Este es un mecanismo de protección contra el ataque de 51%. 

Este simple diseño por parte de Satoshi es lo que originó el primer sistema con tolerancia a fallas bizantinas (BFT) del mundo aplicable a una red P2P. Aquí es donde entran en juego este concepto. 

#### Tolerancia a Fallas Bizantinas. 
La Tolerancia a Fallas Bizantinas, es la capacidad de un sistema informático distribuido, de soportar fallas bizantinas. Estas fallas pueden ser:
1. Fallas de consenso.
2. Fallas de validación.
3. Fallas de verificación de datos.
4. Fallas en el protocolo de respuesta frente a situaciones de la red.

- Bitcoin fue el primer sistema P2P en lograr crear un sistema con un protocolo de consenso BFT, y desde entonces ha demostrado que su solución ha sido una de las más exitosas en ese sentido. 
- La seguridad de Bitcoin se ha visto en peligros en muchos episodios, pero su protocolo de consenso siempre le ha protegido y ha mantenido a la red funcionando todo el tiempo. 

Pero los protocolos de consenso pueden ser de otro tipo: pueden ser no-BFT, definiendo aquellos protocolos que no garantizan del todo una protección bizantina. Hacemos esta distinción, porque a partir de ahora será relevante a la hora de que puedas ver y comprender con facilidad porque redes como Bitcoin (con un sistema BFT basado en PoW), es distinta a nivel de seguridad y escalabilidad, si la comparamos con redes como Solana (no-BFT y basada en PoH). 

#### ¿Por qué existen protocolos de consenso no-BFT? 
La respuesta rápida es que no siempre necesitas un nivel de seguridad tan alto para una red distribuida. 

Existen casos donde prefieres renunciar un poco a la seguridad y ganar velocidad, y es allí donde los protocolos no-BFT ganan. Estos brindan un buen nivel de seguridad y la capacidad de funcionar a nivel descentralizado y distribuido, mientras garantizan una enorme velocidad de ejecución en esas condiciones.

### Diferenciado los protocolos de consenso y sus derivados
Ahora que sabemos que los protocolos de consenso de Blockchain son algo más que el protocolo de trabajo de su red, podemos comenzar a profundizar un poco más en su forma de trabajo y capacidades.

1. Proof of Work
2. Proof of Stake y derivados (DPoS)
3. Casos de Proof of Authority y Proof of History

#### 1 | Proof of Work
Proof of Work o Prueba de Trabajo, es un protocolo que nos sirve para evitar ciertos comportamientos indeseados en una red.

El protocolo consiste en generar una serie de trabajos computacionales complejos que deben ser completados a los fines de poder acceder a un privilegio otorgado por la red. 

- El trabajo de los “mineros PoW” es verificado por la red. 
- Con el fin de revisarse y ver si cumplen con las reglas establecidas por la red (aquí es donde entran en juego el resto de reglas del Consenso Nakamoto de Bitcoin, por poner un ejemplo). 
- Solo una vez que son aprobadas, se da acceso al cliente para que use los recursos de la red y pueda luego continuarse con el trabajo de la misma, iniciando un nuevo ciclo. 

PoW es un sistema muy sencillo y, por tanto, fácil de implementar y seguro, de ahí que haya demostrado en toda su existencia dichas características. Bitcoin es su mayor exponente en ese sentido. 

Después de todo, hackear una red PoW es equivalente a tener un enorme poder computacional, un poder que crece a medida que la red se hace más y más grande. 

#### 2 | Proof of Stake y derivados (DPoS)
Proof of Stake es un cambio de paradigma con respecto a PoW. La Prueba de Participación o Proof of Stake, es un protocolo que apunta a crear una red de validadores que hacen una apuesta económica con el fin de ganar poder de participación en la red.

La apuesta económica generalmente es dada en tokens de la red y cuanto mayor sea la misma, mayor potencial validador tiene dicho nodo y, por tanto, mayores posibilidades de ser elegido como el validador del próximo bloque que formará parte de la red. 

En esta perspectiva se deja de lado del poder computacional y se cambia por poder económico, bajo la premisa de que aquel participante económicamente comprometido con la red, tratará de mantener el buen funcionamiento de la red y, por tanto, proteger su riqueza económica. 

El punto positivo de PoS es que usa poca energía y resulta ser temporalmente estable en cuanto a la generación de información (la información se genera a intervalos regulares y sin variación importante). Esto es especialmente relevante en redes de gran velocidad y de allí que la mayoría de redes Blockchain de alta velocidad hayan elegido este sistema. 

> Proof of Stake es solo un protocolo que habilita el diseño de un protocolo de consenso completo. Para entender esto veamos Ethereum.

##### Ethereum
Ethereum, usando PoW, funcionaba con un protocolo de consenso derivado del Consenso de Nakamoto. 

Es decir, usaba un conjunto de reglas de consenso muy parecido al de Bitcoin. Pero ¿Qué es PoS? ¿Qué protocolo o reglas de consenso usa?. En Ethereum le conocen como Gasper, y es el protocolo o mecanismo de consenso global de Ethereum PoS.

¿Complejo, no? Lo realmente importante en este punto es que entiendas que PoW o PoS, son solo una parte del protocolo de consenso global de una red Blockchain, y estos ejemplos lo dejan claro. De hecho, para hacerlo más claro, PoS de Ethereum con su implementación Gasper es considerado un protocolo de consenso del tipo BFT, al igual que el de Bitcoin, pero debido al funcionamiento de PoS, este resulta ser un poco más inseguro.

**PoS es muy flexible, puede ser aplicado a sistemas de consenso BFT o no-BFT.** 

- Un buen ejemplo de esto lo podemos ver en DpoS. DpoS es un derivado de PoS y que sienta las bases para sistemas no-BFT y BFT. 
- Por ejemplo, Tendermint es un famoso protocolo de consenso que es habilitado en redes que usan DPoS (como Cosmos) pero Tendermint es un protocolo PBFT (Practical Bizantine Fault Tolerance, diseñado en el año de 1999) y por mucho BFT que veamos en PBFT, este realmente no es una solución completa a los BFT, y por tanto, cuenta con una seguridad inferior a la de Bitcoin (que si es un BFT completo). 
- De hecho, casi cualquier red Blockchain que use Tendermint como protocolo de consenso, puede ser afectada por el llamado ataque de 33%, el hermano menor del ataque de 51% de Bitcoin.

#### 3 | Casos de Proof of Authority y Proof of History
Dicho esto, queda entonces en perspectiva el caso de protocolos como Proof of Authority (PoA) y Proof of History (PoH). Proof of Authority es usado directamente en redes centralizadas como Hyperlegder, generalmente en conjunto con mecanismos de consenso no-BFT que garantizan un funcionamiento descentralizado y una gran velocidad de operación. 

- Por ejemplo, una red de Hyperlegder Sawtooth, puede funcionar bajo un esquema PoA y ofrecer una escalabilidad de 100 mil transacciones por segundos sin mayores problemas. 
- El problema es que bastaría con que una pequeña parte de la red sea maliciosa para afectar a su normal funcionamiento, lo que hace poco aplicable este sistema en redes Blockchain públicas.

De hecho, de las pocas redes Blockchain públicas que usan PoA, solo GNOSIS y Eurus son públicas, y para formar parte de su red de validadores debes pasar por un proceso de selección y análisis riguroso. Otras redes PoA (o derivadas) que están funcionando de forma pública es BNB Chain, la cual cuenta con un nivel de centralización enorme, ya que la red funciona gracias a 21 nodos validadores, no más, no menos. 

**Proof of History presenta casi la misma situación.** 

Este algoritmo lo encontramos en Solana en conjunto con un protocolo de consenso no-BFT, conocido como  Tower Byzantine Fault Tolerance (Tower BFT - TBFT). TBFT es una solución no-BFT rápida que en conjunto con Proof of History habilita el desarrollo de Blockchain de alta velocidad, algo en lo que Solana destaca. El problema es que la centralización derivada de esto es enorme. TBFT es un algoritmo que garantiza la seguridad de una red siempre y cuando menos de ⅓ de sus nodos no sean maliciosos, por encima de ese umbral la red simplemente ya no es segura. 

No hay que ir muy lejos para ver ejemplo de que pasa cuando PoH y TBFT fallan, la red Solana (aún en desarrollo) ha sufrido de varias caídas globales de servicio, algo inédito dentro del mundo Blockchain y mucho de ello se explica en la inestabilidad de su desarrollo y el hecho de que sus algoritmos BFT son incapaces de hacer frente a situaciones que superen su diseño. 

#### Conclusiones
Los algoritmos o protocolos de consenso son un mundo especialmente complejo. Diferenciar las posibilidades y límites de cada uno de ellos requiere el estudio y análisis individual de cada uno de ellos, algo que nos tomaría mucho tiempo en lograr.

Sin embargo, debes tener en cuenta y muy claro dos cosas: 
1. Los protocolos de consenso en Blockchain van mucho más allá de las palabras PoW o PoS que te indican las criptomonedas. 
2. No todas las implementaciones son igual de seguras o resistentes, ya que cada proyecto puede personalizar las reglas generales de consenso a su conveniencia.

Dicho esto, es posible crear redes PoW de alta velocidad, pero renunciando a la seguridad de protocolos BFT y, por tanto, ser propensa a caídas o errores catastróficos. Y todo ello debido a la implementación realmente importante para el consenso: la estrategia BFT elegida. 

Los proyectos Blockchain generalmente hablan de este tipo de datos en sus white papers, este es el primer lugar para conocer la verdadera capacidad y alcance de ese proyecto.

## U1. Práctica
### Niveles de Descentralización en Blockchain (Video)
![[517.E2_Niveles_de_Descentralización_en_Blockchain.mp4]]
[Niveles de Descentralizacion en Blockchain](https://app.web3mba.io?wvideo=tx4k7z8fbw)

Saludos y bienvenidos a este nuevo video en el que explicaremos qué son los niveles de descentralización y cómo podemos medir la descentralización dentro de las redes blockchain. En primer lugar, la descentralización dentro de las redes blockchain debe entenderse como una propiedad emergente. Es decir, es una propiedad que se crea gracias a la existencia de diferentes nodos o de una gran cantidad de nodos que forman parte de lo que sería la red blockchain como tal. A medida que una red blockchain tenga más y más nodos, mayor será su nivel de descentralización, porque una mayor cantidad de personas, o una mayor cantidad de elementos, tienen poder de decisión sobre lo que sucede en esta blockchain.

Por ejemplo, tenemos redes como Bitcoin, en las que existe una gran cantidad de nodos. Estos nodos completos, o en el caso de que sean "pruned nodes" (nodos podados), tienen la capacidad no solo de recibir y enviar las transacciones que se realizan dentro de la red, sino que también pueden generar su propio consenso respecto a estas transacciones y la validez que estas puedan tener. Así se crea o se genera lo que sería el historial de la blockchain, que se almacena generando lo que llamamos la cadena de bloques, que es todo el conjunto de datos encadenados unos a otros respecto al historial completo de transacciones que se están realizando dentro de la red Bitcoin. Esto se ha cumplido de forma bastante cierta en redes como Bitcoin, Ethereum, entre otras, que se han construido utilizando esta tecnología y que, de cierta forma, siguen siendo los pilares fundamentales de la tecnología blockchain.

Ahora bien, la idea de que más nodos es igual a mayor descentralización es algo que está bastante claro dentro de la comunidad. Sin embargo, existen momentos o ciertos matices respecto a esta realidad. Por ejemplo, si existe una red blockchain en la que los nodos, dependiendo de su grado de participación, pueden tener acceso a diferentes funciones, esta descentralización no se cumple. Estaríamos llegando a dividir las funciones de los nodos en diferentes ramas o capacidades que podrían suponer una diferenciación en cuanto a las capacidades de consenso que pueden generar estos nodos.

¿Qué tipo de blockchains pueden tener este tipo de comportamiento? ¿O qué tipo de blockchains utilizan este tipo de estructuras para realizar su funcionamiento? Generalmente, este tipo de funcionamiento se observa en redes blockchain privadas, donde la descentralización no tiene ninguna relevancia. Por ejemplo, podríamos hablar de proyectos como Hyperledger, donde existe una gran diferenciación. En el caso del proyecto Hyperledger South2, podríamos tener un nodo, pero no tendríamos la capacidad de consenso debido a que, si el hardware donde estamos ejecutando este tipo de nodos no cumple ciertos requisitos, entonces no podríamos generar un consenso; simplemente podríamos almacenar la información. Aquí estaríamos hablando de que, a pesar de que son tecnologías blockchain, no existe una descentralización real, pero podríamos mantener el funcionamiento de la blockchain como tal.

Con este tipo de ejemplos, es donde entra la importancia o la relevancia de hablar de los niveles de descentralización y cuál es la realidad en los diferentes proyectos que podemos observar dentro del ecosistema. Inicialmente hablé de Bitcoin. También vamos a hablar de Ethereum y de otra red muy conocida, como es Solana. Vamos a medir la descentralización de estas tres redes para que ustedes puedan comprender de forma mucho más sencilla cómo los niveles de descentralización impactan en la capacidad de estas redes para resistir diferentes acciones que puedan realizarse en su contra.

Empecemos primero con Bitcoin. Debemos entender que Bitcoin, en sus inicios, es un sistema de intercambios. Es un sistema que permite que las personas que están en el mercado puedan realizar intercambios. Como toda red blockchain en sus inicios, comenzó de forma centralizada. Es muy importante lo que acabo de decir: la blockchain es descentralizada como una propiedad emergente de acuerdo a la cantidad de nodos que están dentro de su red. Si tomamos en cuenta esto, entenderíamos por qué afirmé que Bitcoin inició centralizado. Pongámonos un momento en el papel de Satoshi Nakamoto. Él generó el software de Bitcoin y, en ese momento, la única persona que estaba dentro de la red era él. Era el único que tenía un software de nodo funcionando, el único que estaba minando dentro de la red, y por lo tanto, al ser el único que tenía el software de nodo y el software de minería funcionando para la red Bitcoin, efectivamente, la red Bitcoin se encontraba centralizada.

Sin embargo, Satoshi Nakamoto liberó el software de Bitcoin y, al hacerlo, más personas empezaron a unirse. Uno de ellos fue Hal Finney, quien se unió a la red Bitcoin, dejándolo muy claro en un tweet que decía "Running Bitcoin" (Ejecutando Bitcoin). Al unirse a la red, Hal Finney comenzó entonces el proceso de descentralización de Bitcoin. Fue a partir de ese momento en el que más personas como Finney se empezaron a unir a la red, que Bitcoin comenzó a construir la descentralización de su red. Es donde emergió la descentralización de su red. De allí que, nuevamente repito, la descentralización de las redes blockchain es una propiedad emergente, no una propiedad intrínseca de las redes blockchain. Mientras más nodos existan en una red, mayor será su descentralización. Pero esto solamente es posible si todos los nodos tienen las mismas capacidades y el mismo nivel de acceso a las funciones que esta red pueda tener.

En Bitcoin, esto se puede ver muy claramente, porque tenemos dos tipos de nodos o funciones muy claramente definidas. En este caso, serían los nodos que almacenan la información, que se encargan de verificarla, y los mineros, que son los que se encargan de producir cada uno de los bloques para que los nodos posteriormente verifiquen toda esta información y la incluyan dentro de lo que sería el historial. En este caso, Bitcoin está construido de tal manera que, mientras más nodos tenga su red, mayor será su nivel de descentralización o mayor será su coeficiente de Nakamoto, como se le conoce en español, a esta propiedad dentro del ecosistema. Es decir, mientras mayor sea el coeficiente de Nakamoto, mayor será el nivel de centralización de la red.

Expliquemos un poco, antes de continuar, qué es el coeficiente de Nakamoto. El coeficiente de Nakamoto es simplemente una medida numérica que nos indica cuántos nodos tienen que coludirse o unirse para empezar a tener un efecto negativo dentro de la red. Es decir, si tenemos un número "n" de nodos que se unen, y al unirse estos nodos pueden tener un efecto negativo, como puede ser censurar elementos de la red, transacciones, o cualquier otro tipo de acción que pueda ir en contra de la utilización libre de la red, ese número de nodos sería el número mínimo que tendría que tener un atacante para poder afectar la red. Mientras mayor sea el número del coeficiente de Nakamoto, mayor será la cantidad de nodos que se necesitan y, por tanto, mayor nivel de descentralización tendrá la red como tal.

En Bitcoin, podemos ver esto muy fácilmente si vamos a lo que sería Bitcoin Nodes, y allí podemos ver la cantidad de nodos que están dentro de la red. En esta página web, que ya seguramente algunos de ustedes conocen, podemos ver que al día de hoy se encuentran activos de forma pública 15,072 nodos de Bitcoin, distribuidos por todo el mundo. Aquí en el mapa pueden ver la distribución de nodos que están respaldando o cuidando la descentralización de la red. Por supuesto, hay que hacer una acotación con este número, y es que estos son los nodos públicos, los nodos alcanzables de forma pública por medio de Internet. Es decir, pueden haber nodos privados que se estén ejecutando dentro de redes protegidas por muros de fuego o firewalls que no pueden ser alcanzados y que pueden estar allí también aportando su granito de arena a lo que sería la descentralización de la red. Generalmente, en la comunidad Bitcoin, se estima este número por dos, y esa sería la cantidad de nodos que aproximadamente existirían dentro de la red Bitcoin. Es decir, públicamente hay 15,000, pero globalmente, incluyendo estos nodos privados que pueden estar allí funcionando dentro de la red Bitcoin, estaríamos hablando de unos 30 a 31,000 diferentes nodos repartidos a nivel mundial.

Esto significa que la descentralización de Bitcoin es una de las más grandes que existen dentro del ecosistema blockchain y, por lo tanto, es una de las redes que podríamos tomar como medida para considerar la descentralización de otras redes. Ahora bien, ya que tenemos el ejemplo de Bitcoin y podemos ver que su descentralización es bastante efectiva, veamos entonces qué pasa con los otros dos ejemplos que mencioné al principio, que son Ethereum y Solana. Tomamos Ethereum y Solana porque son dos redes blockchain que tienen una gran comunidad a su alrededor, que están muy centradas en la seriedad de la construcción de la Web3 y que, en cierta parte, su comunidad todavía está en debate sobre si son o no son descentralizadas, tal como se ha venido diciendo.

Empezando con Ethereum, podemos ver que, cuando era proof of work, tenía un alto nivel de descentralización. Teníamos nodos que podían servir como parte del consenso, cuyo costo era cero para instalar estos nodos, y teníamos los nodos mineros que requerían una pequeña aportación económica para construir la infraestructura necesaria para ejecutar la minería de Ethereum y, por lo tanto, tener peso dentro de la construcción de los bloques. Pero ahora, con la conversión de Ethereum a proof of stake (POS), esto ha cambiado mucho. Para dar un ejemplo más claro de esto, vamos a lo que sería Ethernodes. Aquí en Ethernodes, podemos ver la cantidad de nodos y redes que están distribuidas dentro de la red de Ethereum. Rápidamente podemos ver aquí el dashboard. Esta es la estadística de la red principal de Ethereum. Aquí tenemos las estadísticas por cliente y vemos que tenemos el cliente Geth, el cliente Erigon, Nethermind, Besu, OpenEthereum. Tenemos una serie de clientes que nos permiten ejecutar nodos de Ethereum.

Ahora bien, la mayoría de estos clientes son clientes Geth. Esto no tiene ningún problema, ya que Geth es el software oficial de Ethereum, y por lo tanto, es aceptable que este tipo de software sea el principal dentro de la red. Lo que llama la atención no es tanto la cantidad de clientes que existen dentro de Ethereum, sino cómo se ha ido centralizando la red Ethereum a nivel de despliegue en países. En este caso, aquí podemos ver que casi el 50%, el 46.92% para ser más exactos, están desplegados en los Estados Unidos, y un 12% está desplegado en Alemania. Estos dos números nos hacen pensar que, aunque estén desplegados en un país o en otro, no significa absolutamente nada. Pueden estar desplegados en un país, pero pueden estar distribuidos a lo largo y ancho de su territorio. La situación no es precisamente esa, sino que la mayoría de estos nodos están desplegados en servicios en la nube, como lo son Amazon Web Services.

De hecho, si vamos a lo que sería el tipo de redes que están distribuidas en esta situación, en "Network Types", vemos que el 62.73% de los nodos validadores dentro de la red de Ethereum están en formato de hosting. Es decir, dependen de un tercero para poder funcionar. Esto es un claro ejemplo de cómo la centralización de la red de Ethereum está tomando forma. ¿Qué servicio de hosting? Bueno, aquí están. El 62% de todos estos nodos que están en formato hosting están siendo manejados por Amazon, mientras que un 8.84% está manejado por Ethereum Online. Otro 2.89% está manejado por una empresa llamada OVH, muy reconocida como hosting a nivel internacional. Otro 2.86% está manejado por Google Cloud. Así sucesivamente, podemos ver cómo se van centralizando los servicios de despliegue de nodos de Ethereum en redes que están completamente centralizadas y que una persona con una orden judicial podría llegar y simplemente apagar el switch y dejar que todo esto deje de funcionar.

El problema de la centralización en Ethereum es que es muy difícil de abordar. Por decirlo de una forma, la descentralización no es realmente descentralizada. Porque, aunque tengamos una gran cantidad de nodos y una gran cantidad de personas participando en lo que sería el protocolo de consenso de T-LINK, que es Proof of Stake, tenemos un enorme problema en cuanto a la localización y la forma en que estos operadores están utilizando esos nodos. Y eso lo podemos ver muy claramente, no solo porque estén dentro de lo que sería Amazon.com y las leyes americanas, sino por cómo se cumplen esas leyes americanas. Para ello, vamos a ver una página llamada "MecWatch" que nos permite ver cómo ha ido evolucionando la red y cómo se están cumpliendo ciertas regulaciones dentro de lo que sería la red Ethereum.

Este es MecWatch. Aquí, en este gráfico, podemos ver lo siguiente: "Poshmark OFAC compliant blocks". O, para hacerlo más sencillo, bloques que están cumpliendo con las reglas de la OFAC de los Estados Unidos. Es decir, si tengo un bloque, tú como individuo tienes una advertencia de Loftback, seguramente si estás realizando una operación en Ethereum, verás que este tipo de acciones evitarán que puedas realizar esa operación de forma normal, porque al cumplirse las reglas de Loftback y estar tu dirección prohibida por esas reglas, entonces los nodos te evitarán validar tu transacción dentro de la red. Actualmente, el nivel de cumplimiento de las reglas OFAC está llegando, al día de hoy, al 71% de todos los nodos. Es decir, el 71% de todos los nodos de Ethereum actualmente se encuentran cumpliendo con las reglas OFAC. Esto significa que, efectivamente, el nivel de centralización de Ethereum está alcanzando niveles bastante peligrosos.

MecWatch también muestra la siguiente lista, que es la lista de censores que están dentro de la red. Podemos ver, muy extrañamente, cómo ciertos protocolos descentralizados están realizando este tipo de acciones. Por ejemplo, tenemos a Screen Finance, StakeHound, Lido, y Rocket Pool, aunque en este caso Rocket Pool no es tan descentralizado. Pero sí tenemos, por ejemplo, Anchor, que se promociona como una red de servicios para Ethereum de forma descentralizada, pero que realmente, como pueden ver, también cae dentro de este tipo de situaciones, no debido a sus propias políticas, sino porque la mayoría de los nodos que están dentro de la red Ethereum están haciendo cumplir las leyes de la OFAC.

¿Qué significa esto para la red Ethereum? Pues bien, si bien la red puede estar muy descentralizada, esto no significa que esa descentralización sea efectiva. Y no es efectiva porque, al final, muchas de estas personas que están poniendo su confianza en servicios de terceros, como sería Amazon, tienen que cumplir diferentes leyes para poder desplegar esos servicios dentro de esas nubes que están siendo controladas por un tercero. En este caso, Amazon o cualquier otro proveedor de servicios de hosting. Este tipo de descentralización, que depende de terceros, realmente no es una descentralización, y esto es uno de los mayores problemas de Ethereum con respecto a su red actual, que, debido a la gran cantidad de recursos que necesita para poder almacenar sus datos y funcionar de forma concreta, está llevando a este tipo de acciones. No solo a nivel de recursos computacionales, sino también en cuanto al staking. Por ejemplo, muchas personas en la comunidad dicen que el nivel de staking de 32 ETH para poder ejecutar un nodo validador es muy alto, lo que dificulta que más personas puedan instalar nodos validadores en sus casas y ejecutarlos sin mayores problemas, ya que es un punto de entrada bastante fuerte y, obviamente, es una inversión considerable para ejecutar un nodo validador que tendría un ROI bastante alto en el tiempo.

Como pueden ver, se cumple la premisa de que, si bien pueden tener muchos nodos, depende de muchas otras funciones y características para que esa descentralización sea realmente efectiva, y en Ethereum podemos ver eso bastante claro. Otra red en la que podemos observar esto de forma bastante clara es Solana. Toco Solana porque tiene un problema parecido al de Ethereum, pero con mayores cotas de atención. Vamos a ver en este caso un reporte que la misma Solana ha realizado. Aquí está el reporte de agosto de 2022, en el que nos cuenta que, si bien la red Solana tiene más de 1,400 nodos funcionando dentro de su red, es muchísimo menos que lo que tiene Ethereum y mucho menos que lo que tiene Bitcoin. Si bien tiene esta cantidad de nodos, su coeficiente de Nakamoto es extremadamente bajo y peligrosamente muestra cuán centralizada es la red.

En este caso, aquí nos están mostrando cómo ha ido evolucionando el valor del coeficiente Nakamoto de Solana durante los últimos dos años. Vemos que desde junio y julio del año 2020, la red Solana tenía un coeficiente Nakamoto de 0, y hasta la actualidad, ese coeficiente Nakamoto ha llegado solo a 31. ¿Qué significa esto? Que, si bien Solana tiene más de 1,400 nodos distribuidos, basta con que solo 31 de esos nodos estén coludidos para que toda la red que depende de Solana tenga efectos negativos por esta colusión o unión de esfuerzos para afectar la red. Aquí en Solana, por ejemplo, también nos muestran cómo esta realidad del coeficiente Nakamoto se repite en otras redes. Por ejemplo, aquí podemos ver el coeficiente Nakamoto de la red Avalanche, que es de 28, es decir, con 28 nodos coludidos, la red Avalanche ya estaría siendo afectada. Thorchain, que en este caso sería 27. Binance o BNB Chain, que en este caso sería 7. Esto es posible porque, si desconocían este dato, la red BNB Chain en realidad no es una red descentralizada; es una red centralizada que depende solo de 21 nodos validadores. 21 personas manejan todo lo que sería la red de BNB Chain. Cosmos necesitaría de siete nodos coludidos para que la red sea afectada. Osmosis también necesita siete. NIR, siete. Y Polygon, que se promociona como una red descentralizada, solo necesitaría de tres nodos coludidos para que toda la red se vea afectada.

Como pueden ver, este reporte que Solana nos ofrece es bastante informativo, y les invito a que lo lean. Es bastante claro respecto a los niveles de centralización que se pueden observar en diferentes redes blockchain, como las que se muestran aquí. Si se acuerdan, vemos que los niveles de centralización de muchas de estas redes blockchain que se promocionan como redes descentralizadas, con un alto nivel de apertura y descentralización, realmente no son tales, porque requieren de infraestructuras o funciones muy específicas que solo son ejecutadas por un grupo determinado de nodos. Si bien su funcionamiento está limitado para que se puedan ejecutar, si esa cantidad de nodos no se cumple o existe una parte de ella que efectivamente esté haciendo algún gesto malicioso contra la red, entonces podríamos ver afectados los funcionamientos de estas redes. Tal como lo muestra esta gráfica, eso se observa en muchos otros ecosistemas blockchain, como algunos de los que están aquí mostrados. También podemos ver esto en otros proyectos; por ejemplo, Polkadot también tendría este problema porque requiere de una determinada cantidad de nodos para poder funcionar, y su descentralización no es tan completa como la de otros proyectos, como Bitcoin, siendo este el mayor de ellos.

Ahora bien, ¿qué tenemos que ver aquí con respecto a la descentralización y los niveles de descentralización? Es muy importante recalcar que más nodos no significa mayor descentralización, especialmente si esos nodos dependen de un tercero o están manejados de tal manera que un tercero pueda tener efectos sobre ellos. En Bitcoin, esto se ha cuidado mucho, y de allí es que siempre se considera a Bitcoin como el ejemplo a seguir, como una red descentralizada. ¿Por qué es el ejemplo a seguir? Tomemos, por ejemplo, lo que pasó en Bitcoin con el problema del ataque Erebus. El ataque Erebus es un tipo de ataque que particiona las redes blockchain de tal manera que un tercero, sin necesidad de ejecutar realmente un nodo Bitcoin, pueda llegar y romper la red de Bitcoin. Esto fue un problema enorme, un problema a nivel de protocolo, que afectó a Bitcoin y a muchas otras blockchains. Ethereum estaba siendo afectada por esto. Este tipo de ataques, Erebus, era prácticamente un arma nuclear contra las criptomonedas y las redes blockchain. La solución que se buscó para evitar que esto sucediera fue reescribir una parte del protocolo de comunicaciones de Bitcoin para evitar que este tipo de situaciones se cumplieran.

Este es un ejemplo de cómo se cuida la descentralización dentro de este proyecto y que muchos otros, como Ethereum o Dash, no cuidaron con tanto esmero para protegerse frente a este tipo de ataques. ¿Qué significa esto? Que, si bien hay proyectos que tienen una larga trayectoria dentro del ecosistema, hay otros que, aunque tienen esa misma trayectoria, no están cuidando o no tienen tanta relevancia en proteger la descentralización porque piensan que estas características no son tan importantes como ofrecer mayores funciones dentro de la red. Por ejemplo, Bitcoin no tiene contratos inteligentes avanzados, pero Ethereum sí los tiene. Ethereum trabaja mucho en este tipo de funciones. Sin embargo, Bitcoin prefiere proteger más la descentralización que hace fuerte a su red, en lugar de crear nuevas funciones que al final pueden derivar en problemas de seguridad o mayores problemas de descentralización. Eso es lo que Bitcoin ha cuidado, y eso es lo que le ha valido ser una de las mayores redes descentralizadas que existen en la actualidad.

En contraparte, podemos ver en esta tabla que ciertos proyectos que buscan velocidad caen en problemas de centralización, lo que afecta el nivel de confianza que puedan tener dentro de la construcción de los mismos. ¿Significa esto que este tipo de proyectos son malos, que no tienen ninguna aportación válida al ecosistema y a las funciones que se pueden desplegar dentro de él? No, no significa que sean malos. Simplemente tienen un problema de centralización bastante grave que deben solucionar para evitar situaciones desagradables. Cosas como que un tercero llegó, atacó la red y canceló el acceso de todo un país o de medio continente a un determinado servicio porque simplemente pudo hacerlo y tenía las maneras de hacerlo, sin tener en consideración la libertad de acceso a la red. En este caso, una persona, un tercero, un gobierno, quien sea, puede llegar y atacar la red y valerse de eso para censurar el acceso a los servicios que están dentro de esa blockchain. Esto hace que factores exógenos puedan afectar los funcionamientos de la red y de todos los servicios que se despliegan en ella.

Como pueden ver, los niveles de centralización en redes blockchain son bastante complejos de estudiar. Primero, se requiere conocer bastante la red que estamos analizando, en este caso, cómo funciona su protocolo de consenso, cuántos nodos puede mantener la red en funcionamiento, qué tipo de protecciones están implementadas dentro de la red. Todo este tipo de información y datos son los que nos permiten entender cuán descentralizada puede llegar a ser una red blockchain y cómo puede construir un alto nivel de descentralización. Esta competencia por alcanzar la mayor cantidad de potencia o poder dentro de lo que sería la descentralización es lo que muchas redes blockchain actualmente están dejando atrás en favor de otras funciones, como la escalabilidad o el hecho de que sean "gasless", pero renunciando así a la capacidad de descentralización, a la fortaleza de la descentralización y a la capacidad de soportar la censura por parte de terceros que tengan el poder de ejercer dicha censura sobre las redes.

Esto es muy importante saberlo porque nos ayuda a reconocer cuáles son los proyectos que están más centrados en un determinado espacio o servicio, en este caso, para elegirlos o no, dependiendo de qué queremos construir dentro de estas redes y cuál sería nuestro objetivo al construir nuestros servicios. Dicho esto, espero que esta información sobre los niveles de centralización, en este caso de redes como Bitcoin, Ethereum y Solana, y todas las que ya hemos nombrado, les sea útil para que puedan estudiar diferentes proyectos y entender que algunos de ellos pueden ofrecer grandes ventajas o características, pero siempre debemos tener en cuenta qué costos o qué estamos dejando de lado para obtener esos beneficios. Siempre debemos tener en cuenta que, si queremos construir algo descentralizado, debemos apostar por aquellas tecnologías o blockchains que nos ofrezcan la mayor resiliencia para construir todo lo que queramos de una forma bastante fortificada respecto a estas características. Espero que les haya gustado este video y nos veremos en próximas novedades.

## U2. Maquinaria para minería
### Maquinaria para Minería (Video)
![[518.E2.Maquinaria_para_Minería.mp4]]
[Maquinaria para Mineria](https://app.web3mba.io?wvideo=dxpolbakdx)

La minería de criptomonedas es uno de los puntos más importantes en el funcionamiento y la seguridad de las criptomonedas que utilizan el modelo de proof of work. Esto se debe a que todo el trabajo computacional que los mineros realizan sirve para proteger la red de los distintos tipos de ataques que ponen en riesgo su funcionamiento. Por ejemplo, el ataque del 51%, el Finney Attack, el doble gasto, Erebus... Hay muchos tipos de ataques posibles. Los ataques reales ya son más difíciles de llevar a cabo. Debido a esta relación, la minería ha cambiado mucho desde los inicios de las criptomonedas hasta la actualidad, pasando de ser una actividad al alcance de todos a convertirse en una actividad muy especializada. Es bueno detenerse un momento a comentar las diferencias técnicas entre la minería, que es lo que vamos a abordar ahora, lo que es técnicamente necesario para minar, y la importancia filosófica de la minería en sí.

Con la minería, lo que estamos centralizando en esta minería de Proof of Work, como menciono, es un trabajo, un trabajo en forma de energía y cálculos computacionales. Esto es importante entenderlo porque en ese trabajo lo que se está enviando al mercado es una señal honesta. La honestidad de las señales es muy importante para conseguir que dicha señal sea entendida por el resto del mercado. Y cuando tú haces algo que te sale gratis, realmente no estás enviando una señal honesta; estás enviando, bueno, una señal, pero si no te cuesta nada, digamos que hay poca honestidad detrás de esa señal, o al menos podría haberla. No obstante, cuando algo te cuesta mucho, si algo te cuesta mucho trabajo, estás enviando una señal muy importante al resto de los participantes en el mercado. Por eso, la cuestión de la minería y la cuestión de la prueba de trabajo son muy importantes, y por eso vamos a dedicar un momento a analizarlas.

Bien, vamos a los efectos técnicos. ¿Qué es una CPU? Las siglas CPU provienen del inglés y describen la Central Processing Unit o unidad de procesamiento central. Este dispositivo es uno de los componentes básicos que forman un ordenador personal. Son los encargados de realizar los cálculos y controlar los procesos necesarios para su funcionamiento. Durante la aparición de los primeros ordenadores, estos dispositivos no eran muy potentes. Creo que no se conocían. Podréis recordar esos momentos de nuestra vida. Sin embargo, las mejoras introducidas llevaron a una enorme evolución de los mismos, algo que les ha permitido, en la actualidad, contar con una gran capacidad de cómputo. Al comienzo, no obstante, cuando se empezó a hablar de CPUs en la década de los 60, estos tenían un gran tamaño. Con los años, como decía, este desarrollo tecnológico llevó a la miniaturización de los mismos, todo gracias a la tecnología del silicio. De ahí lo de Silicon Valley y por qué Silicon Valley ha sido siempre la cuna de estas tecnologías. Esto hizo posible diseñar CPUs dentro de un pequeño chip, lo que permite hoy que los ordenadores posean un procesamiento de mayor robustez, seguridad técnica y eficiencia.

Vamos a hablar de la relación entre las CPUs y la criptografía. Es una relación tecnológica que nos lleva a la importancia de la criptografía. En los inicios de la criptografía, los nuevos diseños de CPU jugaron un papel muy importante. A medida que estos incrementaron su potencia, permitieron la aplicación de modelos matemáticos más complejos. Esto permitió iniciar la expansión y la adopción de la criptografía en distintos ámbitos informáticos. En primer lugar, se aplicó esto a nivel militar y luego, posteriormente, a nivel empresarial. Pero con la aparición de Internet en los años 90, se expandió su uso a todo tipo de comunicación pública. El objetivo de esto era obvio: proteger la privacidad de los usuarios en Internet. La información que viajaba por la red no podía viajar en texto plano, es decir, donde cualquiera pudiera tener acceso, algo que iba en contra de los conceptos de seguridad y privacidad.

Comenzaron entonces a surgir distintas comunidades virtuales, una de las cuales cambiaría radicalmente este panorama: la de los llamados cypherpunks. Satoshi, recordaréis, o igual no recordaréis, pero Satoshi cuando lanzó Bitcoin lo hizo a una lista de correo donde había varios cypherpunks. Satoshi era uno de estos cypherpunks y en esa lista de correo estaban las personas con las que regularmente se comunicaba. ¿Y cuándo? Lanzó el white paper de Bitcoin. Lo mandó primero a esta red, una lista de correo, que recibió toda la información sobre ¿qué es esto?, ¿para qué sirve?, ¿cómo se mina? Y luego, si tenían interés, podían seguir comunicándose con Satoshi. Por eso, en la raíz de todo este movimiento están los cypherpunks. Estas personas, muchas veces desde el completo anonimato, promovieron la idea de hacer de la criptografía algo esencial en toda actividad en la red. Como resultado, la década de los 90 sufrió un explosivo desarrollo en la tecnología criptográfica. El resultado, hoy en día, es que la mayor parte del tráfico en Internet está cifrado. Un paso adelante en medio de la lucha por la privacidad y la seguridad de nuestros datos públicos y privados.

Para dar un ejemplo claro de la relación entre los CPUs y la criptografía, podemos ver el siguiente caso. Un CPU de principios de los 90 era incapaz, totalmente incapaz, de manejar la actual criptografía AES que vemos en Internet. Sin embargo, los CPUs actuales pueden manejarla perfectamente y ofrecer un alto rendimiento al mismo tiempo. Esta diferencia, que muchas veces damos por sentada, nos permite establecer una relación directa entre el acceso a la tecnología criptográfica de vanguardia, sin que ello merme nuestros recursos computacionales y nuestra seguridad y privacidad, y el desarrollo de tecnologías aún más seguras y confiables, como, claramente, es un ejemplo, la blockchain.

Hablemos entonces de CPUs y blockchain, el inicio de lo que ha sido toda una revolución. Así como la revolución de los CPUs ayudó al progreso de la tecnología criptográfica, estos también fueron decisivos en el inicio de la tecnología blockchain. En un principio, con la aparición de Bitcoin, para hacer los cálculos matemáticos se empezaron a usar CPUs, pues incluso con un bajo nivel computacional era posible minar bloques en la red de Bitcoin, cuya dificultad se incrementa cuantos más mineros minan. Al principio, como digo, estos eran muy pocos, por eso era fácil minar incluso con una CPU de entonces. Pero con el aumento de la confianza en el sistema, aumentó la competencia y, con ello, pronto los CPUs quedaron obsoletos para minar eficientemente, al menos en la red de Bitcoin. Era imposible conseguir con ellos un buen margen de ganancia y se pasaron a usar otros tipos de hardware, como las GPUs o incluso aparatos especializados que surgieron más adelante, como las ASICs, desarrolladas por una de las principales empresas fabricantes de mineros. Es una muestra de la competitividad en este sector y de la importancia de las iniciativas privadas para avanzar en nuestra tecnología.

Fuera de Bitcoin, se han desarrollado muchos otros proyectos de blockchain que también han intentado implantar un modelo de minería de proof of work. Un ejemplo de esto sería la red de Golem. Esta es una red de cómputo distribuido que utiliza un token ERC20 sobre Ethereum. Su función se basa en el uso del poder de CPU de quienes participan en la red. Esto se lleva a cabo con el fin de procesar los datos que los clientes envían a dicha red y, como consecuencia, los usuarios de dicha red ganan tokens Golem por el procesamiento prestado. Al final, hay muchos de estos sistemas que emplean el proof of work y que recompensan con tokens del sistema que sea. Y es que, claro, como decía, proof of work, el trabajo, es eso, es un trabajo, requiere un esfuerzo en forma de recursos y en forma de tiempo dedicado a esta actividad, y para eso necesitas, claro, recompensar a los mineros.

Vamos a hablar posteriormente de cómo son estas recompensas en los diferentes sistemas y cómo funcionan, pero es importante tener en cuenta la sostenibilidad de estos sistemas cuando se planean o cuando se presentan a todos nosotros. Pues claro, si tú lanzas una blockchain y esa blockchain tiene que ser minada, porque como hablamos aquí de blockchain, una cadena de bloques, esos bloques tienen que ser minados y tiene que haber un incentivo para los mineros para que lleven a cabo ese trabajo. Y si el incentivo viene en forma de un token cuyo objetivo no está del todo claro, entonces las recompensas o los incentivos a minar para los mineros serán mucho peores y conllevarán, finalmente, la caída o la desaparición de esa blockchain.

De cualquier manera, como vemos, pese a que la dificultad de la minería ha dejado atrás el poder de los CPUs, existen proyectos que aún intentan aprovechar su potencial, el potencial de estos dispositivos que, como digo, son menos potentes. Hablemos entonces de la minería con CPU, el primer gran paso dentro de estos sistemas de minería. La minería con CPUs fue el primer paso para asegurar las redes de blockchain, como comentaba en un primer momento, Satoshi y esa lista de cypherpunks usaban CPUs para minar Bitcoin. Usaban Proof of Work, bueno, usaban los sistemas para minar con Proof of Work como medio para introducir esa información a los bloques que al final conforman la red. La razón de esto se encuentra en que los algoritmos de proof of work sobre CPUs ya tenían algo de tiempo trabajando y estudiándose en el mundo de la informática, y Satoshi no buscó muy lejos para encontrar inspiración. Concretamente, se fijó en el proyecto de HashCash. También en otros, pero en el tema de la minería, HashCash fue su principal inspiración. El nombre de HashCash hace mención a una tecnología de prueba de trabajo que se usó para minimizar el correo no deseado, el típico spam, y los ataques de denegación de servicio conocidos como DOS o DDoS. Esta tecnología ganó amplia popularidad gracias a su implementación en Bitcoin y muchas otras criptomonedas posteriormente. Su función en las mismas era formar parte del algoritmo de validación de los bloques, todo ello mediante el proceso de minería de criptomonedas. El proyecto fue diseñado por Adam Back, actual CEO de Blockstream. Fue elegido por Nakamoto, por Satoshi, para realizar el sistema proof of work de Bitcoin, basado en el algoritmo hash SHA-256. Dado que los CPUs estaban disponibles por todas partes, en 2009, sin irnos más lejos, una computadora era fácilmente accesible en cualquier parte del mundo, y que la idea de Satoshi era maximizar la descentralización de la red, esta decisión fue fácil. Vamos a usar el sistema empleado por HashCash para que cualquier persona con un ordenador pudiera unirse a la red y convertirse en un minero, de esta manera descentralizando la red y fortaleciendo su seguridad.

Pero como decía, las GPUs pronto se quedaron obsoletas para este tipo de trabajo y por eso es bueno analizar las GPUs, que fueron los hardwares que se usaron posteriormente para esta actividad. Las GPUs son unidades gráficas de procesamiento que cuentan con un poder de cómputo superior al de las unidades centrales de procesamiento convencionales. Comúnmente son conocidas como tarjetas gráficas y, si estás en el mundo de los videojuegos, probablemente sabrás por qué ha habido tanta demanda por este tipo de hardware en el pasado. Estas GPUs permiten optimizar y aumentar el poder de cálculo de las computadoras donde son instaladas. Normalmente dirigidas al mundo de los videojuegos, como decía, fueron muy útiles en el mundo de la minería de Bitcoin debido a su alto rendimiento y poder de procesamiento, al tiempo que llevaron a que la gente que se dedica a los videojuegos tuviese muchos problemas para conseguir esas tarjetas gráficas durante un tiempo. Por todo esto, las GPUs constituyeron la segunda generación de equipos de cómputo en el minado de este tipo de criptomonedas.

¿Cómo podemos elegir entre CPUs y GPUs? ¿Cómo entendemos cuál es mejor que otra? Como cualquier otra actividad económica, el primer reto al que se enfrentan las personas interesadas en la minería es qué elegir para minar. ¿Elijo una CPU o elijo una GPU? Para simplificar la elección, podemos observar los siguientes puntos. Primero, claro, la criptomoneda a minar. El primer punto para saber si elegir una CPU o una GPU para minar es tener presente qué criptomoneda quieres minar y los requisitos para realizar dicha tarea con el objetivo de hacerla rentable. Una pregunta que muchos novatos se hacen es si pueden minar Bitcoin usando CPU o si podrían, por el contrario, usar una GPU. Esto es algo que pueden hacer porque es posible, pero que no les reportará ningún ingreso, ya que la minería de Bitcoin tiene tanto poder de cómputo en su red actualmente que poner una CPU o una GPU a trabajar en este tipo de actividad difícilmente reportará alguna ganancia.

Miremoslo desde esta perspectiva. ¿Cómo puedes mover tú solo un bloque de 100 toneladas usando tus manos y un palillo como palanca? La verdad es que no podrías; tendrías que estar muy fuerte. Y en el caso de que lo lograses, podrías considerarlo algo tan extraordinario y único que bien podría decirse que es algo imposible de lograr. Pues bien, ¿cómo lo logras? Lo mismo pasa con la minería CPU o GPU dentro de Bitcoin. Usar uno de estos hardware, que sería como usar tus manos y el palillo en el ejemplo anterior, para mover un bloque de 100 toneladas, que sería conseguir minar un bloque, lo cual equivale a resolver ese puzzle criptográfico, sería como intentar mover esa roca de 100 toneladas. Total, es tan probabilísticamente remoto que podríamos considerarlo algo totalmente imposible de lograr. Al fin y al cabo, no estás minando tú solo; ten en cuenta que esta actividad, como decía, puede ser, muchas veces, muy rentable, lo cual incentiva a otras personas a meterse a realizarla. Y claro, en esa competencia, solamente aquellos que tienen los factores adecuados son capaces de conseguir una rentabilidad y, por tanto, de mantenerse haciendo esto durante un largo tiempo.

Por todo ello, es importante conocer las opciones de monedas que puedes minar y estimar la necesidad de potencia para cada una de ellas. Esto es lo primero que debes hacer para convertirte en minero. Por ejemplo, Monero, que es otro tipo de criptomoneda, es un proyecto que desde sus inicios siempre se ha considerado muy centrado en la minería CPU, es decir, siempre se enfoca en permitir la minería usando este tipo de hardware. De hecho, es el único gran proyecto cripto que se dedica a este tipo de minería, por lo que si te interesa, si realmente te apasionaría poder minar con una CPU, este es un proyecto que podrías estudiar. En cuanto al resto, Bitcoin, Ethereum u otros, minarlos con CPU es, como decía, una pérdida de tiempo por una simple razón: una CPU jamás te dará la potencia necesaria para hacer que sea rentable.

Pero claro, como decía, hay otros factores a tener en cuenta: está el presupuesto, el mantenimiento de estos equipos y la potencia. En minería de criptomonedas podemos observar una estrecha relación que se cumple, y es que más potencia equivale a más posibilidad de minar el bloque, equivale a más ganancias, lo cual equivale a mayor ROI o retorno de inversión, teniendo en cuenta siempre, claro, también están los gastos. En esta relación, como digo, hay otros factores. Si quieres una CPU o una GPU potente, esto generalmente significa que necesitas realizar una fuerte inversión inicial para comprar dichos equipos. Cuanto más nuevos y potentes, generalmente son más caros, claro, y también debes tener en cuenta el consumo energético. Al ser más potentes, podrían consumir más energía y ser menos eficientes, técnicamente, requiriendo soluciones mejores de refrigeración. Esos gastos eléctricos y la inversión inicial deberás restarlos de tus ganancias estimadas para poder llegar a ese retorno de inversión estimado.

Las fluctuaciones de mercado también son importantes, pues el retorno de la minería viene en la moneda que se mine. Como decía antes, la moneda te recompensa en esos mismos tokens, lo cual equivale a que si ese token no tiene valor alguno, realmente no te está incentivando bien a minar. Finalmente, las instalaciones de minería, climatización y mantenimiento son gastos que también debes tener en cuenta y presupuestar dentro de tu actividad minera. Un minero debe pensar en esto y en cualquier otro imprevisto a fin de tomar una decisión sobre el presupuesto a manejar, qué equipos comprar y estimar el retorno de su inversión. Adicionalmente, debe conocer las especificaciones técnicas de sus equipos, la potencia que puede obtener con ellos y cómo sacar el máximo provecho de los mismos. Minar, déjame decirte, es una aventura y por eso hay muchas personas que directamente no se dedican a la minería, lo cual se convierte en un negocio para profesionales, como apuntaba al comienzo de esta exposición.

### Maquinaria para Minería
![[519.E2_Maquinaria_para_Minería.mp4]]
[Maquinaria para Mineria](https://app.web3mba.io?wvideo=6ecivdgsjp)

FPGA y ASICs, vamos a hablar de esto porque son la siguiente evolución a las CPUs y GPUs que hemos cubierto en el bloque anterior. Bien, ¿qué es un FPGA? A pesar de que existen desde hace algún tiempo, no son dispositivos muy usuales. Sin embargo, los FPGAs cuentan con una característica que los hace únicos en distintas aplicaciones. Los FPGAs tienen la capacidad de poder reprogramarse; esta característica los diferencia de su principal competencia, los dispositivos ASICs, que cubriremos después. Los ASICs se fabrican a medida y no pueden reprogramarse una vez que han sido diseñados, por lo que solo pueden usarse para las tareas específicas para las que han sido programados. Si bien, claro, como veremos, esto las hace muy eficientes en dicha tarea.

Inicialmente, los FPGAs se caracterizaban por ser lentos, consumir grandes cantidades de energía y tener poca capacidad de cómputo paralelo. Sin embargo, esto ha cambiado gracias a las mejoras introducidas en la tecnología del silicio y al desarrollo de sistemas programables. Esto se ha traducido en una mejora sustancial en términos de velocidad y capacidad de trabajo en paralelo, transformando así a los FPGAs en candidatos perfectos para aplicaciones de alta demanda de poder de cómputo. Intel, una de las grandes compañías diseñadoras de chips y procesadores del mundo, que seguramente conoceréis, ha hecho un gran trabajo en la tecnología de los FPGAs. Es una de las que más ha invertido en el desarrollo de este tipo de equipos, al igual que Sealinks y AMD. Muchas de estas compañías están invirtiendo una gran cantidad de recursos en mejorar esta tecnología.

Bien, hablemos de las características de los FPGAs. Existen, como decía, diferentes razones que llevan a la inversión en este tipo de sistemas, pero entre ellas, las más relevantes son la arquitectura programable. Como mencioné, estos sistemas son reprogramables. La principal ventaja que tienen los FPGAs es que se pueden reprogramar y así pueden optimizarse para manejar de mejor manera procesos complejos y realizar análisis y optimizaciones de sus programaciones iniciales. Esto significa que puedes empezar con una programación básica, meterte en la tarea y luego, como ser humano que va aprendiendo, reprogramarte. Aunque tendrá que hacerlo alguien por ti, claro, y así tratar de ser más eficiente en esta tarea. Con ello, la nueva versión del software de los FPGAs permitiría mejorar el rendimiento, claro, con esas evoluciones o solucionar problemas de seguridad detectados en esa primera versión. Una situación que sería imposible usando la arquitectura de los ASICs que veremos después.

Normalmente, la programación de los FPGAs se realiza en lenguajes de programación a bajo nivel. Algo como Verilog o VHDL se suelen usar; ambos sirven para describir al FPGA de forma en cómo se debe manejar el hardware cuando hablamos de este tipo de programaciones. Sin embargo, muchas empresas ofrecen sistemas de programación de más alto nivel que facilitan aún más esa tarea. Por ejemplo, vamos a estudiar el caso de Juan. Imagínate que Juan compra un equipo FPGA de minería para Ethereum con una capacidad de un terahash por segundo; así es como se miden las capacidades dentro de la minería. Con ello, Juan, que ha estado espabilado, obtiene buenas ganancias. Sin embargo, el desarrollador del equipo ha sacado una nueva actualización del software dirigida a dicho equipo FPGA. Es un poco como cuando tienes una aplicación en el móvil y se te baja una actualización que mejora la eficiencia. Ahora, gracias a esta actualización, se consigue una optimización del 15% en esa capacidad de minería, lo cual proporciona una mayor velocidad de minado y una disminución del 4% en el consumo eléctrico. Al aplicar la actualización, entonces el equipo de Juan es capaz de minar a 1,15 Th/s, reduciendo al mismo tiempo sus gastos eléctricos y obteniendo así mejores ganancias. Bien por Juan y bien por los FPGAs.

Debido a esta capacidad especial, los FPGAs son muy usados para crear tarjetas de desarrollo y demás dispositivos de prueba capaces de adaptarse a las necesidades de empresas y negocios. Por ejemplo, AMD ha adquirido Xilinx con el fin de potenciar el desarrollo de dispositivos FPGAs que puedan aplicarse a sus CPUs y GPUs, con el objetivo de ofrecer elementos programables y eficientes para el campo de la inteligencia artificial, machine learning y big data, que hagan así destacar a sus productos.

Hablemos ahora del desarrollo de este tipo de sistemas. Dado que los FPGAs son más sencillos a nivel lógico, las compañías son capaces de traer nuevos productos al mercado de forma más rápida. Esto tampoco es algo que los ASICs puedan ofrecer, porque su desarrollo requiere de ciclos de fabricación más extensos. De nuevo, los ASICs son más rápidos, ya que se centran concretamente en una tarea. Para las compañías dedicadas a blockchain, esto es perfecto o podría serlo. Si una compañía diseña un dispositivo de hardware FPGA para minar una red concreta, desarrollar y mejorar dicho dispositivo le será más fácil que hacerlo desde cero. Con ello, el costo general por diseño y el tiempo de salida al mercado de nuevos dispositivos podría disminuir. Una situación ventajosa para las compañías blockchain, especialmente en un mundo tecnológico que avanza a pasos agigantados.

Los FPGAs actuales incluyen procesadores en el chip, sistemas de entrada y salida de datos, etc. Más funciones dentro de los FPGAs significan menos dispositivos en la placa de circuitos, lo que aumenta la fiabilidad al reducir el número de fallos de los dispositivos. Esta también es una de las características llamativas de este tipo de dispositivos frente a los ASICs. Los ASICs son, en general, una serie de chips que trabajan en paralelo dentro de una complicada tarjeta de circuitos. En dicha tarjeta hay equipos de diferentes fabricantes y con órdenes de calidad diferentes. Si falla uno de ellos, fallaría todo el ASIC, lo cual requeriría mantenimiento y un coste adicional. Pero esto en los sistemas FPGAs es diferente; debido a que el proceso de fabricación es más integrado, la calidad de los circuitos incluidos puede controlarse mucho mejor. Con esto, se puede mejorar sustancialmente la calidad de los dispositivos y su vida útil puede alargarse.

Pese a todo lo anterior, no obstante, los ASICs ganan la partida en la minería de Bitcoin, y por eso creo que es importante dedicarles un tiempo. Bien, ¿qué es un ASIC? Los mineros ASIC son la manera mayoritaria en la que se mina Bitcoin. ASIC son las siglas en inglés de circuito integrado para aplicaciones específicas. En la actualidad, la potencia de computación de la red Bitcoin es tan alta que hace imposible ser minado de otro modo. Los ASIC son equipos informáticos basados en circuitos integrados o chips, desarrollados para hacer funciones muy específicas. Los ASIC se empezaron a popularizar con Bitcoin, convirtiéndose en el conjunto de procesadores específicos optimizados por excelencia para el minado de los bloques dentro de esta red. El primer ASIC para Bitcoin del mundo fue inventado o desarrollado por la empresa china Avalon, ahora conocida como Canaan, en septiembre de 2012. Gracias a su eficiencia, los ASIC han empezado también a ser usados en otros protocolos de minado como Ethereum, SICAS, Litecoin, entre otros. Tienen características únicas según la moneda a la que van destinados. La mayoría de estos sistemas son compactos y otorgan gran potencia de minado. Los mineros ASIC están construidos específicamente para ofrecer el mejor rendimiento posible para la criptomoneda destinada; están diseñados únicamente para labores de minería de dicha criptomoneda.

Al final, es como en el tenis, por ejemplo. En el tenis hay gente que se especializa en una forma de jugar; se especializan en sacar y subir a volear. Bueno, pues cuando este tipo de partido se gana con saque-volea, el jugador que se enfoca en trabajar solamente el saque-volea claramente será más eficiente. Este tipo de sistemas busca un poco lo mismo, es decir, ser muy eficientes haciendo una única cosa. No sirven para nada más; solo sirven para minar una moneda y una moneda únicamente. Pero fuera de eso, su potencia no sirve para nada. Gracias al minado de Bitcoin mediante ASICs, la red ha mantenido una tasa de crecimiento y poder de minado cada vez mayor. De hecho, la cantidad de poder computacional que se dedica hoy a minar Bitcoin es enorme y continúa creciendo mes a mes.

Hablemos de las principales críticas que se hacen a los ASICs. Como cualquier tecnología que se impone, no está exenta de detractores y críticas. Así que veamos algunas de ellas y cuán acertadas son. Criticar, de nuevo, es una de esas actividades que son, no digamos deshonestas, pero en las cuales no hay prueba de trabajo, ya que no cuesta nada criticar. Por lo tanto, es importante entender realmente cuánta verdad hay detrás de dichas afirmaciones. Primero, se critica la centralización del minado. Las grandes granjas de minado, sobre todo en China, comentan que impedirán que pequeños usuarios puedan minar con ASICs. Esta crítica es muy común; siempre se habla de que estos sistemas ASIC, como son tan específicos y pueden llegar a ser tan caros, lo que llevarán es a una centralización. Pero ya hemos visto cómo en la realidad este no es el caso. De hecho, hemos visto cómo se ha baneado la industria minera en China, y eso lo que ha provocado, por ejemplo, es que muy pequeños mineros, pequeñas explotaciones de minería, se hayan diversificado a lo largo y ancho del planeta. Así que es difícil controlar realmente un tipo de producción que se puede generar en cualquier lugar, ya que en cualquier sitio donde hay energía y se pueden llevar dispositivos, se puede minar. Así que eso no lo hemos visto en la realidad.

Otra crítica es la dificultad de compra. Dicen que suele ser complicado encontrar este tipo de mineros e incluso que pueden tardar mucho tiempo en que te lleguen. No obstante, tal y como está el mercado hoy día, en dos semanas puedes pedir un minero. Incluso han surgido servicios que te permiten minar a través de una compañía que hostea o que tiene esos mineros colocados y minando por ti. Tú simplemente pagas a la compañía, y la compañía tiene mineros por todo el mundo a los cuales tú puedes acceder pagando directamente a la empresa.

Otra crítica que se comenta es el coste. Son máquinas especializadas y, por tanto, bastante costosas. Claramente, como son máquinas muy específicas, sí que requieren un coste, y además es un coste que hay que tener muy en cuenta porque, como decía, esos mineros no valen para nada más. O sea, si no va a ser una actividad que te salga rentable, entonces no es algo en lo que quieras meterte y desembolsar esa cantidad inicial. También se habla de que, debido a las pocas empresas que hacen este tipo de dispositivos, podría darse un monopolio a la hora de producirlos. Actualmente, Bitmain controla más del 70-90% del mercado, y eso le permitiría sacar equipos cuando quiera y al precio que quiera. Los monopolios, no obstante, son la típica crítica que siempre se comenta, pero que realmente no existen. Los monopolios de mercado no pueden existir simplemente por las dinámicas puras de un mercado libre. Si yo soy un minero que me dedico a crear este tipo de dispositivos y gano mucho dinero con ello, lo que estoy mandando es una señal al mercado, al mundo, diciendo: "Oye, ponte a hacer esto porque da dinero", y eso lo que hace es que invita a nuevos competidores al mercado, lo cual va reduciendo ese posible monopolio inicial de la empresa que primero ve esta oportunidad. De nuevo, una crítica que, en mi opinión, no tiene sustancia.

Otra crítica, no obstante, es la del consumo energético. Este es uno de los aspectos más criticados de la tecnología. Estos equipos, dicen, consumen grandes cantidades de energía, pero claro, eso sería un problema si lo que se consigue con ese gasto de energía fuese inútil. No obstante, si lo que estás consiguiendo es algo útil, como cuando te desplazas con tu coche de un sitio a otro, no tienes problema en gastar energía. El gasto de energía en algo útil no debería ser un problema; lo que nos tendría que preocupar sería la cantidad de energía que se desperdicia. No debería ser un problema, pero claro, si no tienes un sistema de gasto de energía, no tendrías problema en gastar energía. Y eso es lo que nos preocupa, porque si no tienes un sistema de gasto de energía, no tendrías problema en gastar energía. Y eso es lo que nos preocupa, porque si no tienes un sistema de gasto de energía, no tendrías problema en gastar energía. Y eso es lo que nos preocupa, simplemente año tras año, porque no toda la energía puede dirigirse a actividades útiles. Cuanta más energía, más capacidad tenemos los humanos de seguir avanzando.

Y otra crítica es la temporalidad. Dada la rápida evolución del hardware, los ASICs dicen que quedan rápidamente obsoletos. No obstante, hemos visto que, de nuevo, la realidad va en contra de estas afirmaciones, pues ahora hay ASICs creados y fabricados hace cuatro años que siguen usándose para minar y siguen siendo rentables. Así que cuatro años no parece un plazo de tiempo corto para este tipo de inversiones.

En conclusión, los ASICs, como estamos viendo, seguirán siendo importantes, y esto es porque la razón al final viene dada por el mercado. El mercado ha decidido que, si minar es una actividad provechosa, es una actividad que da beneficio. Entonces, lo mejor es hacerlo con un equipo especializado en este tipo de actividades.

### CPU y GPU, las primeras herramientas de minería
La minería de criptomonedas es uno de los puntos más importantes en el funcionamiento y la seguridad de las criptomonedas que utilizan el modelo de Proof of Work (PoW).

Esto se debe, a que todo el trabajo computacional que los mineros hacen sirve para proteger la red de los distintos tipos de ataques que ponen en riesgo el funcionamiento de la red (Ataque de 51%, Finney Attack, Doble Gasto, Erebus, entre otros). 

Debido a esa relevancia, la minería ha cambiado mucho desde los inicios de las criptomonedas hasta la actualidad, pasando de ser una actividad al alcance de todos hasta convertirse en una actividad especializada.

#### ¿Qué es una CPU?
Las siglas CPU, provienen del inglés y describen a la Central _Processing Unit_, o Unidad Central de Procesamiento. Este dispositivo es uno de los componentes básicos que forman un ordenador personal. 

Son los encargados de realizar los cálculos y controlar los procesos necesarios para su funcionamiento.

Durante la aparición de los primeros ordenadores, estos dispositivos no eran muy potentes. Sin embargo, las mejoras introducidas llevaron a una enorme evolución de los mismos, algo que les ha permitido en la actualidad contar con una gran capacidad de cómputo.

Al comienzo, cuando se empezó a hablar de CPU en la década del 60, estos tenían un gran tamaño. Pero con los años, el desarrollo tecnológico llevó a la miniaturización de los mismos, todo gracias a la tecnología del silicio (de ahí Silicon Valley). 

Esto hizo posible diseñar CPU dentro de un pequeño chip. Lo que permite hoy que los ordenadores posean un procesamiento de mayor robustez, seguridad técnica y eficiencia. 

![[520.E2_ryzen.png]]

##### CPU y criptografía | Una relación tecnológica progresista
En los inicios de la criptografía, los nuevos diseños de CPU jugaron un papel muy importante. 

A medida que los mismos incrementaron su potencia, permitieron la aplicación de modelos matemáticos más complejos. Esto permitió iniciar la expansión y la adopción de la criptografía en distintos ámbitos informáticos. En primer lugar, se aplicó a nivel militar y empresarial, pero con la aparición de Internet en los años 90, se expandió su uso a todo tipo de comunicación pública.

**El objetivo de esto era obvio:** proteger la privacidad de los usuarios en Internet. La información que viajaba por la red no podía viajar en texto plano, de donde cualquiera pudiera tener acceso, algo que iba en contra de los conceptos de seguridad y privacidad. Comenzaron a surgir distintas comunidades virtuales, una de ellas cambiaría radicalmente este panorama: los llamados _cypherpunks_ (SATOSHI Y SU LISTA DE EMAIL).

Estas personas, muchas veces desde el completo anonimato, promovieron la idea de hacer de la criptografía algo esencial en toda actividad en la red. Como resultado, la década del 90 sufrió un explosivo desarrollo en la tecnología criptográfica. El resultado; hoy en día la mayor parte del tráfico en Internet está cifrado. Un paso adelante en medio de la lucha por la privacidad y la seguridad de nuestros datos públicos y privados.

Para dar un ejemplo claro de la relación de las CPU y la criptografía, podemos ver el siguiente ejemplo:
Una CPU de principios de los 90, era incapaz de manejar la actual criptografía AES que vemos en Internet. Sin embargo, las CPU actuales, pueden manejarla perfectamente y ofrecer un alto rendimiento.

Esta diferencia que muchas veces damos por sentado nos permite establecer una relación directa entre:
1. El acceso a tecnología criptográfica de vanguardia sin que ello merme nuestros recursos computacionales.
2. Nuestra seguridad y privacidad
3. El desarrollo de tecnologías aún más seguras y confiables, entre ellas la Blockchain.  

##### CPU y Blockchain, el inicio de una revolución
Así como la evolución de las CPU ayudó al progreso de la tecnología criptográfica, estos también fueron decisivos en el inicio de la tecnología Blockchain.

En un principio, con la aparición de Bitcoin, para hacer los cálculos matemáticos se emplearon CPU, pues incluso con bajo nivel computacional era posible minar la red de Bitcoin cuya dificultad se incrementa cuantos más mineros minan. Al principio, claro, estos eran pocos.

Pero con el aumento de la confianza en el sistema aumentó la competencia y con ello pronto las CPUs quedaron obsoletos para minar eficientemente. Era imposible conseguir con ellos un buen margen de ganancia, pasando a usarse GPUs o incluso aparatos especializados que surgieron más adelante como las ASICs, desarrolladas por una de las principales empresas fabricantes de mineros. Es una muestra de la competitividad en este sector y de la importancia de las iniciativas privadas para avanzar nuestra tecnología.

Fuera de Bitcoin se han desarrollado muchos otros proyectos de Blockchain que también han intentado implantar un modelo de minería de PoW. Un ejemplo de esto sería la red Golem. Esta es una red de cómputo distribuido, que utiliza un token ERC-20 sobre Ethereum. Su función se basa en el uso de poder CPU de quienes forman parte de la red. Esto con el fin de poder procesar los datos que los clientes envían a dicha red. Como consecuencia, los usuarios de la red ganan tokens Golem por el poder de procesamiento prestado. 

> El problema de la sostenibilidad de estos sistemas: ¿Por qué minar?

De cualquier manera, como vemos, pese a que la dificultad de la minería ha dejado atrás el poder de las CPU, existen proyectos que aún intentan aprovechar su potencial. 

#### Minería en CPU | El primer paso
La minería de CPU fue entonces el primer paso para asegurar las redes Blockchain que usan PoW como medio para introducir información a la red. 

La razón de esto se encuentra en que los algoritmos PoW sobre CPU tenían ya algo de tiempo trabajando en el mundo de la informática y Satoshi no busco muy lejos para encontrar inspiración: se fijó en el proyecto HashCash.

El nombre de HashCash hace mención a una tecnología de Prueba de Trabajo (PoW) que se usó para minimizar el correo no deseado (spam) y los ataques de denegación de servicio (conocidos como DoS o DDoS). Esta tecnología ganó amplia popularidad gracias a su implementación en Bitcoin y muchas otras criptomonedas. Su función en las mismas era formar parte del algoritmo de validación de los bloques. Todo ello mediante el proceso de minería de criptomonedas.

Diseñado por Adam Back (actual CEO de Blockstream), Hashcash fue el elegido por Nakamoto para realizar el sistema PoW de Bitcoin, basado en el algoritmo hash SHA-256. Dado que los CPU estaban disponibles por todos lados (en 2009, un computador era fácilmente accesible en buena parte del mundo) y que la idea de Satoshi era maximizar la descentralización de la red, esta decisión fue fácil: usar el sistema empleado por Hashcash para que cualquier persona con un computador se uniera a la red y fuera un minero, descentralizando la red y fortaleciendo su seguridad. 

#### GPU | Descripción
Las GPU son unidades gráficas de procesamiento que cuentan con un poder de cómputo superior a las que poseen las unidades centrales de procesamiento (CPU) convencionales.

 Comúnmente son conocidas como tarjetas gráficas. Estas permiten optimizar y aumentar el poder de cálculo de las computadoras donde son instaladas. Normalmente dirigidas al mundo de los videojuegos, pero fueron muy útiles en la minería de Bitcoin debido a su alto rendimiento y poder de procesamiento. Por lo que constituyeron la segunda generación de equipos de cómputo en el minado de esta criptomoneda.

![[520.E2_gpu.png]]

#### CPU vs GPU para minería

Como con cualquier otra actividad económica, el primer reto al que se enfrentan las personas interesadas en la minería es qué elegir para minar. Una CPU o  una GPU?. Para simplificar la elección podemos observar los siguientes puntos:

##### Criptomoneda a minar
El primer punto para saber si elegir una CPU o GPU para minar es tener presente qué criptomoneda quieres minar y los requisitos para realizar dicha tarea con el objetivo de hacerla rentable.

Una pregunta que muchos novatos realizan es si pueden minar Bitcoin usando su CPU o una GPU casera. Esto es algo que pueden hacer porque es posible, pero que no les reportará ningún ingreso, ya que la minería de Bitcoin tiene tanto poder de cómputo en su red, que poner una CPU o GPU a trabajar ahí difícilmente reportará ninguna ganancia.

Mirémoslo desde esta perspectiva: 
- ¿Cómo puedes mover tú solo un bloque de 100 toneladas, usando tus manos y un palillo como palanca?
- No puedes y, en el caso de que lo logres, puedes considerarlo algo tan extraordinario y único que bien podría decirse que sería imposible de lograr. 
- Lo mismo pasa con la minería CPU o GPU dentro de Bitcoin: Usar CPU o GPU (tus manos y palillo en el ejemplo anterior) para mover un bloque de 100 de toneladas (el objetivo de completar el puzzle criptográfico del bloque para que la red lo considere minado) es tan probabilísticamente tan remoto que podríamos considerarlo imposible de lograr. **NO MINAS TÚ SOLO.**

Por ello, conocer las opciones de monedas que puedes minar y estimar la necesidad de potencia para cada una de ellas es lo primero que debes hacer para convertirte en minero.

**Ejemplo:** Monero (XMR) es un proyecto que desde sus inicios siempre se ha considerado un proyecto muy centrado en la minería CPU, es decir, siempre se concentran en permitir la minería usando CPU. De hecho, es el único gran proyecto cripto que se dedica a este tipo minería, por lo que, si te interesa minar con CPU, este proyecto es uno que puedes estudiar. 

Del resto, Bitcoin, Ethereum u otros, minarlos con CPU es una pérdida de tiempo por una simple razón: una CPU jamás te dará la potencia necesaria para hacer que sea rentable. 

##### Presupuesto, mantenimiento y potencia
En minería de criptomonedas podemos observar una estrecha relación:
- **+ Potencia =** + Posibilidad de minar bloque = + Ganancias = + ROI, teniendo en cuenta siempre los gastos, claro.

Sin embargo, en la relación también hay otros factores:
1. Si quieres una CPU o GPU potente, eso generalmente significa que necesitas realizar una fuerte inversión inicial para comprar dichos equipos (cuanto más nuevos y potentes, generalmente son más caros) y también debes tener en cuenta el consumo energético (al ser más potentes, podrían consumir más energía y ser menos eficientes térmicamente, requiriendo soluciones de refrigeración). 
2. Esos gastos eléctricos e inversión inicial deberás quitarlos de tus ganancias estimadas.
3. Las fluctuaciones de mercado también son importantes, pues el retorno de la minería viene en la moneda que se mine.
4. Finalmente, las instalaciones de minería, climatización, mantenimiento, son gastos que debes tener en cuenta y presupuestar dentro de tu actividad minera.

Un minero debe pensar en esto y en cualquier imprevisto con el fin de tomar una decisión sobre el presupuesto a manejar, qué equipos comprar y estimar su inversión. Adicionalmente, debe conocer las especificaciones técnicas de sus equipos, la potencia que puede hallar con ellos y cómo sacar el máximo provecho de los mismos. Minar es una aventura.

### FPGA y ASIC, aumento de la potencia de cálculo
#### ¿Qué es un FPGA?
Aunque no son dispositivos muy usuales, los FPGA poseen la capacidad de reprogramarse, una característica que los hace únicos en distintas aplicaciones.

**Esta característica los diferencia de su principal competencia, los dispositivos ASIC,** que se fabrican a medida y no pueden reprogramarse una vez han sido diseñados, por lo que solo pueden usarse para tareas muy específicas (si bien esto los hace muy eficientes en ella).

Inicialmente, los FPGA se caracterizaban por ser lentos, consumir grandes cantidades de energía y tener poca capacidad de cómputo paralelo. Sin embargo, esto ha cambiado gracias a las mejoras introducidas a la tecnología del silicio y al desarrollo de sistemas programables. Esto se ha traducido en una mejora sustancial en términos de velocidad y capacidad de trabajo en paralelo. Transformando a los FPGA en candidatos perfectos para aplicaciones de alta demanda de poder de cómputo.

Intel, una de las grandes compañías diseñadoras de chips y procesadores del mundo, es una de las que más ha invertido en el desarrollo de los FPGA. 

Ellos, al igual que Xilinx, que ahora forma parte de AMD, invierten una gran cantidad de recursos en mejorar esta tecnología y ofrecerla para múltiples usos en la industria. 

![[521.E2_fpga.png]]

#### FPGA | Características
Existen distintas razones y características por las que se invierte y desarrolla en sistemas de FPGA, pero entre ellas las más relevantes son:

##### Arquitectura programable
La principal ventaja de que los FPGA sean reprogramables es que permite, por ejemplo, optimizar un FPGA para manejar de mejor manera procesos complejos tras haberse realizado un análisis y optimización de su programación inicial. 

Con ello, la nueva versión del software del FPGA permitiría mejorar el rendimiento o solucionar problemas de seguridad detectados, una situación imposible usando arquitecturas como la ASIC.

Normalmente, la programación de los FPGA se realiza en lenguajes de programación de bajo nivel llamados Verilog o VHDL. 

Ambos sirven para “describir” al FPGA la forma en cómo debe manejar el hardware del mismo. Sin embargo, muchas empresas ofrecen sistemas de programación de más alto nivel que facilitan esta tarea aún más.

Veamos un ejemplo:
1. Un usuario compra un equipo FPGA de minería para Ethereum con una capacidad de 1 TH/s. 
2. Con ello obtiene buenas ganancias. Sin embargo, el desarrollador del equipo ha sacado una nueva actualización de software dirigido a dicho equipo FPGA. La misma garantiza una optimización de 15% en la velocidad de minado, y una disminución de 4% en el consumo eléctrico. 
3. Al aplicar la actualización, su equipo ahora es capaz de minar a 1,15 TH/s y ha reducido sus gastos eléctricos, obteniendo mejores ganancias.

Debido a esta capacidad especial, los FPGA son muy usados para crear tarjetas de desarrollo y demás dispositivos de prueba capaces de adaptarse a las necesidades de empresas y negocios. Por ejemplo, AMD ha adquirido Xilinx con el fin de potenciar el desarrollo de dispositivos FPGA que puedan aplicar a sus CPU y GPU, con el fin de ofrecer elementos programables y eficientes para el campo de la Inteligencia Artificial, Machine Learning y Big Data, que hagan destacar a sus productos.

![[521.E2_arquitectura.png]]

##### Desarrollo acelerado del hardware
Dado que los FPGA son más sencillos a nivel lógico, las compañías son capaces de traer nuevos productos al mercado de forma más rápida. 

Esto tampoco es algo que los ASIC pueden ofrecer, porque su desarrollo requiere de ciclos de fabricación mucho más extensos.

Para las compañías dedicadas a blockchain esto es perfecto. Si una compañía diseña un dispositivo de hardware FPGA para minar una red concreta, desarrollar y mejorar dicho dispositivo, le será más fácil que hacer otro desde cero. 

Con ello, el costo general por diseño y el tiempo de salida al mercado de nuevos dispositivos disminuye. Una situación ventajosa para las compañías blockchain, especialmente en un mundo tecnológico que avanza a pasos agigantados.

##### Mejor nivel de integración en hardware
Los FPGA actuales incluyen procesadores en el chip, sistemas de entrada y salida de datos, etc. 

Más funciones dentro de la FPGA significan menos dispositivos en la placa de circuitos, lo que aumenta la fiabilidad al reducir el número de fallos de los dispositivos. 

Esta es una de las características más llamativas de los FPGA frente a los ASIC. Los ASIC son, en general, una serie de chips que trabajan en paralelo dentro de una complicada tarjeta de circuitos. En dicha tarjeta hay equipos de diferentes fabricantes y con órdenes de calidad distintas. La falla de uno de esos circuitos, significa la falla de todo el ASIC. Pero en los sistemas FPGA esto es distinto. Debido a que el proceso de fabricación es más integrado, la calidad de los circuitos incluidos puede controlarse mucho mejor. Con esto, se puede mejorar sustancialmente la calidad de los dispositivos y su vida útil se alarga.

Pese a todo lo anterior, las ASICs ganan la partida en la minería de Bitcoin y por eso vamos a hablar de estos hardwares.

#### ¿Qué es un ASIC?
Los mineros ASIC son la manera mayoritaria en la que se mina Bitcoin. ASIC son las siglas en inglés de Circuito Integrado para Aplicaciones Específicas. 

En la actualidad, la potencia de computación de la red Bitcoin es tan alta que hace imposible ser minado de otro modo. Los ASIC son equipos informáticos basados en circuitos integrados o chips y desarrollados para hacer funciones muy específicas.

Los ASIC se empezaron a popularizar con Bitcoin, convirtiéndose en el conjunto de procesadores específicos optimizados por excelencia para el minado de los bloques. El primer ASIC para Bitcoin del mundo fue desarrollado por la empresa china Avalon (ahora conocida como Canaan), el 17 de septiembre de 2012. Gracias a su eficiencia, los ASIC han empezado también a ser usados en otros protocolos de minado como Ethereum, Zcash, Litecoin, Sia, entre otros. 

Dichos sistemas tienen características únicas según la moneda a la que van destinados. La mayoría de estos sistemas son compactos y otorgan gran potencia de minado. Los mineros ASIC están construidos específicamente para ofrecer el mejor rendimiento posible para la criptomoneda destinada. Están diseñados únicamente para labores de minería de la criptomoneda en cuestión (EFICIENCIA: EL SAQUE-VOLEA), pero fuera de eso, su potencia sirve de muy poco.

Gracias al minado de Bitcoin mediante ASIC, la red ha mantenido una tasa de crecimiento y poder de minado cada vez mayor. 

![[521.E2_asic.png]]

#### ASIC | Principales críticas
Como cualquier tecnología que se impone, claramente, no está falta de detractores y críticas. Veamos unas pocas y cómo de acertadas son:
1. **Centralización del minado:**  
    Las grandes granjas de minado, sobre todo en China, impiden que pequeños usuarios puedan dedicarse a la minería.
2. **Dificultad de compra:**  
    Suele ser bastante complicado hacerse con uno nuevo o de segunda mano, ya que se venden rápidamente.
3. **Coste:**  
    Son máquinas especializadas y bastante costosas.
4. **Monopolio:**  
    Actualmente, Bitmain controla más del 90% del mercado y esto le permite sacar equipos cuando y al precio que quiere.
5. **Consumo energético:**  
    Este es uno de los aspectos más criticados de la tecnología, pues estos equipos consumen grandes cantidades de energía.
6. **Temporalidad:**  
    Dada la rápida evolución del hardware, los ASIC quedan rápidamente obsoletos.

![[521.E2_hardware.png]]

#### Conclusión
ASICs seguirán siendo importantes. La razón siempre la tiene el mercado y las ganancias atraen competencia.

### Configuración minero GPU,  minado de Ethereum
La minería por GPU es una de las actividades mineras que aún puedes realizar sin tener que tener en tus manos equipos costosos o instalaciones adecuadas para soportar el consumo energético necesario para sostener la minería por largos periodos de tiempo.

Si a eso sumamos, que podemos minar por GPU monedas como Ethereum, Ethereum Classic, Ravencoin, entre otras, es comprensible que la minería GPU se mantenga como la segunda mayor actividad minera del mundo cripto.

En este caso, te enseñaremos todo lo que debes hacer para iniciar y configurar un minero GPU y usar su poder de cómputo para minar en la red Ethereum, todo ello usando una sencilla gráfica NVIDIA (aunque también puede ser AMD), el software de minería NBMiner y el monedero MetaMask. 

#### Configurando todo lo necesario
Lo primero que deberás tener en tu mano es un ordenador con Windows o GNU/Linux y con una gráfica NVIDIA debidamente configurada e instalada con sus drivers (en GNU/Linux deberás instalar los drivers privativos, puesto que los libres no servirán para esto).

En nuestro caso, usaremos la versión en Windows ya que es la más sencilla de configurar, teniendo como hardware el siguiente equipo:
1. CPU Ryzen 7 3700X 4.1 Ghz (UC – UV)
2. 32 GB de RAM DDR4 3600 MHZ
3. Motherboard MSI B550M Mortar
4. 1 TB SSD
5. GPU NVIDIA GTX 1660 OC con driverr 512.15
6. Windows 11 Profesional

En este equipo tenemos todas las actualizaciones al día y adicional hemos instalado nuestro monedero MetaMask, con el cual ya contamos con una dirección ETH para recibir nuestras ganancias por minería. El software minero que usaremos es el NBMiner, un minero diseñado para equipos NVIDIA, destacando que la elección de minero debe ofrecerte el mejor beneficio posible sobre el uso de tu hardware. Es decir, usa software de minería diseñado para la GPU que tengas en tu poder.

Un punto a tener en cuenta aquí son los drivers de tu GPU, procura mantener actualizado los mismos y mira cómo reacciona el rendimiento de minería en cada uno de ellos, existen casos en los que el rendimiento puede ser mejor o peor, así que deberás tener un buen ojo para esos casos. 

##### Descargando NBMiner
Puedes descargar el software de NBMiner de forma segura usando su GitHub usando este [enlace](https://github.com/NebuTech/NBMiner).  Allí, descargaremos la versión más actual del software, con el fin de mantener el mismo actualizado y con las últimas funciones. 

![[522.E2_nbminer.png]]

En este caso, la versión más actual es la 42.2, y descargaremos la versión para Windows (si usas GNU/Linux, descarga la versión para Linux). 

![[522.E2_nbminer_linux.png]]

Realizada la descarga, lo siguiente será descomprimir el archivo y revisar el software que hemos descargado. 

Nota: En este punto, dependiendo del software antivirus que tengas en Windows, puede saltar una alarma de virus. Si has descargado el software desde su fuente oficial y segura, no debes preocuparte por ello, los mineros son generalmente detectados como virus. Solo crea una excepción y continua el proceso. En todo caso recuerda: todo este proceso debes hacerlo desde una cuenta con permisos de usuario normal, uses Windows o GNU/Linux, el riesgo de un virus/ransomware/malware es el mismo, en especial si descargas y ejecutas software de fuentes desconocidas.  

En este punto, podrás ver el contenido del software que es el siguiente:
![[522.E2_nbminer_contenido.png]]

##### Configurando NBMiner
El siguiente paso es configurar NBMiner para aprovechar al máximo nuestra GPU y que lo minado vaya a nuestra cuenta. Esto es bastante sencillo, lo primero que deberás hacer es generar una configuración para el minero, para lo que deberás abrir una CMD (consola) en la carpeta:

![[522.E2_nbminer_config.png]]

Y escribir el comando:
**### .\nbminer.exe --generate-config**

![[522.E2_command.png]]

Con esto se ha creado un archivo de nombre “config.json” que modificaremos con el fin de ajustar a nuestras necesidades:

![[522.B2_json.png]]
  
Lo siguiente será abrir este archivo en Notepad (Block de notas) o con un visor de archivos como Visual Studio Code (con soporte json) o Notepad++. En nuestro caso, lo abriremos con el Notepad que viene en nuestro Windows por defecto.

![[522.E2_miner_parametros.png]]

En este punto, nos interesa cambiar algunos parámetros que son los que nos permitirán aprovechar al máximo nuestro GPU para minar sobre Ethereum y sobre el pool de minería que deseamos. 
```
{
    "algo": "ethash",
    "api": "127.0.0.1:22333",
    "cclock": "",
    "cmd-output": 2,
    "devices": "",
    "enable-dag-cache": false,
    "enable-igpu": false,
    "enable-sni": false,
    "fan": "",
    "gpu-tune": -1,
    "intensity": "100",
    "lhr-mode": "0",
    "lock-cv": "",
    "log": true, 
    "log-cycle": 30,
    "log-file": "",
    "log-no-job": false,
    "long-format": false,
    "mclock": "",
    "memory-tweak": "",
    "no-color": false,
    "no-health": false,
    "no-interrupt": false,
    "password": "",
    "platform": 0,
    "power-limit": "",
    "proxy": "",
    "share-check": 30,
    "strict-ssl": false,
    "temperature-limit": 90,
    "temperature-start": 85,
    "url": "stratum+tcp://eth-us-east1.nanopool.org:9999",
    "user": "0x32E89EC8F8371b57871aA99918bFBBA45b484B6E.JAMAL-ETH-Worker001",
    "verbose": true
}
```

Con eso guardamos los cambios en el archivo, y procedemos a ejecutar el comando:
**### .\nbminer.exe --config config.json**

Y finalmente tendremos a nuestro minero de Ethereum funcionando. 

![[522.E2_ndminer_funcionando.png]]

##### Explicando los cambios
Rápidamente explicamos los cambios realizados. La configuración del archivo config.json nos permite añadir los datos de:
1. Nuestra dirección ETH para recibir los fondos de minería que hemos ganado en el pool. En este caso, la dirección usada es: 0x32E89EC8F8371b57871aA99918bFBBA45b484B6E, y la añadimos al valor “user” porque el pool de minería tomara este valor para enviarnos nuestras recompensas. Adicional, podemos especificar un nombre legible para identificar nuestro minero y nos queda el valor:
user: 0x32E89EC8F8371b57871aA99918bFBBA45b484B6E. JAMAL-ETH-Worker001

2. Añadimos la dirección del minero, en esta ocasión en el valor “url” quedando:
    "url": "stratum+tcp://eth-us-east1.nanopool.org:9999",

Este valor le dice al minero que se conecte al pool Nanopool, y comience a participar en la minería de dicho pool. 

Este valor puedes cambiarlo por el de cualquier otro pool que desees, solo ten en cuenta en colocar la dirección y el puerto para que se conecte sin problemas. 

3. Finalmente, cambiamos el valor del algoritmo que usamos para la minería, en este caso, usando el algoritmo "ethash", porque deseamos minar Ethereum.

Realizado todos estos cambios, basta con ejecutar el comando 
**### .\nbminer.exe --config config.json**

Para empezar la minería y sostenerla de forma indefinida.

### Configurando minero CPU, minado Monero
En caso de que la minería por CPU se presente como una opción más llamativa para ti, tienes la opción de minar Monero (XMR) usando estos dispositivos.

Monero de momento es la única moneda para minar usando CPU que puede definirse como una criptomoneda con un desarrollo activo, una interesante comunidad y una gran aceptación en el mercado.

En tal sentido, aprender a minar Monero es una opción muy útil si lo que deseas es ser parte de esa comunidad minera, a la vez que ganar algo de dinero minando por CPU en los equipos a los que tengas acceso y siendo este proceso uno muy sencillo de realizar.

#### Configurando el entorno de minería
Para minar Monedero debes tener en cuenta lo siguiente:
1. Contar una dirección de Monero en una _wallet non-custodia_l. La forma más sencilla de hacer esto es usando el software oficial de Monero, que no solo te permite crear un monedero de Monero completo, sino también instalar un nodo (completo o pruned) e incluso conectar el nodo para ser solo un relay. En este caso, usaremos el software oficial de Monero que puedes descargar desde este [enlace](https://www.getmonero.org/es/downloads/). 
2. Necesitarás un ordenador con una CPU relativamente actual y potente con el fin de que puedes obtener un buen rendimiento de minería. La regla para reconocer un buen CPU para minería de Monero incluye analizar la CPU en su:
    - **Cantidad de núcleos e hilos.** En este punto, lo mínimo es 4 núcleos, 8 hilos.
    - **Cantidad de cache L1, L2 y L3.** Mientras más cache mejor, ya que Monero y su algoritmo RandomX hacen uso intensivo de este tipo de recursos. Lo ideal es, al menos, 32 MB de cache L3 (unificado), 256 KB de L2 (por núcleo) y 32 KB L1 (por núcleo). 
    - **Revisar que la CPU tenga extensiones AES, AVX y SSE3 y SSE4,** estas funciones ayudan a acelerar el proceso de minería. 
    - **Usar el equipo exclusivamente para minería.** 
    - **Usar CPU de nueva generación,** ya que generalmente el rendimiento de sus instrucciones y arquitectura es superior a los más antiguos, su consumo es menor y ello ayuda a lograr mejores resultados de minería. 
3. Descargar el software de minería, en este caso, usaremos XMRig que es un estándar de minería en Monero. 

**Cumpliendo con el equipo**
En primer lugar, revisemos si cumplimos con las specs necesarias para tener un buen rendimiento de minería en Monero. Nuestro equipo de minería tiene una CPU Ryzen 7 3700 X, con estas specs:

![[523.E2_specs.png]]

Claramente podemos ver que estamos cumpliendo los mínimos descritos, por lo que este CPU puede servirnos para minar Monero. Una forma sencilla de revisar estas specs es usando software como CPU-Z o HwInfo, los cuales puedes descargar gratuitamente para conocer los specs de tu CPU y el resto de tu computador. 

##### Descargando el software de Monero
Ahora descargaremos el software oficial de Monero con el fin de crearnos nuestra dirección de Monero con el fin de poder recibir las recompensas de minería. Este [enlace](https://www.getmonero.org/es/downloads/) te puede servir para descargar el software oficial y solo debes elegir la versión para tu sistema operativo, en nuestro caso usaremos la versión para Windows.

![[523.E2_descarga.png]]

##### Configurando nuestro monedero Monero
Descargado el software y descomprimido el paquete, solo debes iniciar el software de Monero.  

![[523.E2_configurando.png]]

Con eso ya podrás iniciar el proceso de configuración del software. El primer paso es configurar el idioma:

![[523.E2_idioma.png]]

El segundo paso es elegir el modo de instalación entre:
1. **Simple:**  
    Te conecta a nodos de la red para sincronización ligera, permitiéndote usar la red de forma inmediata y sin necesidad de descargar la Blockchain (sincronización completa). 
2. **Boostrap:**  
    Es el modo de sincronización completa convirtiendo tu PC en un nodo de Monero. 
3. **Avanzado:**  
    Permite seleccionar funciones adicionales del nodo (incluyendo pruned node y el modo de minería del nodo).  

En este caso, usaremos la versión Simple, ya que no queremos sincronizar de forma completa (lleva algo de tiempo). En todo caso, recuerda que el nodo completo es el más seguro y confiable de todo porque te hace parte integral de la red y participas en el proceso de consenso de la misma. 

![[523.E2_welcome_monero.png]]

Finalmente creamos nuestro monedero, respaldamos nuestra seed y colocamos la clave para acceder al mismo y mantenerlo seguro.

![[523.E2_billetera_monero.png]]

##### Configurando XMRig para minar
Ahora es el momento de configurar XMRig para empezar a minar usando nuestra CPU. Para ello, debes descargara el software de XMRig desde este [enlace](https://github.com/xmrig/xmrig/releases). 

![[523.E2_xmrig.png]]

En este caso, la versión de XMRig es la v6.17.0 que es la más actual, y descargaremos la versión para Windows (que es el sistema que estamos usando en este ejemplo). Descargado el software y descomprimido podemos ver su contenido y el documento config.json debemos abrirlo usando Notepad (Bloc de notas) de Windows. 

![[523.E2_json.png]]

En este archivo deberás reescribirlo con esta información:
```
{
    "autosave": true,
    "donate-level": 5,
    "cpu": true,
    "opencl": false,
    "cuda": false,
    "pools": [
        {
            "coin": "monero",
            "url": "xmr-eu1.nanopool.org:14433",
            "user": "447u8Ss8egoCr7bs9sxWQf6k6cdyaWooGj5mCzTtE7F4KkeMGFuHb9m6xL1AQYPpJCgqWLFx2wPjQfBRwM4qJXsL6SBaSPr",
            "tls": true
        }
    ]
}
```

Y guardar los cambios. 

![[523.E1_save_changes.png]]

Expliquemos los cambios hechos:
1. **"cpu": true:**  
    Le indica a XMRig que se usará la minería CPU.
2. **"opencl": alse y “cuda”:**  
    False, le indica que no use el modo OpenCL o CUDA (para GPU) porque este modo en RandomX no tiene suficiente rendimiento como para ofrecernos ganancias (es usado por otros algoritmos que soporta XMRig). 
3. **"coin": "monero"**  
    Le indica que estaremos minando Monero.
4.  **"url": "xmr-eu1.nanopool.org:14433"** Es el pool Nanopool de Monero el cual usaremos para este ejemplo. 
5. **"user":**
**"447u8Ss8egoCr7bs9sxWQf6k6cdyaWooGj5mCzTtE7F4KkeMGFuHb9m6xL1AQYPpJCgqWLFx2wPjQfBRwM4qJXsL6SBaSPr"**   
    Es la dirección de Monero que hemos generado con nuestro monedero Monero descargado y configurado al principio. 
6. **"tls": true**  
    Le indica a XMRig que use cifrado en la conexión con el pool para proteger nuestra privacidad. 

Ya con esto, estamos listos para empezar a minar, lo que podemos hacer abriendo una consola y tecleando:
**### .\xmrig.exe -c .\config.json**

Y con ello nuestro minero de Monero comenzará a trabajar. 

![[523.E2_a_trabajar.png]]

## U3. Minería y su papel en la Blockchain
### Minería y Seguridad en Blockchain (Video)
![[524.E2_Minería_y_Seguridad_en_Blockchain.mp4]]
[Mineria y Seguridad en Blockchain](https://app.web3mba.io?wvideo=xamtdydq0j)

Hablemos de por qué es importante la minería. El papel de la minería en las criptomonedas es vital. Vital porque esta actividad es la que permite a la red ofrecer un conjunto de características únicas que, bueno, ahora vamos a pasar a enumerar. Tengamos en cuenta que vamos a hablar ahora de la minería con prueba de trabajo, proof of work, que es la única que permite, como apuntábamos antes, ofrecer una señal honesta al mercado. La minería es el medio por el que se introduce información a la red. Para lograr eso, el minero debe dedicar recursos con el fin de alcanzar este objetivo y, de acuerdo a la cantidad de recursos dedicados, su oportunidad o la oportunidad de dar con la solución correcta se incrementa. Básicamente, la minería es un sistema que premia al que más se compromete con la red, de ahí lo de prueba de trabajo. Esto significa que cualquier participante en la red Bitcoin puede convertirse en minero, siempre que ponga a disposición el poder de procesamiento de su ordenador para tratar de resolver el bloque.

¿A qué nos referimos por resolver el bloque? Como comentábamos antes, con toda la minería, cuando hablábamos de CPUs, GPUs y estos diferentes dispositivos para la minería, todos compiten para tratar de resolver el bloque, para ser la persona que primero consigue dar con el acertijo, digamos que desbloquea la posibilidad de minar dicho bloque y llevarse esa recompensa que mencionábamos. Así que todos compiten para resolver el bloque. Esto abre la descentralización en el proceso de minería y su recompensa, algo que otros sistemas no pueden garantizar. Al final, cuando el minero ha logrado resolver ese puzle impuesto por la red, este es recompensado de dos maneras. Por una parte, obtiene las comisiones de todas las transacciones que se han validado en ese nuevo bloque generado. Comisiones que son pagadas por los usuarios de la red en sus distintas transferencias. Como sabes, al mover Bitcoin, te sientes mejor dentro de la red de Bitcoin; tú pagas y esa comisión es la que recibe luego el minero. Y lo segundo, también obtiene recompensa en la forma de generación de bloques. De acuerdo a la red, esta recompensa puede variar y variará en función de la emisión. En Bitcoin, cada bloque actualmente da una recompensa de 6,25 bitcoins, una recompensa que cambia cada 210.000 bloques, que son unos cuatro años, en el evento que conocemos como Halving y que terminará en el mes de agosto cuando Bitcoin alcance la emisión de unos 21 millones de monedas. Eso significa que quien logra resolver el problema se lleva la recompensa para sí, premiando su éxito y su trabajo para lograr el objetivo de crear ese nuevo bloque y mantener con ello el funcionamiento y la seguridad de la red. Si no hay recompensa, de nuevo, ¿por qué ibas a minar? Es por esto por lo que los mineros deciden, oye, vamos a tratar de meternos en esta actividad. Deciden hacerlo porque saben cuál es el nivel de comisiones medio que se puede recibir por minar esos bloques y cuál es la recompensa en la forma de nuevos bitcoins que se generan. Y con la suma de ambas deciden si la inversión en este tipo de actividad merece la pena.

En comparación, sistemas como Proof of Stake tienden a ser más centralizados porque no solo te exigen un alto nivel económico para participar. Por ejemplo, en el caso de Ethereum 2.0, en el caso de que se produzca la emergencia, se exigiría un depósito de 32 ETH para crear un nodo de validación, lo cual puede ser una pequeña fortuna. Además, el sistema distribuye más riqueza a aquellos que más riqueza tienen, pues claro, el que más capacidad tiene de resolver el bloque se lleva así también la recompensa. De ahí que sea prácticamente imposible descentralizar un sistema basado en Proof of Stake. Otras soluciones directamente centralizan el poder de validación y funcionamiento de la red a niveles en que usar el término blockchain descentralizado puede sonarnos un poquito irrisorio. Por ejemplo, en el caso de Binance Smart Chain, aquí solo existen 10 o 12 validadores en la red. Es un poco el trade-off de tratar de ofrecer más flexibilidad y tipos de operaciones en lugar de ofrecer una sola cosa. Cuando tú solamente ofreces una sola cosa, como es en el caso de Bitcoin, que lo único que te permite es mover Bitcoin de un monedero a otro, puedes crear bloques pequeños y puedes poner en conjunto a una serie de personas a lo largo de todo el globo y para ello necesitas un lapso de tiempo, que en este caso serían diez minutos. Si, por el contrario, prefieres ofrecer más flexibilidad y más tipos de operaciones, puedes ofrecer bloques más grandes, que se procesen más rápido, es decir, más información y más rápida, pero claro, eso es lo que imposibilita o dificulta muchísimo que ese consenso se alcance entre todo el globo y por eso es imposible que la red esté tan descentralizada. Es más fácil si esto se consigue a base de unos pocos validadores centralizados o, digamos, unos pocos que no tienen por qué ser centralizados, pero sí un número menor y que ellos estén de acuerdo sobre el consenso de lo que es el estado de la red en el momento presente.

Y eso es un poco la comparación entre ambos sistemas y la importancia de ambos. Hablemos de otro factor o característica de este tipo de procesos de minería de proof of work. Esta minería lo que permite es la emisión de nuevas monedas o nuevos tokens a la red. El dinero y la riqueza en el mundo no se crean de la nada y los mineros, así como cualquiera con una mínima experiencia trabajando, conocen muy bien que esto es así. Resulta muy sencillo llegar a un sistema informático y colocar unos cuantos ceros y presionar Enter para crear grandes cantidades de dinero o, al menos, de dinero papel. Pero claro, luego ese dinero puede tener más o menos valor. Hay casos de dinero con poco valor, como es el caso de Venezuela, por ejemplo, tristemente, o de otros dineros que tienen más valor, como puede ser el dólar, pero que no obstante también tienen menos valor. Sin embargo, la minería cambia esto radicalmente. Convertirse en minero es costoso, como hablábamos antes, más o menos dependiendo del nivel de tus instalaciones, pero no solo es costoso a nivel de inversión financiera, es costoso porque consume otros recursos, electricidad, por ejemplo, y sobre todo consume tiempo, que es el bien más preciado, escaso y valioso de nuestras vidas. Los mineros viven de acuerdo a esta dura realidad y es que, claro, si un minero decide que puede ser interesante dedicarse a la minería y empezar a generar este tipo de tokens a base de trabajo, puede ser que otras personas tengan la misma idea. ¿Y qué pasa? Que, como apuntábamos, si esa competencia lleva a que finalmente seas irrelevante o al menos no seas suficiente para ser rentable, al final tendrás que cerrar. Y esto es algo que ataca a todas las materias primas. Si, por ejemplo, empieza a subir mucho el precio de la plata, esto incentivará a muchas personas a ponerse a minar plata. Pero claro, todas esas personas entrando a minar plata provocarán que se genere más plata y, con esa mayor cantidad de oferta, finalmente el precio caerá, lo cual vuelve de nuevo ineficientes y no suficientemente rentables a todos esos nuevos mineros que se van a tener que pagar. Este es el mismo proceso. En el cripto invierno de 2018, por ejemplo, cuando el precio de Bitcoin cayó, muchos mineros de Bitcoin tuvieron que apagar sus equipos debido a que la rentabilidad era insuficiente y, nada, tuvieron que irse a casa. Sin embargo, cuando el precio empezó a recuperarse, esos mineros volvieron u otros distintos y empezaron de nuevo a llevar a cabo esta actividad, pues volvía a ser rentable.

Otra característica que nos permite la minería es proteger a la red. Este es un punto importante porque la red ha de ser protegida si queremos que el valor se acumule dentro de dicha red. Un minero es quien tiene la primera responsabilidad de ver qué transacciones son las que entran en un bloque y si estas cumplen con las reglas básicas de operaciones de la red. Por ejemplo, deben cumplir con cosas tan básicas como que la transacción esté bien formateada o que se hayan pagado las comisiones. En esta labor, los mineros y el proceso de minería son el primer punto de protección. Después de todo, los mineros deben ejecutar un nodo completo de la red, a menos que usen un pool, que en este caso sería el pool que ejecuta el nodo completo, y debido a que ejecutan ese nodo completo, son capaces de vigilar que las reglas sean aplicadas a las operaciones para que así sean aceptadas como válidas por el resto de la red. Al final, el nodo, como veremos en un bloque posterior, te permite ver todo el estado de la red. Después de todo, el minero podría aceptar o podría darse el caso de que un minero aceptase una transacción que fuese inválida. Si pretende incluir esto en el bloque, el resto de la red detectará el fallo y de poco le valdrá que haya logrado minar ese bloque de forma correcta, ya que el resto de la red y los mineros detectarán dicho fallo, desharán el bloque y seguirán buscando un bloque nuevo. Todo esto provocará que el minero que ha dedicado inversión a conseguir minar ese bloque, inversión en la forma de energía y equipos, no se vea recompensado por ello. Por esto es importante y por esto los incentivos están ahí para que los mineros solamente validen transacciones que son válidas. Adicionalmente, los mineros agregan un coste de acceso a la red, las comisiones que comentábamos antes. Hacer una operación conlleva un pequeño pago, por lo que atacar a la red con un DDoS, por ejemplo, o un ataque masivo a la red para hacer que esta acción resultaría en un coste prohibitivo para el atacante. De esta manera, la minería convierte a la red en una fortaleza inexpugnable, algo que otros protocolos no pueden decir. Por ejemplo, en una red de Proof of Stake como Ronin, bastó un hackeo a un nodo de validación. Recordemos que esos nodos pueden ser muy pocos en algunos de estos sistemas de Proof of Stake y, de esa manera, consiguieron realizar uno de los mayores robos en la blockchain hasta el momento. Esto en una red de Proof of Work sería imposible porque, incluso hackeando un pool de minería grande, hacerlo actuar de forma maliciosa podría ser detectado y detenido sin mayores inconvenientes.

Pues bien, tal como se puede ver, la minería tiene un gran papel en las criptomonedas donde se usa. No caigas en la trampa y las superficialidades típicas del uso de energía que comentábamos antes o la contaminación posible, y menos en lo de que otros sistemas son igual o más seguros. El tiempo y el mercado han dado la razón a Proof of Work como el sistema más seguro del mundo, pues que incluso en eventos de peligro, como el típico ataque del 51%, fue la minería la que abrió caminos y opciones para mantener la seguridad de la red frente a actores maliciosos que buscaban sacar provecho de un momento de debilidad. De nuevo, el mercado siempre acaba teniendo razón.

Hablemos ahora del papel de la minería en las economías de las criptomonedas, lo que se llaman tokenomics y que hemos apuntado un poquito antes cuando hablábamos de cómo facilitan la emisión de monedas. Un papel importante en la minería es este aspecto de su relación con las denominadas tokenomics de las criptomonedas, estas como la relación entre la emisión, distribución y circulación de monedas dentro de la red. Pongamos por ejemplo a Bitcoin. En Bitcoin, el trabajo agregado de todos los mineros consigue generar un bloque nuevo de media cada 10 minutos. Si, por ejemplo, no son 10 minutos sino que durante un período de tiempo son 20 minutos, ¿qué ha pasado? Si hay menos mineros minando, por ejemplo, cuando salieron de China, hubo muchos menos mineros minando durante un período de tiempo. Bueno, si esto ocurre, los bloques se minarán cada vez con mayor tiempo, lo cual manda una señal al sistema y el sistema está montado de tal manera que la dificultad cambiará si, tras ese período de dos semanas, los bloques se han creado de media con mayor tiempo que 10 minutos. En este caso, lo que ocurriría es que la dificultad bajaría, permitiendo así que los bloques salgan más rápidamente y acercarnos de nuevo a esa media de 10 minutos. Si, tras otras dos semanas, la media sigue siendo elevada, volverá a cambiar la dificultad, es decir, se hará más sencillo minar para de nuevo conseguir llegar a esos bloques cada 10 minutos. Y al contrario, si hay muchos mineros y los bloques están saliendo más rápido, si los bloques están saliendo cada cinco minutos, entonces cada semana, bueno, cada dos semanas, se irá incrementando la dificultad para, de nuevo, el sistema llevarnos a esa media de 10 minutos por bloque. Esto, claro, en el caso de Bitcoin.

Y como veíamos antes, al ganar ese bloque, el minero se lleva las comisiones. Estas comisiones son las que se pagan por las transacciones validadas en ese bloque y, al mismo tiempo, también se lleva las nuevas monedas creadas, generadas, como os recuerdo, como recompensa directa de ese nuevo bloque. Así es como se minan bitcoins. En un bloque cualquiera podemos ver que el minero que ha logrado minar dicho bloque ha recibido, por ejemplo, por poner una cifra, un total de 6,302 bitcoins, que sería una recompensa normal en estos días. De esos 6,3, pongamos 6,25, son fijas y vienen de la recompensa del bloque que en el protocolo Bitcoin ha fijado para el periodo de minería actual y que cambia, como decíamos, cada 210.000 bloques. El resto, esas 0,05 bitcoins, son la suma de las comisiones de las transacciones, que en un bloque pueden rondar alrededor de las 2.000 transacciones. Este sencillo evento muchas veces pasa desapercibido para los usuarios de Bitcoin, pero es tan importante para mantener el funcionamiento de Bitcoin que sin él no habría cadena de bloques. El minero, en este caso, ha logrado obtener esta recompensa, pero de acuerdo a las reglas tokenomics de Bitcoin, no podrá usar dicho dinero, dicha recompensa, hasta que no se completen 100 confirmaciones, lo que equivale a 100 nuevos bloques. Este es un mecanismo de seguridad para evitar que los mineros manipulen el reloj de generación de bloques y el nivel de dificultad de los mismos. Este hecho significa que esos 6,3 bitcoins del ejemplo no podrán ser gastados ni utilizados por el resto de la red hasta que se cumplan dichas condiciones. Y esto que ha pasado con este bloque que hemos visto, por ejemplo, ha ocurrido durante toda la vida de Bitcoin. De hecho, esos primeros bitcoins que minó Satoshi y Hal Finney también pasaron por este proceso.

En este punto, podemos ver cómo la minería interviene dentro de la generación y distribución de monedas en el protocolo Bitcoin y en todos los demás. Por ejemplo, Ethereum tiene mecanismos de emisión y distribución de monedas muy parecidos, también ajustados a su específica realidad económica. Otro punto donde la minería tiene una estrecha relación con las tokenomics de las criptomonedas es la naturaleza final de emisión de dicha criptomoneda. ¿Será inflacionaria o será infinita? ¿Será deflacionaria? ¿Será finita? ¿Qué tiempos debe tardar esa emisión? Esas preguntas se responden muy fácilmente viendo los parámetros de minería de una criptomoneda. En Bitcoin, por ejemplo, la emisión es inflacionaria inicialmente y pasa a ser deflacionaria alrededor de 2140 o antes si hay pérdidas, porque la gente, ya sabes, a veces pierde sus bitcoins. Entonces, claro, si tenemos un calendario inflacionario durante un tiempo y luego pasa a ser cada vez menos inflacionario y durante ese periodo de tiempo, que son unos 100 años, se empiezan a perder bitcoins, pues bueno, realmente la emisión está siendo deflacionaria. Y si esto es así, es decir, si nos encontramos con un activo donde existe una cantidad finita o incluso decreciente, y esa demanda sobre ese activo se mantiene, entonces, claramente, nos encontramos con un sistema económico en el cual el precio tendrá que subir. Claramente, esto depende de los dos factores; no solamente depende de la escasez. Muchas veces se escucha que, bueno, como es escaso, entonces la gente lo querrá. Bueno, hay muchas cosas escasas que nadie quiere, así que no, necesitamos que la demanda se mantenga para que sí, si en ese caso la oferta es como la de Bitcoin, que es muy, o sea, poco inflacionaria por ahora y cada vez menos hasta que deje de serlo, y una demanda que se mantiene, pues sí, entonces sí podemos encontrar un activo en el cual su precio tiende a aumentar. Confirmando esta teoría, de hecho, podemos ver cómo Bitcoin ha pasado de ser un activo sin valor alguno a los 600.000 o 700.000 millones de dólares de capitalización actual.

Un par de preguntas que se hacen a veces son: ¿por qué ese calendario va hasta 2140? ¿Y por qué se empezó dando tanta recompensa, que al principio eran 50 bitcoins por bloque, y esa recompensa se va cortando por la mitad cada cuatro años? ¿Por qué esos números? ¿O por qué 21 millones? Bueno, tengamos en cuenta que dos de esas tres preguntas son irrelevantes. Habría dado igual. Podría ser 2140 como podría ser 2727. Esa parte es irrelevante y también es irrelevante la parte de los 21 millones. Podrían haber sido 21 millones como podrían haber sido dos. No importa. Al final, cualquier cantidad de dinero es suficiente para cualquier economía. No importa lo grande que sea, siempre y cuando sea suficientemente divisible ese dinero. Entonces nos servirá. Lo que sí que es importante es detenerse un momento porque esa recompensa era muy grande al principio y luego fue cayendo. Y esto es porque, claro, al principio tú quieres recompensar de nuevo a esos mineros para que dediquen trabajo a minar. Y al principio, claro, ese sistema, esa recompensa, digamos, en la forma de Bitcoin, tenía un valor escaso, cero prácticamente. Entonces, al principio se renta, se recompensa con muchas bitcoins porque, bueno, si no vale casi, por lo menos que recuperen algo. Y rápidamente se va cortando dicha emisión para así, digamos, tener en cuenta que, bueno, si el valor se va incrementando, pues entonces no hará falta dar tantos tokens. Entonces, esa emisión empezó muy fuerte y va reduciéndose cada cuatro años hasta llegar a tres bitcoins y poco en 2024, y luego será en una y media en 2028, y a partir de 2040 prácticamente será irrelevante, al menos en cuanto al precio actual, pero cuando llegue a 2040, ya se verá.

### Minería y Seguridad en Blockchain
![[525.E2_Minería_y_Seguridad_en_Blockchain.mp4]]
[Mineria y Seguridad en Blockchain](https://app.web3mba.io?wvideo=i3tbmp5m55)

Hablemos de la minería y el consenso, específicamente del papel de la minería en el consenso de la red de blockchain. Recordemos que la minería es el proceso mediante el cual se añaden nuevos bitcoins a la oferta monetaria. Este proceso sirve para asegurar el sistema Bitcoin contra transacciones fraudulentas o aquellas que gastan la misma cantidad de bitcoin más de una vez, lo que se conoce como doble gasto. Aunque, como veremos posteriormente, los nodos son incluso más importantes en este contexto. Es el proceso por el cual los mineros proporcionan potencia de procesamiento a la red Bitcoin a cambio de la oportunidad de recibir una recompensa en bitcoin. A mayor capacidad, más difícil es el ataque a dicha red. Finalmente, también permite comenzar la validación de las nuevas transacciones, es decir, inicia el registro de esas operaciones en la blockchain. Es curioso todo lo que se logra con este pequeño proceso. Todo esto es fundamental para alcanzar el consenso, y en todo ello, la minería juega un papel de primer orden.

En Bitcoin, como comentábamos, cada 10 minutos se mina un nuevo bloque que contiene las transacciones ocurridas desde el último bloque, añadiendo así esas transacciones a la cadena de bloques. Las transacciones que pasan a formar parte de un bloque y se añaden a la cadena de bloques se consideran confirmadas, lo que permite a los nuevos propietarios de dichos bitcoins gastarlas, pues si las recibieron, digamos que ya son suyas. En este punto, el minero emite su nuevo bloque a la red, pasando de nodo a nodo la información, y la cadena de bloques se convierte en un bloque de 10 minutos. Estos nodos verifican las operaciones; al notar que todo está en orden, incluyen ese nuevo bloque en su copia de la blockchain. Como resultado de la cadena de aceptaciones, la red alcanza un consenso general y se dice que el nuevo bloque forma parte integral de la blockchain, reconfirmándose de forma infinita con cada nuevo bloque que se agrega al historial.

Con lo anterior, podemos afirmar que la minería de criptomonedas cumple un doble objetivo. Por una parte, actúa como un mecanismo de seguridad que evita el mal uso de la red y de sus recursos, y por otra parte, sirve como mecanismo para iniciar un consenso distribuido sobre la historia y las operaciones de la red. Ambas funciones se mantienen e incentivan con la entrega de recompensas que están inscritas en las reglas del protocolo. Como resultado, la minería es capaz de mantener un sistema de dinero electrónico peer-to-peer, de persona a persona, que no depende de una autoridad central para validar transacciones, emitir dinero y movilizar ese dinero entre las dos partes.

Por supuesto, un mecanismo de seguridad y consenso en blockchain es un trabajo de nunca acabar. Los mineros que ejecutan nodos completos en la red se mantienen a la escucha tanto de transacciones para agregarlas a los nuevos bloques que se van a crear como de nuevos bloques resueltos. Las primeras llegan todo el tiempo y son almacenadas en el mempool. El mempool es la lista o registro donde están las transacciones por verificar, que luego serán seleccionadas y agregadas al bloque que se crea, el cual se emite al resto de la red para que todos conozcan que se ha resuelto el bloque y se han confirmado nuevas transacciones.

Pero, ¿qué pasa si un minero pierde? ¿Qué ocurre con todos esos mineros que no ganan el bloque? ¿Qué hace un minero cuando escucha en la red que el bloque ha sido resuelto por otro? Pues hace lo que debe hacer: verificar con su nodo que la información cumple con los requisitos de la red y, si todo es correcto, le dará su visto bueno, lo incluirá en su copia de la blockchain y continuará buscando el siguiente bloque. La competencia continúa y nunca termina. Incluso cuando el último bitcoin sea emitido en la red, el mecanismo de minería seguirá haciendo su trabajo porque su papel sigue siendo primordial para el funcionamiento y consenso de las partes que forman la red.

En este punto, podemos comentar varios debates que han surgido alrededor de la pregunta: ¿qué pasará cuando se deje de incentivar a los mineros con nuevos bitcoins? Como hemos comentado, el calendario de emisión de bitcoin llega hasta 2140, pero no más allá. Entonces, cuando llegue a ese punto, ¿cómo se recompensará a los mineros? Porque ya no habrá bloques, es decir, ya no habrá bitcoins que entregar; lo que habrá simplemente serán comisiones. ¿Qué pasa si esas comisiones no son suficientes? Hay muchos debates en este punto, debido a que las comisiones en la red base de bitcoins son bajas, pero estamos en 2022, faltan 120 años para que este problema se vuelva una realidad. Y creo que os invitaría a observar algunos de estos debates, porque son interesantes y es un tema que vale la pena seguir.

Podemos ver todo esto, lo que estoy comentando, de forma sencilla en el siguiente ejemplo. Imagina que la red de Bitcoin está resolviendo el bloque número 739.315. Todos los mineros de la red se centran en resolver el bloque y nuestro amigo Daniel está en esa lucha con sus mineros ASIC trabajando para él. Resulta que, pese a pasar 12 minutos tratando de resolver el bloque, finalmente es Luis quien se lleva el mérito al minar el bloque de manera correcta. Entonces, como decíamos, Luis emite el bloque completo a la red, donde los nodos y el resto de mineros, incluyendo a Daniel, recibirán la confirmación, la verificarán y la incluirán en su copia de la blockchain, porque todo está en orden. Al terminar, comenzará la carrera por resolver el siguiente acertijo que llevará a vencer el siguiente bloque. Un ciclo sin fin, un proceso que se repite una y otra vez, tantas como la red se mantenga activa.

Y es importante que esto sea así, porque, claro, ¿qué pasa si de repente se cae internet? ¿Qué pasa si un meteorito impacta y la red se queda en el bloque 800.324? Si eso ocurre, habrá una copia de esa cadena en algún nodo y sería tan sencillo como conectarse a ese nodo, recuperar esa información y seguir emitiendo bloques sobre esa base, de modo que de esta manera podemos reengancharnos a una información perdida. Es lo mismo que haces tú con tu nodo en casa, si lo tienes, cuando te vas de vacaciones y durante unas dos semanas no actualizas el nodo. Bueno, cuando llegas, tienes que actualizar, tienes que ponerte al día de todos los bloques que se han generado mientras tú no estabas ahí mirando.

Claro, la seguridad y el consenso exigen seguir reglas muy claras y, en la mayoría de las criptomonedas, estas reglas se ajustan a la realidad de sus redes. Esto es, debes ser capaz de probar criptográficamente que el dinero que movilizas es realmente tuyo, y esa verificación es responsabilidad del minero y del resto de la red. Al final, todos están incentivados a comprobar que las transacciones son correctas, pues si hay una transacción que es incorrecta o si hay un doble gasto, todo eso perjudicaría a la red y al valor que todos ellos tienen en ella. De modo que todos están incentivados a seguir estas reglas, reglas que pesan sobre los mineros. Su papel en la seguridad y en el consenso se puede reducir a este sencillo conjunto de reglas que vamos a comentar ahora.

Una parte de los mineros y los nodos debe velar porque la estructura de datos del bloque sea sintácticamente válida, es decir, deben estar formateados y ser legibles dentro de los parámetros del protocolo. El hash del bloque también debe tener un valor menor que la dificultad objetiva de la red; esto indica que se ha realizado de forma correcta la minería o el proceso de minería. También hay que atender a la marca de tiempo, al timestamp del bloque, que deberá ser inferior a dos horas en el futuro. Este mecanismo es una medida de seguridad para evitar ataques temporales en la minería. También deben confirmar que el tamaño del bloque está dentro de los límites aceptables. Y la primera transacción, y solo la primera, es una transacción dentro de ese bloque que genera la Coinbase. Esa Coinbase es la generación de nuevos bitcoins. Que, por cierto, esta es una transacción que puedes opcionalmente no incluir. Es decir, tú puedes rechazar ese regalo de la blockchain y, si ocurre, habrá 6 bitcoins menos ahora en el total de los 21 millones. Finalmente, deben comprobar que todas las transacciones dentro del bloque sean válidas y que cumplan con los requisitos de Script Signature. Y todo esto ocurre cuando se crea un nuevo bloque. No obstante, ten en cuenta que hay un software que lo hace por ti.

Dediquemos un momento ahora a hablar de las alternativas a la minería por proof of work. Al final, todo esto que hemos estado comentando es proof of work, prueba de trabajo. Ahora hablemos de otros sistemas y por qué se han desarrollado. Al final, esto es un mercado libre y, en el momento en que Bitcoin puso de moda, digamos, el sistema de proof of work, más que de moda, digamos que consiguió que este sistema funcionase, pues es un sistema que ya se inventó hace décadas. Sin embargo, no se había conseguido implementar con éxito hasta Bitcoin. En el momento en que esto ocurre, otros sistemas salen a la palestra tratando de ofrecer algo diferente, si bien su objetivo es el mismo, como veremos.

El primero de ellos, y probablemente el más reconocible y conocido por todos, es el de Proof of Stake. La prueba de participación o Proof of Stake es uno de los dos protocolos de consenso más utilizados en la tecnología blockchain. Su nombre en inglés es Proof-of-Stake, como digo, y de ahí derivan las siglas POS con las que se les conoce comúnmente. El objetivo de este algoritmo, al igual que en Proof-of-Work, es crear consenso entre todas las partes que integran la red. A los nodos que minan en Proof-of-Stake se les llama validadores; la decisión sobre qué nodo ha de validar un bloque se hace de forma aleatoria, pero dando mayor probabilidad a quienes cumplan una serie de criterios. Entre estos criterios podemos mencionar la cantidad de moneda reservada o estaqueada y el tiempo de participación en la red, aunque pueden definirse otros.

Una vez establecidos, se inicia el proceso de selección de nodos de forma aleatoria. Una vez terminado este proceso de selección, los nodos elegidos podrán validar transacciones o crear nuevos bloques. Esto revela que Proof of Stake es un proceso completamente distinto al ya explicado protocolo de prueba de trabajo comentado antes. La primera moneda en usar este protocolo fue Peercoin en el año 2012, y luego aparecieron otros como NXT, BitShares y muchos más.

¿Por qué se creó este protocolo diferente? El protocolo de Proof-of-Stake fue creado por el desarrollador Sunny King en el año 2011 y su objetivo era solucionar algunos problemas que él consideraba que afectaban al sistema de Proof-of-Work. Entre ellos, él destacaba los siguientes: falta de escalabilidad y velocidad. El proceso de minería agrega un alto nivel de latencia para poder aprobar transacciones y producir nuevos bloques. Comentaba que si esos bloques en Bitcoin tardan 10 minutos, esto realmente complica mucho el hacer pagos rápidos. Si a mí me envían algo y tengo que esperar 10 minutos para comprobar si ese dinero me ha llegado, pues esto dificulta un poco los pagos rápidos. Y en este sentido, la crítica es acertada. El problema es que si quieres crear un sistema monetario global descentralizado que, como comentábamos antes, requiere de esos 10 minutos para que se alcance un consenso distribuido por la red. No obstante, la crítica es correcta y luego veremos cómo se tratan de solucionar estos problemas en la red de Proof-of-Work.

Proof-of-Stake soluciona este problema. En las blockchains que usan el protocolo de Proof-of-Stake, las verificaciones son realizadas por nodos con una alta cantidad del token que sea y se producen de manera rápida porque son menos los validadores que tienen que llegar a un consenso sobre el estado de la red. Por otra parte, también comentaba este desarrollador el alto consumo energético del proceso de minería por Proof of Work. Como comentábamos antes, Proof of Work requiere trabajo y es un poder de generación que proviene de máquinas con un alto consumo de electricidad. Proof of Stake cambia el proceso de minería por un proceso de participación, una participación reflejada en la tenencia de moneda o tiempo dentro de la red. Algo parecido a los accionistas dentro de una empresa: el que más acciones tiene, más poder tiene dentro de dicha empresa.

Por otra parte, también decía que el Proof-of-Stake restaría interés financiero a este tipo de ataques. ¿Qué son estos ataques? Estos ataques del 51% fueron uno de los temores que inicialmente más se comentaban sobre las redes de Proof-of-Work. La idea es que con un 51% del poder de cómputo podrías atacar la red. En un sistema Proof of Stake también sería posible con la tenencia del 51% de las monedas, pero a pesar de que es un tema que se ha comentado mucho, no es un peligro que se haya materializado jamás en la realidad debido al coste económico de llevar a cabo dicho ataque. Satoshi ya comentaba que es más rentable ser un participante honesto, porque incluso alguien malicioso tendría difícil llevar a cabo este ataque debido a que siempre se podría forkear la red y evitar dicho ataque.

Bien, ahora que hemos comentado un poco por qué surge este otro sistema y qué problemas tiende o pretende solucionar, ¿cómo funciona la prueba de participación? Este sistema busca incentivar a los participantes para que posean en todo momento una determinada cantidad de monedas. La posesión de monedas les permite ser elegidos por el proceso de selección aleatoria que se realiza para designar tareas de verificación. Bajo este esquema, aquellos que tengan más reservas tienen mayor peso en la red y mayores oportunidades de ser elegidos. Una vez elegidos, podrán validar transacciones y recibir ganancias, incentivos y recompensas por ese trabajo realizado. La mayor tenencia no garantiza, no obstante, la selección. Si esto fuese así, digamos que se desincentivaría el proceso, así que siempre queda algo de azar dentro de este tipo de sistemas.

Pasemos ahora al sistema de Delegated Proof of Stake o prueba de participación delegada. Este es un sistema similar al anterior, pero de alguna manera distinto. Es un protocolo de consenso diseñado para blockchains que pretenden ser altamente escalables. Y ahora veremos por qué. La implementación de este protocolo implica que todos los participantes de la red eligen por votación una serie de delegados. Nótese que por esto es necesario que exista confianza parcial en ellos, en estos delegados. Los delegados definen una rotación de líderes. Esto significa que cada uno tiene un turno dentro de la rotación para producir el bloque. Gracias a esta acción, dicho delegado puede generar un bloque y cobrar una recompensa por ello. El poder de voto de cada participante de la red es proporcional a su participación en la misma, parecido al proof of stake. Esta característica es parte de su relación con este protocolo que comentábamos.

Para favorecer la descentralización, es habitual que las redes basadas en Delegated Proof of Stake sometan a votación decisiones relacionadas con su funcionamiento. Temas como las recompensas, la cantidad de delegados, el comportamiento ante bifurcaciones de la red y otros. Además, permiten penalizar a los delegados si no se comportan de acuerdo a lo esperado. Dicho esto, el Delegated Proof of Stake se usa, como decía, para tratar de ser incluso más escalable, incluso más rápido. Hablamos de un número aún menor de personas validando, lo cual permite un consenso incluso más rápido, pero de nuevo, claro, a costa de centralización.

Pasemos ahora a otro sistema, el Proof of Authority, la prueba de autoridad. Esta está diseñada para ser una solución especialmente dirigida a blockchains privadas. El término Proof of Authority fue propuesto por Gavin Wood, cofundador y ex CTO de Ethereum. Este protocolo de consenso tiene una marcada diferencia frente a otros como los comentados Proof-of-Work y Proof-of-Stake. Ello se debe a que Proof-of-Authority se aprovecha de las identidades reales para permitir la validación dentro de una blockchain. Esto significa que los validadores ponen su identidad real y reputación como garantía de transparencia. Este proceso incluye una selección arbitraria de dichos validadores confiables, una situación totalmente diferente a la minería de Proof-of-Work, pero con similitudes al esquema de participación o participación delegada comentado antes. Además, Proof-of-Authority se basa en un número limitado de validadores; esta característica le otorga una clara ventaja y es de nuevo la alta escalabilidad lo que tiene un impacto positivo en aplicaciones donde la velocidad es primordial. Además, mantiene un alto nivel de control de acceso a dicha blockchain, pues solo los nodos con permiso pueden participar.

Bien, ahora que hemos cubierto Proof of Work y otras alternativas como Proof of Stake y similares, hablemos un poco de la conclusión sobre este tipo de minería. La tecnología blockchain necesita de la minería y utiliza esta minería para permitir crear un sistema sin necesidad de confianza. Proof of Work alinea perfectamente los incentivos de los mineros y los usuarios de la red. Las alternativas, como hemos comentado, buscan ofrecer características diferentes, normalmente la escalabilidad y la rapidez. Pero claro, eso no es todo; contradice o dificulta la posibilidad o la capacidad de funcionar sin esa confianza. Y es que nos obliga a usar confianza o a confiar en participantes que se dedican al consenso y a hacer consensual la red y a validar dichos bloques. Así que estos son los diferentes sistemas de minería y los diferentes factores que les afectan.

### Importancia de la minería
El papel de la minería en las criptomonedas es vital porque esta actividad es la que permite a la red ofrecer un conjunto de características únicas que pasamos a enumerar.

Tengamos en cuenta que vamos a hablar ahora de la minería con prueba de trabajo (PoW), que es la única que permite, como apuntábamos antes, ofrecer una señal honesta al mercado.

#### Mecanismo de distribución justa
La minería es el medio por el que se introduce información a la red. 

Para lograr eso, el minero debe dedicar recursos con el fin de lograr ese objetivo, y de acuerdo a la cantidad de recursos dedicados, su oportunidad de dar con la solución correcta se incrementa. Básicamente, la minería es un sistema que premia al que más se compromete con la red, de ahí lo de prueba de trabajo.

Esto significa que cualquier participante en la red Bitcoin puede convertirse en minero, en tanto que ponga a disposición el poder de procesamiento de su computadora para tratar de VENCER EL BLOQUE. Eso abre la descentralización en el proceso de minería y su recompensa, algo que otros sistemas no pueden garantizar. 

Al final, cuando el minero ha logrado resolver el puzzle impuesto por la red, este es recompensado de dos formas:
1. Obtiene las comisiones de todas las transacciones que ha validado en el nuevo bloque que ha generado, comisiones que son pagadas por los usuarios de la red en sus distintas transferencias AL MOVER BTC PAGAS. 
2. Obtiene la recompensa de generación del bloque que, de acuerdo a la red, puede variar ajustándose a su emisión. En Bitcoin, cada bloque actualmente da una recompensa de 6.25 BTC, una recompensa que cambia cada 210 mil bloques en el evento de halving y que terminará cuando Bitcoin alcance la emisión de unos 21 millones de monedas.

Eso significa que quien logra resolver el problema se lleva la recompensa para sí, premiando su éxito y su trabajo para lograr el objetivo de crear un nuevo bloque y mantener con ello el funcionamiento y seguridad de la red. SI NO HAY RECOMPENSA, PARA QUÉ VAS A MINAR

En comparación, sistemas como Proof of Stake, tienden a ser más centralizados, porque no solo te exigen un nivel económico mucho mayor para participar (ej: ETH2.0 exige un depósito de 32 ETH para crear un nodo de validación, una pequeña fortuna), sino que al tiempo el sistema distribuye más riqueza en aquellos que más riqueza tienen. De ahí que sea prácticamente imposible descentralizar un sistema basado en PoS. Otras soluciones, directamente centralizan el poder de validación y funcionamiento de la red a niveles en que usar el término “Blockchain Descentralizada” es irrisorio (ej: BNB Chain, que solo tiene 10-12 validadores de red). ES EL TRADEOFF DE TRATAR DE OFRECER MÁS FLEXIBILIDAD Y TIPOS DE OPERACIONES (PONER DE ACUERDO A UNA RED GLOBAL SOBRE EL ESTADO DE UN REGISTRO)

#### Mantiene la emisión de las monedas en la red
El dinero y la riqueza en el mundo no se crea de la nada y los mineros (y cualquiera con una mínima experiencia trabajando) conocen muy bien eso.

Resulta muy sencillo llegar a un sistema informático colocar unos cuantos “0s” y presionar “Enter” y crear grandes cantidades de dinero: dinero sin valor. 

Sin embargo, la minería cambia esto radicalmente. Convertirte en minero es costoso, más o menos dependiendo del nivel de tus instalaciones. Pero, no solo es costoso a nivel de inversión financiera, es costoso porque consume otros recursos (electricidad, por ejemplo) y sobre todo consume tiempo (el bien más preciado, escaso y valioso de nuestras vidas).  

**Los mineros viven de acuerdo a esta dura realidad, en genral las materias primas van así.** En el criptoinvierno de 2018, cuando el precio de BTC cayó, muchos mineros de BTC tuvieron que apagar sus equipos debido a que la rentabilidad era insuficiente para mantenerse. Sin embargo, cuando el precio se empezó a recuperar, esos mineros volvieron y a medida que se apuntaló el precio, el auge de los mineros siguió creciendo sobrepasando niveles históricos semana tras semana. 

#### Protege a la red
Un minero es quien tiene la primera responsabilidad de ver qué transacciones son las que entran en un bloque y si estas cumplen con las reglas básicas de operaciones de la red. 

Cosas tan básicas como:
1. La transacción está bien formateada. 
2. Se han pagado las comisiones. 

En esta labor, los mineros y el proceso de minería son el primer punto de protección.

 Después de todo, los mineros deben ejecutar un nodo completo de la red (a menos que usen un pool, ya que en este caso el pool es quien ejecuta el nodo completo) y debido a que ejecutan un nodo completo, son capaces de vigilar que las reglas se han aplicado a las operaciones para que sean aceptadas como válidas por el resto de la red. Después de todo, el minero puede que acepte (por error o malicia) una transacción errónea o maliciosa (como un double spend), pero si el resto de la red detecta el fallo, poco le valdrá que haya logrado minar el bloque de forma correcta, ya que el resto de la red y mineros detectarán el fallo, rechazarán el bloque y seguirán buscando un bloque correcto para continuar con la historia correcta de la red. Si esto ocurre, toda la inversión dedicada a minar el bloque habrá sido en balde.

> Los mineros agregan un coste de acceso a la red: Las comisiones.  
> Hacer una operación conlleva un pequeño pago, por lo que atacar a la red con un DDoS masivo para hacer que caiga resultaría en un coste prohibitivo para el atacante. 

Básicamente, la minería convierte a la red en una fortaleza inexpugnable, algo que otros protocolos no pueden decir. Por ejemplo, en una red PoS como Ronin, bastó un hackeo a un nodo de validación para realizar uno de los mayores robos Blockchain del ecosistema, eso en una red PoW basada en minería sería imposible, porque incluso hackeando un pool de minería grande, hacerlo actuar de forma maliciosa igual podría ser detectado y detenido sin mayores inconvenientes.

Tal como se puede ver, la minería tiene un gran papel en las criptomonedas donde se usa. No caigas en la trampa y superficialidades sobre “su uso masivo de energía”, “su altísima contaminación” y menos en lo de “otros sistemas son igual o más seguros”, el tiempo le ha dado la razón a PoW como el sistema más seguro del mundo, porque incluso en eventos de peligro (como el ataque de 51% en Ethereum Classic), fue la minería la que abrió caminos y opciones para mantener la seguridad de la red, frente a actores maliciosos que buscaban sacar provecho de un momento de debilidad. De nuevo, el mercado siempre acaba teniendo razón.

### Minería y Tokenomics
#### Minería y su papel en las economías de las criptomonedas
Un papel importante en la minería es su relación con las denominadas Tokenomics de las criptomonedas, éstas como la relación entre la emisión, distribución y circulación de monedas dentro de la red.

**Pongamos por ejemplo a Bitcoin**
En Bitcoin, el trabajo agregado de todos los mineros consigue generar un bloque nuevo de media cada 10 minutos. SI MÁS O MENOS, CAMBIA DIFICULTAD. Y como veíamos, al ganar el bloque se lleva.

1. Las comisiones de las transacciones que han sido validadas en ese bloque.
2. Las nuevas monedas que son generadas como recompensa directa de ese nuevo bloque.

![[527.E2_bloque.png]]

En un bloque cualquiera podemos ver que el minero que ha logrado minar este bloque ha recibido, por ejemplo, un total de 6.302 BCT de recompensas. De eso, 6.25 BTC son fijos y vienen de la recompensa de bloque que el protocolo Bitcoin ha fijado para el periodo de minería actual y que cambia cada 210.000 bloques. El resto (0,052 BTC) son las comisiones de las transacciones que están en dicho bloque (1466 transacciones). 

Este sencillo evento muchas veces pasa desapercibido para los usuarios de Bitcoin, pero es tan importante para mantener el funcionamiento de Bitcoin que si él no habría cadena de boques. El minero en este caso ha logrado obtener esta recompensa, pero de acuerdo a las reglas tokenomics de Bitcoin, no podrás usar dicho dinero (los 6,302 BTC) hasta que no se completen 100 confirmaciones. Este es un mecanismo de seguridad para evitar que los mineros manipulen el reloj de generación de bloques y el nivel de dificultad de los mismos. 

Este hecho, significa que esos 6,302 BTC no podrán ser gastados y utilizados por el resto de la red hasta que no se cumplan esas condiciones, y lo mismo ha pasado con el resto de BTC que han minado en la red. Incluso los primeros BTC que Nakamoto y Finney minaron en los primeros días de vida de Bitcoin, pasaron por la misma realidad. 

 En este punto, podemos ver como la minería interviene dentro de la generación y distribución de monedas en el protocolo Bitcoin, y lo mismo pasa en el resto de criptomonedas. Por ejemplo, Ethereum tiene mecanismos de emisión y distribución de monedas muy parecidos, ajustados a su realidad económica. 

Otro punto, donde la minería tiene una estrecha relación con las tokenomics de las criptomonedas es la naturaleza final de emisión de una criptomoneda. ¿Será inflacionaria e infinita? ¿Será deflacionaria y finita? ¿Qué tiempo debe tardar esa emisión? Esas preguntas se responden muy fácilmente viendo los parámetros de minería de una criptomoneda.

En Bitcoin, por ejemplo,
- La emisión es inflacionaria inicialmente y pasa a deflacionaria alrededor de 2014 O ANTES SI PÉRDIDAS. 
- Durante todo ese tiempo, Bitcoin por su naturaleza finita se hará cada vez más más escaso, y si OFERTA DISMINUYE Y DEMANDA AUMENTA. 
- Confirmando esta teoría, podemos ver como Bitcoin ha pasado de ser un activo sin valor alguno a los 600-700mil millones actualmente.
- POR QUÉ 2140 Y TANTA REDUCCIÓN EN RECOMPENSA? POR QUÉ 21 MILLONES?

### Minería y Consenso
El papel de la minería en el consenso de una red Blockchain es también vital. 

Recordemos que la minería es:
1. El proceso mediante el cual se añaden nuevos bitcoins a la oferta monetaria
2. Sirve para asegurar el sistema bitcoin contra las transacciones fraudulentas o las transacciones que gastan la misma cantidad de bitcoin más de una vez, lo que se conoce como doble gasto. AUNQUE LOS NODOS SERÍAN MÁS IMP AQUÍ
3. Es el proceso por el cual los mineros proporcionan potencia de procesamiento a la red bitcoin a cambio de la oportunidad de recibir una recompensa en bitcoin, a más capacidad, más difícil el ataque
4. Finalmente, permite comenzar la validación de las nuevas transacciones einicia el registro inicial de esas operaciones en la Blockchain. 

Curioso ¿No? Todo esto es fundamental para alcanzar consenso y en todo ello la minería juega un papel de primer orden. En Bitcoin, cada 10 minutos se mina un nuevo bloque, que contiene las transacciones ocurridas desde el último bloque, añadiendo así esas transacciones a la cadena de bloques. Las transacciones que pasan a formar parte de un bloque y se añaden a la cadena de bloques se consideran confirmadas, lo que permite a los nuevos propietarios de bitcoins gastar los bitcoins que recibieron en esas transacciones.

En este punto, el minero emite su nuevo bloque a la red, pasando de nodo a nodo, los cuales verifican las operaciones y al notar todo en orden, estos incluyen el nuevo bloque en su copia de la Blockchain. Como resultado de la cadena de aceptaciones, la red alcanza un consenso general, y se dice que el nuevo bloque forma parte integral de la Blockchain, reconfirmandose de forma infinita con cada nuevo bloque que se agrega al historial. 

#### Un mecanismo de seguridad y consenso
Con lo anterior podemos afirmar que la minería de criptomoneda cumple un doble objetivo:
1. Ser un mecanismo de seguridad evitando que se haga mal uso de la red y sus recursos. 
2. Servir de mecanismo para iniciar un consenso distribuido sobre la historia y las operaciones de la red.

Y ambas funciones se mantiene e incentivan con la entrega de recompensa que están inscritas en las reglas del protocolo, como resultado, la minería es capaz de mantener un sistema de dinero electrónico P2P, que no depende de una autoridad central para validar transacciones, emitir dinero y movilizar ese dinero entre las distintas partes. 

Por supuesto, un mecanismo de seguridad y consenso en Blockchain es un trabajo de nunca acabar. Los mineros que ejecutan nodos completos en la red, se mantienen a la escucha tanto de transacciones (para agregarlas a los nuevos bloques se van a crear) como de nuevos bloques resueltos. Las primeras llegan todo el tiempo y son almacenadas en el MEMPOOL, donde luego serán seleccionadas y agregadas al bloque que se crea, que luego se emite al resto de la red para que todos conozcan que hemos resuelto el bloque y confirmado nuevas transacciones.

Pero ¿Qué pasa si perdemos? ¿Qué hace un minero cuando escucha en la red que el bloque ha sido resuelto por otro? Pues, hace lo que debe hacer, verificar que el nodo cumpla con los requisitos de la red y el protocolo y, si todo es correcto, le dará su visto bueno, lo incluirá en su copia de la Blockchain, y continuará buscando un nuevo bloque, la competencia continúa y nunca termina. Incluso, cuando el último BTC sea emitido en la red, el mecanismo de minería seguirá haciendo su trabajo, porque su papel sigue siendo primordial para el funcionamiento y consenso de las partes que forman la red. EN ESE PUNTO IMPORTANCIA COMISIONES. DEBATES VARIOS. 

Podemos ver todo esto de una forma más sencilla en el siguiente ejemplo:
1. Imagina que la red BTC está resolviendo el bloque #739315. 
2. Todos los mineros de la red se centran en resolver el bloque y nuestro amigo Daniel está en esa lucha con sus mineros ASICs trabajando por él. 
3. Resulta que pese a pasar 12 minutos tratando de resolver el bloque, es finalmente Luis quien se lleva el premio al minar el bloque de forma correcta. 
4. Luis emite el bloque completo a la red donde los nodos y el resto de mineros (incluyendo a Daniel) reciben la información, la verifican y la incluyen a su copia de la Blockchain porque todo está en orden.
5. Al terminar, comienza la carrera por resolver el #739316.
6. En un ciclo sin fin, el proceso se repite una y otra vez, tantas veces como la red se mantenga activa. También permite REENGANCHARSE O RECUPERAR UNA CAÍDA.

Claro la seguridad y el consenso exige seguir reglas muy claras, y en la mayoría de criptomonedas, esas reglas se ajustan a la realidad de sus redes. Esto es, debes ser capaz de probar criptográficamente que el dinero que movilizas es realmente tuyo, y esa verificación es responsabilidad del minero y del resto de la red, los nodos TODOS INCENTIVADOS EN COMPROBAR.

Las reglas que pesan sobre los mineros, su papel en la seguridad y el consenso se pueden reducir en este sencillo set de reglas: 

1. Los mineros y los nodos deben velar porque la estructura de datos del bloque sea sintácticamente válida, es decir, deben estar formateados y ser legibles dentro de los parámetros del protocolo. 
2. El _hash_ del bloque debe tener un valor menor que la dificultad objetivo de la red, esto indica que se ha realizado de forma correcta la minería. 
3. La marca de tiempo (_timestamp_) del bloque deberá ser inferior a dos horas en el futuro. Este mecanismo es una medida de seguridad para evitar ataques temporales en la minería (Warp Time Attack). 
4. Confirmar que el tamaño del bloque está dentro de los límites aceptables. 
5. La primera transacción (y sólo la primera) es una transacción de generación de coinbase, con la que el minero reclama su recompensa y las comisiones de las transacciones. Que, por cierto, es opcional para el que lo mina.
6. Todas las transacciones dentro del bloque deben ser válidas y cumplir con los requisitos de scriptSig.

### Alternativas a la minería PoW:  Proof of Stake
La Prueba de Participación, es uno de los dos protocolos de consenso más utilizados en la tecnología Blockchain.

Conocido como PoS, el objetivo de este algoritmo, al igual que PoW, es crear consenso entre todas las partes que integran la red.

- A los nodos que minan en PoS se les llama validadores. 
- La decisión sobre qué nodo ha de validar un bloque se hace de forma aleatoria, pero dando mayor probabilidad a quienes cumplan una serie de criterios. 
- Entre estos criterios podemos mencionar la cantidad de moneda reservada (stakeada) y el tiempo de participación en la red, pero pueden definirse otros. 
- Una vez establecidos, se inicia el proceso de selección de nodos de forma aleatoria. 
- Una vez terminado el proceso de selección, los nodos elegidos podrán validar transacciones o crear nuevos bloques.

Esto revela que Proof of Stake es un proceso completamente distinto al ya explicado protocolo de Prueba de Trabajo (PoW). La primera moneda en usar este protocolo fue PeerCoin en el año 2012. Luego aparecieron otros proyectos como NXT y Bitshares que también usan dicho protocolo.

#### ¿Por qué se creó la Prueba de Participación?
El protocolo de Proof of Stake fue creado por el desarrollador Sunny King, en el año 2011. Su objetivo era el de solucionar algunos problemas que consideraba afectaban al PoW. Entre ellos se destacan los siguientes:
1. **Falta de escalabilidad y velocidad.** El proceso de minería agrega un alto nivel de latencia para poder aprobar transacciones y producir nuevos bloques (NECESARIO PARA ALCANZAR EL CONSENSO DISTRIBUIDO). Sin embargo, PoS evita esta situación. En las Blockchain que usan el protocolo PoS, las verificaciones son realizadas por nodos con una alta cantidad del token que sea.De esta forma las verificaciones se hacen rápidamente.
2. **El alto consumo energético del proceso de minería.** El proceso de minería en PoW requiere de alto poder de cómputo. Un poder que generalmente proviene de máquinas con un alto consumo de electricidad. PoS ambia el proceso de minería por un proceso de participación. Una participación reflejada en la tenencia de monedas o tiempo dentro de la red
3. **Restar interés financiero a los ataques de 51%.** Los ataques de 51%, fueron uno de los temores que inicialmente más se comentaban sobre las redes PoW. La idea es que con 51% del poder de cómputo podrías atacar la red. En un sistema PoS también sería posible con la tenencia del 51% de las monedas. A pesar de que es un tema que se ha comentado mucho, no es un peligro que se haya hecho realidad debido al coste económico de atacar. Satoshi ya comentaba que es más rentable ser un participante honesto. Incluso alguien malicioso lo tendría difícil debido a la posibilidad de hacer un fork.

#### ¿Cómo funciona la Prueba de Participación?
Este sistema busca incentivar a los participantes para que posean en todo momento, una determinada cantidad de monedas.

La posesión de monedas, les permite ser elegidos por el proceso de selección aleatoria que se realiza para designar tareas de verificación. Bajo este esquema, aquellos que tengan más reservas, tienen mayor peso en la red y mayores oportunidades de ser elegidos. Una vez elegidos pueden validar transacciones y crear nuevos bloques dentro de la red. Permitiéndoles recibir ganancias e incentivos por el trabajo realizado.

La mayor tenencia, no garantiza la selección como nodo, pero brinda mayores oportunidades. Con esto se busca que todos los que están dentro de la red se beneficien sin sufrir detrimentos. 

##### Ejemplo de protocolo PoS
Una forma más sencilla de explicar este proceso sería el siguiente ejemplo:
Imagine que usted forma parte de una red de 100 inversores. De esa red, un primer grupo de 50 inversores poseen 1,000 monedas cada uno. Otro grupo de 30 inversores, poseen 2,500 monedas cada uno. Y un último grupo de 20 inversores, poseen 10,000 monedas cada uno. En la siguiente tabla, puede ver los datos de cada uno de los grupos mencionados y su peso de participación en la red.

![[529.E2_pos.png]]

De este modo, se ve claramente que el Grupo C, es quien tiene mayor participación en la red. Un total de 61,54 % y 200.000 monedas para ser exactos. Ahora bien, es hora de realizar el proceso de selección aleatoria en la red. Esto significa que quienes estén en el Grupo C, tienen mayor probabilidad de ser seleccionados. Pero no solo ellos son seleccionados. También participan miembros de los Grupos A y B. Esto se hace con el fin de democratizar y descentralizar la red.

Adicionalmente, cualquiera de los inversores en los Grupos A y B, pueden invertir más para incrementar su nivel de participación. Una vez seleccionados, los inversores tienen la capacidad de realizar las tareas que se les permite. Los inversores realizan dichas tareas con el fin de recibir incentivos y ganancias proporcionales a su participación dentro del sistema. Terminada la ronda, se reinicia el proceso de selección para que otros inversores puedan participar.

Además de esto, los fondos usados como tenencia no se pueden usar y deben ser bloqueados dentro de la Blockchain. De esta forma se garantiza que los fondos siempre estarán disponibles como garantía del nodo validador. Sin embargo, el nodo puede agregar nuevos fondos en cualquier momento, con el fin de aumentar aún más su nivel de participación.

#### DPoS
Delegated Proof of Stake o Prueba de Participación Delegada, es un protocolo de consenso diseñado para Blockchain altamente escalables.

La implementación de este protocolo implica que todos los participantes de la red eligen por votación una serie de “delegados”. Nótese que por esto es necesario que exista confianza parcial en ellos.

Los delegados definen una rotación de líderes. Esto significa que cada delegado, tiene un turno dentro de la rotación para producir un bloque. Gracias a esta acción, dicho delegado puede generar un bloque y cobrar una recompensa por ello. 

El poder de voto de cada participante de la red es proporcional a su participación en la misma. Esta característica, es parte de su relación con el protocolo de consenso de Prueba de Participación. Para favorecer la descentralización, es habitual que las redes basadas en DPoS sometan a votación decisiones relacionadas con su funcionamiento. Temas como las recompensas, la cantidad de delegados, el comportamiento ante bifurcaciones de la red y otras. Además de que permiten penalizar a los delegados si no se comportan de acuerdo a lo esperado.

##### ¿Cómo funciona DPoS?
El funcionamiento de DPoS puede dividirse en un proceso de tres partes que son:

###### 1 | Votación de delegados
Este es el punto de partida del protocolo DPoS. Para su funcionamiento, se hace uso de un sistema de votación en tiempo real. Gracias a esto, se crea grupo de partes limitadas y de confianza, llamados “delegados”. El proceso de votación hace uso de algoritmos de reputación. Además, se toma en cuenta la cantidad de tokens que tienen los delegados. Mientras más tokens tengan, mayor cantidad de votos pueden recibir. Esto se traduce en mayores oportunidades de formar parte de los delegados.

###### 2 | Creación de bloques
La segunda etapa de DPoS tiene que ver con la generación de los bloques. En este punto, los delegados tienen el poder de crear bloques para agregarlos a la Blockchain. En este punto el funcionamiento es sencillo. Durante el ciclo de generación, cada delegado tiene la capacidad de generar un bloque.

Una vez generado, la capacidad de generación pasa a otro delegado, y así hasta completar el ciclo. Durante la generación, se pueden validar o denegar transacciones. Por cada bloque generado y transacción validada, los delegados reciben un incentivo económico.

###### 3 | Comportamiento de los delegados publicado en Blockchain
Esta sería la última etapa de funcionamiento del protocolo DPoS. Esta permite a la comunidad revisar constantemente la actividad de los delegados elegidos. Si a la comunidad no le gusta lo que ve, puede expulsar a un delegado. Con este método, se busca controlar el funcionamiento de la red y evitar abusos.

##### Ventajas y desventajas del DPoS
###### Ventajas
1. El sistema de votación de “delegados” es rápido. Puede establecer rápidamente a los productores de bloques en cada ronda. El resultado directo de esto, es una mejora notable en la escalabilidad de la Blockchain.
2. Descentraliza la participación en la red. Esto gracias a que DPoS relaciona la participación en la red con la cantidad de tokens que tiene cada usuario. Lo que alienta la participación de los usuarios.
3. La paralelización alcanzada por DPoS habilita altos rendimientos y escalabilidad. Por ejemplo, en la Blockchain EOS, en cada turno (de 0,5 segundos) se generan 126 bloques. Esto nos da una idea de la alta capacidad de transacciones que estas Blockchain pueden alcanzar.
4. Permite maximizar las ganancias de los poseedores de tokens. Esto debido que a medida que tienen más tokens, más participación tienen en la red y más bloques pueden crear.
5. El costo por mantener la seguridad en la red disminuye. Esto gracias a que no es necesario tener equipos de alta potencia para el funcionamiento correcto de la red.
6. Optimiza el uso de recursos de la red como el ancho de banda, CPU, entre otros.

###### Desventajas
1. El éxito de la red requiere la participación y coordinación de la comunidad genuinamente interesada para una gobernanza efectiva.
2. DPoS expone a la Blockchain a fallas relacionadas con el sistema de votación. Por ejemplo, los usuarios de DPoS con pequeñas apuestas pueden decidir que su voto no importa en comparación con los votos de las partes interesadas más grandes.
3. Algunos detractores del modelo DPoS argumentan que este protocolo promueve la centralización. Esto bajo el supuesto que el sistema de votación, siempre buscará elegir a quienes tienen más tokens. Sin embargo, las Blockchain que hacen uso del mismo, crean mecanismos para evitar esta situación. En este punto, esta debilidad está más relacionado con la aplicación de reglas justas para elegir a los delegados.

#### Proof of Authority | PoA 
La Prueba de Autoridad, está diseñada para ser una solución especialmente dirigida a Blockchain privadas. 

El término de PoA fue propuesto por Gavin Wood, cofundador y ex-CTO de Ethereum. Este protocolo de consenso tiene una marcada diferencia a otros como PoW y PoS. Ello es debido a que PoA se aprovecha de las identidades reales para permitir la validación dentro de una Blockchain. 

Esto significa, que los validadores ponen su identidad real y reputación como garantía de transparencia. Este proceso incluye una selección arbitraria de dichos validadores confiables. Una situación totalmente distinta a la minería de PoW, pero con similitudes al esquema de participación PoS.

Además, PoA se basa en un número limitado de validadores. Esta característica le otorga una clara ventaja, la alta escalabilidad de la Blockchain. Lo que tiene un impacto positivo en aplicaciones donde la velocidad es primordial. Además, mantiene un alto nivel de control de acceso a dicha Blockchain, pues solo los nodos con permiso pueden participar.

##### ¿Cómo funciona el protocolo PoA?
Para que el sistema funcione se deben elegir de forma aleatoria los validadores. 

La inclusión y selección de nodos se hace gracias, a un sistema de votación de otros nodos ya previamente autorizados. De esta forma, se evita que nodos maliciosos puedan ser incluidos y afectar el funcionamiento de la red. Sumado a esto, cada validador puede firmar como máximo uno de una serie de bloques consecutivos durante su turno de validación. Adicionalmente, PoA no requiere de un esquema de minería como ocurre en Bitcoin, por lo que resulta muy eco-friendly.

Al igual que en PoS, donde se usa la participación como medida de selección y confianza dentro de la red, PoA hace uso de la identidad y la reputación. La identidad de una persona o institución es escasa, y la reputación de la misma es muy valiosa. Su uso dentro del protocolo significa, que el validador debe revelar quien es de forma voluntaria. Al hacerse pública esta información, es fácil establecer responsabilidades en el funcionamiento de la Blockchain. Cualquier acto que atente contra la fiabilidad y transparencia de la red, recae directamente sobre esa persona o institución. Algo que puede socavar o destruir su reputación en todas partes.

De esta forma, los validadores de una Blockchain haciendo uso del protocolo PoA cuidarán de su reputación e identidad. Y es por esa razón, que velarán por el buen funcionamiento, la transparencia y confiabilidad de la operación de la misma. En este sentido, la identidad puesta en juego puede servir como un gran ecualizador, entendida y valorada por todos los actores. Las personas o instituciones cuya identidad está en juego, se sentirán incentivadas para preservar la red.

##### Condiciones de funcionamiento de PoA
Las condiciones de funcionamiento de PoA, son los pasos necesarios para el cumplimiento del protocolo. Entre ellos, podemos destacar los siguientes:
1. Es necesario validar las identidades de los posibles validadores. Esto significa que quienes quieran participar en la red, debe verificar y hacer públicas sus identidades reales.
2. El candidato a validador debe estar dispuesto a invertir dinero y poner su reputación como garantía. Este proceso, garantiza que los candidatos tengan motivaciones de participación a largo plazo dentro de la red.
3. Se debe tener un sistema estándar para la aprobación de un validador. Con esto, se busca que el método de selección sea el apropiado para seleccionar por igual a los candidatos a validadores.
4. El sistema debe ser capaz de eliminar a posibles actores maliciosos. Si un validador dentro de la red actúa de forma nefasta, la red debe eliminarlo. Todo ello con el fin de mantener la confianza y la transparencia del resto de partes de la red.

#### Conclusión
Blockchain tecnología usada para permitir crear un sistema sin necesidad de confianza.
PoW alinea perfectamente los incentivos de los mineros y los usuarios de la red.
Alternativas que buscan ofrecer más características a costa de la capacidad para funcionar sin confianza.

## U4. Minería y Sostenibilidad
### Minería y Sostenibilidad (Video)
![[530.E2_Minería_y_Sostenibilidad.mp4]]
[Mineria y Sostenibilidad](https://app.web3mba.io?wvideo=8l0qu2vv7l)

Uno de los grandes argumentos utilizados contra Bitcoin es que consume demasiada energía. Se le compara con los países que sobrepasan en gasto energético o con cuántos hogares podrían haber sido alimentados por la electricidad utilizada. Estos son algunos de los detrimentos con los que se enfrenta de manera constante. Este tipo de argumentos son superficiales y banales, e infravaloran los beneficios y la información que surgen cuando se profundiza en el mundo del minado de Bitcoin y su uso de la energía.

El primer argumento a rebatir sería el de desechar la industria, que sostiene que el gasto de energía es malo y que siempre debería minimizarse. Este argumento respalda la idea de que existe una jerarquía en la cual hay casos en los que se justifica el uso de la energía y otros en los que no. Solo en Estados Unidos, el año pasado se usaron más de 6.000 millones de kilovatios hora para el uso en luces de festivales. Este número queda ensombrecido si lo comparamos con otros usos de energía, como pueden ser los aires acondicionados, las secadoras o incluso los coches eléctricos, donde el gasto se ve como algo verde y positivo. Por lo tanto, llegamos a la conclusión de que, independientemente de si es por decoración, entretenimiento, comodidad o para asegurar la red monetaria más resiliente del mundo, no debería haber ninguna jerarquía arbitraria en cuanto al gasto de energía.

Desde el inicio de la civilización, los humanos hemos ido haciendo uso de mayores cantidades de energía. Desde hace miles de años, esta es una variable que se utiliza para ver cuándo una civilización avanza. Esto se puede observar desde que pasamos de recolectar y usar la energía de los animales para arar los campos, a recolectar la energía del sol para alimentar el consumo de nuestros hogares. Gracias a este mayor uso de la energía, la calidad de vida ha mejorado enormemente, desde los coches, los aviones, la calefacción, la refrigeración, los ordenadores y muchos más. La demanda de energía siempre seguirá creciendo mientras avance la sociedad, por lo cual, en vez de mirarlo desde el lado de la demanda, hay que observarlo desde el lado de la oferta energética.

Lo primero que hay que hacer es desechar la noción de que la energía es algo increíblemente escaso. Relativo a nosotros, hay una cantidad infinita de energía proveniente de fuentes distintas, como pueden ser la solar, la hidroeléctrica, la eólica, la nuclear, plantas térmicas de carbón, gas y muchas más. Para ponerlo en perspectiva, la demanda energética global podría ser suplida por paneles solares que ocupasen solo un 1,2% de la superficie total del Sáhara. El problema con esto no es solo cómo recolectar energía, sino cómo almacenarla. Existen muchas fuentes de energía en el mundo que serían perfectas para utilizar. El único problema es que no son viables desde la perspectiva económica, debido al gasto que conlleva construir la infraestructura, recolectar la energía y transportarla.

Una de las razones por las que no existen proyectos de energías renovables a gran escala es la naturaleza de la oferta y la demanda de energía que resulta de ellos, ya que a día de hoy carecemos de la capacidad de almacenar la energía para su posterior uso. Esta debe ser suministrada en el momento en que se crea. Esto supone un problema para muchas fuentes renovables de energía, ya que tienden a producir energía independientemente de si hay o no demanda para ello. Por ejemplo, una central hidroeléctrica producirá electricidad de manera constante a través del flujo de agua por sus turbinas. Esta creación constante de energía choca con la demanda no constante de la misma. Esto significa que nuestras fuentes de energía siempre tienen que tener suficiente potencia para abastecer el pico de demanda, pero cuando disminuye la demanda, existe un exceso potencial de energía que no se usa ni se capitaliza, por lo cual se pierde, ya que no contamos con la habilidad para almacenarla.

Para cualquiera que tenga intención de crear un proyecto de energía renovable de gran calibre, esta pérdida de energía que existe entre el momento de menor demanda y su oferta crea una gran razón para no continuar con un proyecto de este tipo, ya que deja de tener rentabilidad más allá de las horas de mayor demanda, incrementando el riesgo de que fracase el proyecto. Esto se soluciona imaginando que no existe un vacío entre la oferta y la demanda de energía. Independientemente de cuánta energía se produzca, siempre habría un comprador y un caso de uso para esa misma energía. Este escenario es posible si los grandes proyectos de energía renovable utilizaran Bitcoin para monetizar el exceso de energía creado. El ingreso adicional que esto traería a estos proyectos incentivaría la creación de este tipo de infraestructuras que ayudarían a la transición hacia un mundo con mayor cantidad de energía proveniente de fuentes renovables, además de estabilizar las redes eléctricas con una demanda constante de energía.

Esto está ocurriendo a día de hoy con proyectos alrededor del mundo. Hay ejemplos en lugares tan variados como Paraguay, que cuenta con una sobreoferta de energía proveniente de fuentes hidroeléctricas. Esta energía, a día de hoy, en gran parte se desperdicia y en otra parte se utiliza para exportar a los países vecinos, como Brasil. Lo que haría Bitcoin con la infraestructura eléctrica sobredimensionada de Paraguay es ayudar a rentabilizarla y capitalizar esa energía que se está desperdiciando. De hecho, a día de hoy, hay muchos mineros que están migrando a Paraguay debido a su bajo coste energético y a la fuente renovable de la que proviene su energía.

En Islandia hay un caso de uso, ya que en zonas remotas, sin ninguna o muy poca demanda natural, hay plantas geotérmicas que tienen que ser rentabilizadas. Lo que proporciona Bitcoin es una demanda constante de energía, independientemente de la localización de la fuente misma. Otro caso de uso sería en un país centroamericano, que es El Salvador. Ahora mismo hay un proyecto para crear la Bitcoin City, y este proyecto tiene como objetivo electrificar la ciudad con la energía geotérmica de los volcanes, a la vez que utilizar los remanentes para minar Bitcoin. Otro caso de uso, más allá de este, sería el que está ocurriendo en Ucrania, donde se utilizan los remanentes energéticos de una central nuclear para minar Bitcoin y amortizar así dicha infraestructura.

Para concluir, el minado de Bitcoin puede utilizar mucha energía, pero hay que mirarlo todo con perspectiva y entender que el uso de energía no tiene por qué ser algo malo, ya que si Bitcoin contribuye a ser un catalizador económico para ayudar al mundo a transitar hacia fuentes de energía más sostenibles y a estabilizar la red eléctrica de manera global, entonces deberíamos hacer uso de los mismos incentivos para seguir evolucionando, en vez de centrarnos en consumir menos. Aparte de poder hacer modelos de negocio respecto al minado puro, existen otros servicios complementarios al minado.

El Cloud Mining, en primer lugar, se trata de tener una granja o un gran poder de minado y alquilar ese poder de minado a terceros a través de Internet. El siguiente caso sería el Hosting. Esto se da cuando tienes un caso de uso en tu país que es más favorable económicamente. Si hay una granja que deja de ser rentable en un país europeo y yo vivo en un país con un coste energético mucho menor, esa granja se puede trasladar a mi país y hacer uso de la red eléctrica de mi país. El tercer caso de uso distinto al minado puro serían los pre-bills de RIGS de minería, que se trata de construir RIGS a base de GPUs y revenderlas por Internet o por el método propio.

Lo primero que hay que tener en cuenta es la moneda a minar. En este caso, vamos a estar minando Bitcoin. Después de eso, tenemos la comisión de transacción más la recompensa específica por bloque, lo cual ya hemos visto que disminuye un 50% cada cuatro años en lo que llamamos halving. Lo siguiente a tener en cuenta sería el precio. Cuanto mayor sea el precio, con la misma dificultad, mayores serán los beneficios. Cuanto menor sea el precio, menores serán los beneficios de minado. Lo siguiente a considerar sería la dificultad. Al final, minar es un subproducto del proceso de verificación de transacciones de la red Bitcoin. El objetivo del minado es mantener la blockchain de una manera descentralizada. Satoshi Nakamoto elaboró las reglas para la minería de manera que cuanto más poder de minado tenga la red, más difícil será adivinar la respuesta al problema matemático del minado. La dificultad del proceso de minería se autoajusta al poder de minado acumulado con el que cuenta la red. Si se unen más mineros, será más difícil resolver el problema. Mientras que si muchos mineros abandonan la red, se volverá más fácil. Esto lo hizo Satoshi Nakamoto para asegurar un flujo constante de nuevos bitcoins al sistema, para de este modo mantener la inflación bajo control. La dificultad se autoajusta para que de media se agregue un bloque cada 10 minutos. Estos 10 minutos son una media. También podemos tener dos bloques en dos minutos, como no tener ningún bloque nuevo en una hora. Pero a largo plazo, la media será de 10 minutos por bloque.

Este mecanismo de ajuste automático crea una carrera para crear mineros cada vez más potentes y más eficientes. Y luego, otra cosa a tener en cuenta, que no es un coste sino una oportunidad, sería si hacer solo mining o unirse a un pool de minería. Cuando empiezas a minar, si vas tú solo, te enfrentas a grandes granjas mineras con un poder computacional brutal comparado con el que tú puedes empezar, por lo cual el único modo de hacerle frente es unirte a un pool de minería en el cual se unen muchos mineros y juntan su poder computacional para intentar pelear contra esos grandes farming pools que tienen un poder computacional infinitamente mayor al que tendrías tú solo. Esto lo que hace es juntar el poder de minado de todos los usuarios del pool y dividir la recompensa de minar un bloque entre todos los usuarios del pool proporcionalmente a cuánto poder computacional estés aportando tú al pool.

Ahora veremos qué impacta en el coste de una operación de minado. Los costes principales serían el coste del hardware, el cual hay que tener en cuenta que acaba caducando y que hay que amortizar lo antes posible, por lo cual hay que tenerlo minando las máximas horas posible al día. Estas horas de minado siempre tienen que estar conectadas a Internet con la menor latencia posible, ya que si resuelves a la misma vez que otro minero en otra parte del mundo la ecuación, sin embargo, tú tienes una latencia menor, tu respuesta llegará antes a la red. Otro coste a tener en cuenta es el coste eléctrico, que sería el minado en sí más la refrigeración de los mineros. Otros costes a considerar son el alquiler, salarios, seguros, transporte o montaje.

Para hacer un cálculo aproximado de la rentabilidad teórica, podemos acceder a páginas como What to Mine, en la cual puedes indicar qué tipo de ASICs tienes, tu coste energético y te calcula automáticamente la rentabilidad diaria. A día de hoy podemos distinguir dos tipos de operaciones. Una operación casera, la cual se puede hacer, como bien dice el nombre, desde casa, y que a día de hoy, por comodidad, solamente se podría hacer con un rig de GPUs, de tarjetas gráficas, para lo cual haría falta el hardware, que serían las tarjetas gráficas, junto al resto de componentes del minero, que serían una unidad de potencia y una CPU, junto con RAM. Luego, el software de minado. La refrigeración extra que le pone tu minero. Hay que tener en cuenta que generan bastante ruido y mucho calor. Luego, unirse a un pool y tener conexión a Internet constante siempre que estén los mineros minando. Hay que tener en cuenta que tener un RIG en casa no resulta lo más agradable del mundo, ya que generan montones de calor y ruido, aparte de consumir un montón de electricidad. Viendo la competitividad que hay en el mundo en cuanto a precios eléctricos, en España no suele resultar rentable minar.

El otro tipo de operación de minado que vamos a ver hoy sería la operación industrial, la cual siempre se realiza con ASICs, que son el estándar de minado a día de hoy. Las ASICs vienen divididas en varios tipos, que pueden ser según su potencia o por su tipo de refrigeración. Lo más importante aquí sería el tipo de refrigeración. Puede ser por aire, por circuito de agua o por inmersión en aceite mineral. Luego vamos a pasar a ver qué tipos de organización y de estructura pueden tener estas ASICs. La primera y la más simple sería estanterías. Se colocan estanterías y se tiene una monitorización de ellas. Tiene unos costes mucho menores y es más simple de montar. Sin embargo, tenemos el problema de la localización si tenemos la necesidad.

El siguiente caso sería la contenedorización, la cual tiene un coste asociado algo mayor, ya que son contenedores específicos para minado con ASICs y los cuales vienen totalmente preparados, cableados y con sistemas hasta de contención de incendios. Estos contenedores aumentan la tasa de refrigeración, ya sea con cortinas de agua, con ventiladores añadidos, con refrigeración líquida, con el propio circuito dentro del contenedor o con inmersión en aceite. Otra cosa buena que tienen los contenedores es la movilidad geográfica, ya que si deja de ser rentable una operación en un país, puedes fácilmente coger el contenedor y llevarlo a aquel sitio donde siga siendo rentable minar. Aparte de esto, lo bueno de los contenedores es que te permiten minar en áreas remotas donde haya remanentes energéticos, como bien puede ser la llama superior de las refinerías de petróleo, la cual es gas que se gasta, se quema y se expulsa a la atmósfera. Gracias a un minero contenedorizado, podríamos acercar a la refinería de petróleo este minero y utilizar ese gas restante y sobrante para potenciar el propio contenedor con mineros.

Vamos a ver un caso práctico de minado industrial. Este caso sería Génesis, que tiene una operación brutal, con una gran granja de minería en Islandia, la cual está potenciada en gran parte, si no en su totalidad, por energía geotérmica. Esta operación de minado lo que hace es subarrendar ese poder de minado a terceras personas a través de Internet, mediante planes de minado en su página web. Esto se conoce como cloud mining. Muchas veces se simplifica el coste del minado al precio del hardware y la electricidad, pensando que son los dos únicos costes asociados. Al ser una nueva industria, se suele antagonizar el coste energético asociado, obviando de esta forma una gran oportunidad.

Hemos visto las distintas formas de minar monedas proof of work, las cuales incentivan una mayor oferta energética renovable, no solo en términos energéticos, sino también en cuanto a tecnología y modelos de negocio. Vemos grandes promesas en esta nueva industria, dando pie a una adopción masiva, ya no solo accesible para expertos y empresas, sino para particulares.

### Minería y Sostenibilidad
Uno de los grandes argumentos utilizados contra la Criptomoneda es su elevado uso de la energía. 

“¿Cuántos hogares podrían alimentarse con la energía malgastada en la minería?”. Es una de las preguntas más comunes utilizado contra esta práctica.

Este tipo de argumentos son muy superficiales, caer en la demagogia e infravalorar los beneficios que el mundo del minado de Bitcoin y su uso de la energía pueden aportar a la sociedad.

#### 1 | "Gastar energía es malo" 
¿Existe una jerarquía para justificar el gasto de la energía?

- La humanidad consume cada vez más energía.
- En USA se consumieron, durante el pasado año, 6000 millones de Kw/h en iluminación para festivales, ¿se puede calificar de bueno o malo?. Estos números son ridículos en comparación con el consumo anual de aparatos domésticos como aires acondicionados, secadoras o coches eléctricos. 
- En el caso de los coches eléctricos el consumo es “verde” y “positivo”.
- Sea como fuere, el consumo de energía y su optimización, han mejorado nuestra calidad de vida, pues la demanda de energía, siempre va a seguir creciendo a medida que lo hace la sociedad.

#### 2 | "La energía es un bien escaso"
Existe un gran número de posibilidades de implementar masivamente nuevas formas de energía (como la solar), el problema es su viabilidad económica.

Uno de los problemas por los que no existen grandes proyectos de energías renovables es debido a la naturaleza de la oferta y de la demanda, pues carecemos de la capacidad de almacenar dicha energía para su posterior uso, obligando a suministrarla en el momento en que se crea.

> La energía hidroeléctrica siempre produce para cubrir un supuesto pico de demanda pero ¿qué pasa con la que no se consume?. Se pierde, ya que no contamos con la capacidad de almacenarla.

Si los grandes proyectos de energía renovable utilizasen la minería de Bitcoin para monetizar la energía que no se utiliza en las horas de menor demanda, aportando ingresos adicionales e incentivando este tipo de proyectos.

Hay algunos ejemplos de posibilidades de uso.

##### Paraguay, sobreproducción de energía.
Paraguay produce energía eléctrica por encima de sus necesidades reales. La energía sobrante la vende a países vecinos, como Brasil, pero muchos mineros de Bitcoin se están trasladando a este país debido al bajo coste energético.

##### Islandia, energías renovables en lugares sin consumo.
La energia geotérmica producida en lugares muy remotos, no llega a ser consumida. Bitcoin requiere una fuente constante de energía, sin importarle el origen de la misma por remoto que sea.

##### El Salvador. Proyecto Bitcoin City.
Aprovechar la energía geotérmica de los volcanes para producir energía y utilizar los remanentes para era minado de Bitcoin.

Hay que disociar el binomio Criptomoneda / Malgasto de energía, pues Bitcoin puede suponer un catalizador para potenciar y normalizar el uso de energías renovables en todo el mundo y estabilizar la red eléctrica de manera global.

#### Impactos en el coste de una operación de minado
1. Servicios de minado
2. Impacto en los beneficios
3. Rentabilidad
4. Tipo de operaciones

##### 1 | Servicios de minado
1. **Cloud Mining:** Minería en la nube, que permite a usuarios comunes minar criptomoneda sin la necesidad de poseer el hardware para la autenticación de las transacciones en Blockchain.
2. **Hosting de minería:** Subcontratar granjas de minado situadas en países con menor coste energético.
3. **Prebuilt Rigs:** Revender Rigs por internet o por otro medio. Un Rig es un ordenador cuya construcción y configuración está optimizado para el minado de criptomonedas.

##### 2 | Impacto en los beneficios del minado
1. Moneda a minar.
2. Comisión de transacción y recompensa por bloque.
3. Precio.
4. La dificultad.

##### 3 | Factores que determinan la rentabilidad del minado
1. **Coste del hardware:** Actualizaciones, etc.
2. **Coste eléctrico:** Consumo, refrigeración, etc.
3. **Gastos varios:** Alquiler, salarios, seguros, transporte o montaje.

##### 4 | Tipos de operaciones
1. **RIG de minería casero:** Teniendo en cuenta el coste del hardware, el consumo de energía por refrigeración y la conexión permanente a internet.
2. **Operación industrial (Minería con ASIC):** Granjas de minado también dedicadas al Cloud Mining Ejemplo, Proyecto Génesis, Islandia, que utiliza energía geotérmica.

## U4. Práctica
### IPFS como SaaS (Video)
![[532.E2_IPFS_como_SaaS.mp4]]
[IPFS como SaaS.mp4](https://app.web3mba.io?wvideo=8zmci814kj)

Uno de los mayores retos que podemos observar dentro del mundo de la descentralización está en el almacenamiento de datos. El almacenamiento de datos descentralizado siempre ha sido algo que se ha deseado dentro de la industria, ya que permite agregar una gran resiliencia a la información que estamos almacenando, especialmente si esta es de carácter privado o de gran relevancia, tanto a nivel empresarial como personal. En todo caso, no hay nada peor que perder datos. Parte de lo que sería la tecnología blockchain, así como las redes descentralizadas y los movimientos de generación de procesos de programas descentralizados, nos han llevado a la construcción de sistemas de almacenamiento descentralizados bastante útiles.

Por ejemplo, podemos mencionar Redis, que también es un sistema descentralizado bastante conocido, pero uno de los más destacados es IPFS, o Interplanetary File System, que ha ganado notoriedad porque de sus bases se construyeron sistemas como Filecoin, que es una criptomoneda o blockchain que utiliza IPFS para ofrecer un servicio de almacenamiento. Filecoin permite alquilar espacio de almacenamiento mediante un pago acordado con los diferentes proveedores de almacenamiento que forman parte de su red. Además, Filecoin utiliza IPFS dentro de sus nodos para generar este tipo de almacenamiento.

Pero, exactamente, ¿cómo funciona IPFS? ¿Y cómo puede utilizarse IPFS como un SaaS o software como servicio? Vamos a su página principal, en este caso IPFS, y vamos a indagar un poco sobre su funcionamiento. IPFS, en realidad, es un sistema peer-to-peer que nos permite configurar un computador para que un espacio de almacenamiento dentro de los discos duros pueda ser utilizado como un enclave o un baúl para almacenar información de una red descentralizada. En este caso, tenemos una red enorme de nodos que utilizan el protocolo IPFS para comunicarse. Esa red de nodos decide cómo dividir la información entre ellos para ofrecer el almacenamiento necesario para los datos que estamos subiendo a la red.

Cuando queremos descargar esta información de la red, nuestro software cliente de IPFS solicita la información mediante un sistema criptográfico y, desde allí, envía la solicitud a los nodos. Los nodos buscan esta información, la recomponen y nos entregan el archivo original que hemos subido. Lo mejor de IPFS es que no solo divide la información en diferentes partes a nivel global, agregando un nivel de resiliencia que no se observa en otros sistemas centralizados, sino que también ofrece un acceso descentralizado a esta información. Por ejemplo, en caso de que estemos en un país que haya prohibido el acceso a determinada información, IPFS puede permitirnos subir esta información y generar diferentes rutas de intercomunicación para acceder a ella, incluso en medio de un sistema completamente censurado o bloqueado.

Es decir, si tenemos un sistema que está completamente censurado o bloqueado, muchos de los usos que se dan a IPFS son precisamente para ofrecer acceso a información que de otro modo no sería posible debido a diferentes elementos de censura o prohibición de acceso. Allí es donde IPFS se destaca entre otros tipos de servicios de almacenamiento de datos, ya que, independientemente de la censura, IPFS nos permitirá acceder a esta información sin mayores complicaciones, utilizando la enorme red de nodos disponibles en ese momento.

Ahora bien, IPFS fue pensado principalmente para integrarse a los servicios web. Es decir, si queríamos crear una página web que fuera globalmente accesible y que no pudiera ser censurada, IPFS nos proporcionaba las herramientas necesarias para hacer esto realidad. De hecho, ya ha sido probado en este sentido, porque, por ejemplo, durante las protestas en Irán y en otras partes del mundo, IPFS ha sido un punto clave para ofrecer acceso a información sobre esas protestas a nivel global, utilizando toda la red que está dentro de este tipo de sistemas. Lo mejor de esto es que no es costoso instalar y utilizar este tipo de red.

A continuación, veremos cómo instalar IPFS para desktop. Como pueden ver, tenemos tres opciones para instalarlo: IPFS Desktop, IPFS para línea de comando, y también podemos instalarlo como un plugin para navegadores web, así como otras funciones diseñadas principalmente para desarrolladores, que les permitirían integrar IPFS a diferentes aplicaciones. Por ejemplo, imaginemos que tenemos una aplicación de fotografía y queremos permitir a las personas guardar esta información de forma descentralizada. IPFS puede permitirnos hacer esto simplemente utilizando alguna de estas implementaciones y integrando sus funciones a nuestra aplicación para ofrecer ese servicio a nuestros usuarios.

Ahora bien, vamos a instalar IPFS. Utilizaremos IPFS Desktop y desde allí realizaremos la instalación necesaria para desplegar nuestro primer servicio. Simplemente vamos a descargar IPFS Desktop para Linux, en este caso estamos usando Ubuntu, pero también hay opciones para Mac y Windows. En este caso, descargaremos IPFS Desktop 0.24.1.

Para ejecutar IPFS Desktop, simplemente verificamos que tengamos los permisos adecuados. Aquí están los permisos de ejecución. Hacemos clic en ejecutar y aquí está IPFS Desktop inicializándose. Simplemente esperamos un momento y ya está conectado a la red. Nos indica que está conectado a IPFS y que está hosteando 115 kilobytes de datos, con 49,115 peers actualmente conectados. Aquí está la identificación de nuestro nodo, el agente que estamos ejecutando, en este caso, el agente KUBO, versión 0.16, y la versión de la interfaz gráfica que estamos utilizando. Como pueden ver, esta es la información que está manejando nuestro nodo IPFS actualmente y nos permite utilizar los servicios de la red IPFS.

Este sería el estado o el dashboard de estado, pero también podemos ver datos de archivos. En este caso, no tenemos absolutamente nada, pero podemos importar información. Vamos a subir un archivo de prueba. Abramos nuestra terminal un momento. Vamos a crear un archivo de prueba, en este caso, test-ipfs. Verificamos, ahí está nuestro archivo test.ipfs. Lo abrimos, lo editamos y creamos un documento que diga "Hola, mundo desde IPFS". Simplemente cerramos y en este punto vamos a subir nuestro archivo que está en nuestra carpeta personal. Efectivamente, ya ha subido nuestro archivo.

Para ver las propiedades de nuestro archivo, simplemente hacemos clic y aquí tenemos nuestro test IPFS utilizando el sistema, nuestro "Hola, mundo". Podemos ver la información, cómo compartir los enlaces de nuestro archivo, cómo copiar el CID de nuestro archivo, inspeccionarlo, que en este caso sería la inspección de los datos almacenados dentro de IPFS. Aquí está la información del tamaño del archivo, el tipo de archivo, y nuestro JSON explicándonos qué es exactamente el archivo y qué información contiene, los bloques que despliega el archivo, el hash del archivo y toda la información relacionada.

Vamos nuevamente a archivos y podemos ver otras opciones como la descarga de archivos, pinearlo, renombrarlo, o publicar a IPNS. Si seleccionamos publicar a IPNS, simplemente podemos proceder a realizar la publicación. En este caso, se están generando diferentes copias dentro de la red IPFS y está esperando que se hagan 20 copias. Vamos a esperar un momento a que se complete el proceso. Con esto, garantizamos que el archivo que estamos subiendo, en este caso, el archivo de prueba, esté dividido en diferentes nodos dentro de la red.

Ahora que hemos publicado el archivo en IPNS, lo que vamos a hacer es copiar el CID y vamos a ir a Simple IPFS Browser para introducir el CID. Vamos a buscarlo y aquí está la información del archivo. En este caso, un texto plano, archivo TXT, y el tamaño del archivo es de 22 bytes, lo que concuerda con la información que tenemos aquí. Vamos a ver si es efectivamente el mismo archivo. Para hacer esto, vamos a descargar el archivo. Vamos a abrirlo y ahí está nuestro archivo: "Hola, mundo desde IPFS".

¿Qué significa esto? Significa que hemos utilizado nuestro nodo de IPFS para desplegar un archivo dentro de la red y que desde cualquier parte del mundo, en este caso estamos utilizando un navegador web que está completamente desconectado de la información del archivo IPFS, estamos accediendo a dicho documento que hemos subido a la red. Esto nos permite entender que IPFS no solo es para almacenar archivos de algún tipo. Podemos integrarlo en diferentes aplicaciones y utilizarlo para subir cualquier tipo de información que deseemos.

Como mencioné al principio, podemos crear una aplicación de fotos que cada vez que haga un respaldo de nuestras fotografías, lo suba a IPFS, teniendo la seguridad de que está protegido con criptografía, de modo que solo aquellos que conozcan la protección criptográfica puedan acceder a esa información. En este caso, el archivo que he subido no está protegido criptográficamente, pero puede serlo. Son características que se pueden agregar y que le dan una mayor utilidad a IPFS.

Sin embargo, IPFS no termina allí. Las capacidades de software como servicio (SaaS) no se limitan a esto. Podemos generar un sistema que nos permita desplegar un HTML, por ejemplo. Podemos crear servidores o servicios que mantengan información en IPFS que podamos navegar con nuestros navegadores. De hecho, esto ya se ha hecho con Wikipedia, que es uno de los primeros sitios que podemos acceder a través de IPFS.

Esto significa que IPFS no solo es para redes blockchain, como se suele pensar, sino que también se puede aplicar a aplicaciones que no tienen nada que ver con blockchain y que pueden disfrutar de este tipo de servicios sin mayores complicaciones. Lo mismo ocurre con IPFS, también podemos hacerlo con servicios como CIA, que es un servicio blockchain muy parecido a lo que es Filecoin. Filecoin y Storch son sistemas de almacenamiento descentralizado que utilizan blockchain para ofrecer contenido, no solo la capacidad de almacenar el archivo, sino también para crear sistemas que moneticen el espacio de almacenamiento que utilizan las personas dentro de esas redes.

Como pueden ver, IPFS abre la puerta a todo el universo de SaaS, permitiéndonos crear servicios únicos en los que nuestra información y nuestros datos estén almacenados dentro de una enorme red que nos garantiza no solo el acceso en cualquier momento a nuestros datos, sino que también nos asegura resiliencia, recuperabilidad y, en todo caso, la descentralización y protección de la privacidad de nuestros datos, evitando que caigan en manos de empresas como Google u otras que son bien conocidas por investigar la información que subes a ellas y que incluso pueden censurarla si consideran que no debe estar allí o que incumple algún requisito.

Así pues, podemos ver que IPFS nos permite realizar este tipo de situaciones y es bastante sencillo de utilizar, sin mayores complicaciones. Este ejemplo en el que hemos utilizado este archivo de texto sencillo se puede replicar con otros. Vamos a hacer un ejemplo para que vean que es bastante sencillo. Antes de empezar, vamos a descargar una imagen. Vamos a buscar una imagen de Charlie Chaplin y la vamos a subir a IPFS para descargarla desde allí.

Aquí vamos a guardar esta imagen de Charlie Chaplin y la vamos a reconocer con IPFS. Vamos a subir esta imagen utilizando nuestro nodo. Aquí está, la abrimos. Ahí está la subida. Vamos a requerir una publicación en IPNS. Hacemos la publicación y esperamos un momento. Muy bien, ya ha subido. Ahora vamos a copiar el CID. Vamos a ir nuevamente a IPFS Browser, copiar el CID y buscarlo. Efectivamente, aquí está. Lo reconoce como una imagen de extensión JPG y un archivo de 1 mega. Si hacemos clic para copiar y vemos nuestro archivo, esperamos un momento y aquí ya tenemos nuestro archivo reconocido. Es la misma imagen que acabamos de subir desde nuestro nodo, pero que ahora está disponible dentro de la red de IPFS.

Así pues, como pueden ver, es bastante sencillo utilizar IPFS para desplegar archivos. También se puede utilizar en otros tipos de sistemas. Por lo menos, aquí tenemos un explorador que nos permite ver los diferentes sistemas que han sido desplegados. Por ejemplo, aquí estamos viendo, si vamos nuevamente atrás, los archivos de XKCD, que son conocidos cómics que se pueden ver en la página web. Si vamos a XKCD, podemos ver los cómics. Pero lo que está aquí en IPFS es el archivo descentralizado de estos cómics que vemos en la web. Si copiamos cada uno de los CID que están aquí, podemos ir a IPFS Browser.

Vamos a abrir el archivo y esperamos un momento. Este es nuestro IPFS dentro del archivo XKCD. Ese sería el contenido. Aquí están divididos en tres partes, que serían el XKCD y el archivo de imagen. Vamos a ver el archivo de imagen. Aquí copiamos el CID. Vamos a abrirlo y ahí está nuestro archivo de imagen, simplemente utilizando IPFS y no el servicio web que normalmente está disponible todo el tiempo. Para esto, hemos aplicado directamente la obtención de la información a través de la interfaz de IPFS.

Explicando más claramente, lo que acabamos de hacer es acceder a este archivo utilizando la red de IPFS, porque allí está toda esta información ya publicada. De esta forma, podemos entender que podemos obtener cualquier tipo de información que queramos, siempre y cuando tengamos el CID o el identificador de la información que estamos almacenando dentro de IPFS. Podemos verificarla, revisarla e incluso descargarla sin mayores complicaciones, utilizando IPFS directamente o un servicio web, como sería en este caso, IPFS Browser.

Así pues, resulta bastante sencillo utilizar IPFS para este tipo de sistema. Las posibilidades que IPFS nos abre son infinitas, ya que podemos integrarlo a cualquier tipo de aplicación y utilizar sus funciones de almacenamiento de datos de forma bastante sencilla, sin complicaciones técnicas. Nos ofrece un acceso global a la información. En este caso, por ejemplo, lo que estamos viendo aquí son los pares que están actualmente conectados a nuestro nodo IPFS. Fíjense que tenemos 187 pares y el número sigue creciendo a medida que más tiempo estemos conectados a la red.

La ubicación, a nivel global, tiene muchos nodos de este tipo de redes y nos permite tener la seguridad de que nuestra información siempre estará accesible en cualquier momento. Aquí tenemos la configuración, el gateway público, las claves de publicación y los sistemas de pinning. Esto es simplemente para acceder a ciertas funciones que, de forma externa, IPFS nos permite. En el caso del gateway público, nos permite acceder a la información que estemos subiendo a través de Internet sin tener conexión directa a la red IPFS.

Dicho esto, les invito a que descarguen este sistema y lo prueben. Prueben que pueden subir información, mantenerla de forma sencilla dentro de la red, descargarla y aplicarla a otras aplicaciones que deseen, sin complicaciones técnicas. Simplemente necesitarían diseñar las diferentes funciones para que puedan aprovechar este tipo de servicios sin problemas.

Podemos ver que el tráfico ya se ha ido reflejando dentro de nuestro nodo, hosteando tres megas. También se refleja la información que hemos enviado y la que hemos recibido de otras partes de la red. Esto nos deja claro que, si bien podemos enviar información a la red, la red también envía información a nosotros. Aquí hay que tener cuidado, porque si tienes un computador con poco almacenamiento o con baja capacidad de internet, puedes tener problemas ejecutando este tipo de software, ya que requiere bastantes recursos para funcionar adecuadamente.

Ten en cuenta esta información para que, al ejecutar un nodo IPFS, te asegures de tener una buena conexión a internet y un espacio de almacenamiento considerable, si es posible un terabyte o más, para evitar sorpresas de quedarte sin espacio o que la red se sature por estar descargando o enviando mucha información. Dicho esto, los dejo para que puedan descargar este software, probarlo y nos vemos en otra ocasión.

## U5. Creación de un Nodo Bitcoin Core
### Creación de un Nodo Bitcoin Core (Video)
![[533.E2_Creación_de_un_Nodo_Bitcoin_Core.mp4]]
[Creacion de un Nodo Bitcoin Core](https://app.web3mba.io?wvideo=q9jh81buqa)

¿Por qué crear un nodo de Bitcoin? Para que la red de Bitcoin pueda validar y transmitir transacciones, son necesarios más elementos, además de los mineros que veníamos comentando. Mediante el uso de un número de nodos seleccionados al azar, la red puede reducir las probabilidades de que suceda un problema como el doble gasto y mantener la seguridad e integridad de la misma de forma completa. De hecho, Saifedean Ammous, que es uno de los principales bitcoiners, siempre habla de la importancia de los nodos y comenta que, si en algún momento comprueba que hay menos nodos en la red, es decir, menos personas operando un nodo, eso sería uno de los factores que le preocuparían. No tanto si de repente hay más o menos mineros, cosa que, como hemos visto, depende más de las economías relacionadas con la minería, que son las mismas que afectan a cualquier otro tipo de materia prima. Él comenta que lo importante es la cantidad de nodos, pues al final los nodos son los que permiten descentralizar y mantener el control sobre la cadena. Al final, los nodos son los que deciden qué es lo que se puede incluir dentro de la red de Bitcoin y qué es lo que no se puede incluir, y esto es muy importante porque la cuestión de la verificación es algo que ha atacado y podríamos decir incluso destruido al otro activo que se ha usado como dinero sólido a lo largo de la historia, como es el oro.

Al final, el oro es un activo que, como hemos visto, se ha empleado como dinero en civilizaciones a lo largo y ancho del planeta durante siglos, pero que tenía un pequeño problema. Bueno, varios, pero hay uno concretamente que es el que viene a solucionar el nodo, y es la cuestión de la verificación. Si al final tienes que verificar que ese lingote de oro es un lingote de oro puro, tienes que aplastarlo y someterlo a un montón de procesos que son muy caros y difíciles de realizar por cualquier persona. Eso provoca que el oro de todo el planeta se centralice, ya que es la única manera eficiente de verificar que el oro que existe es oro puro, y aún así existe mucho oro que no es puro. Pero en el caso de Bitcoin, esto no es así; un nodo es muy sencillo de crear y de operar. De hecho, lo vamos a ver en estas elecciones, y te permite verificar que los bitcoins que tienes y que los bitcoins que existen son los que son. Al final, es mucho mejor saber que tú tienes X bitcoins del total de bitcoins que saber que tienes, no sé, X euros de un total totalmente desconocido de euros que existen.

Bien, un nodo de Bitcoin puede desempeñar distintos roles dependiendo de la utilidad que queramos darle. Los más frecuentes son los siguientes: es una base de datos de la cadena de bloques. Todo monedero que disponga de una copia completa de la blockchain puede actuar como nodo. Los mineros, para que un equipo de minería pueda minar, necesitan tener también una copia de la totalidad de la cadena de bloques, pues como hemos dicho, es la primera reserva o el primer control de la información que entra en la red de Bitcoin. Pero más allá de esto, montar tu propio nodo te da una absoluta libertad. Siendo dueño de tu propio nodo, no solo eres un usuario de la red, sino que eres parte integral de la misma, una parte que vela por su seguridad. Así, puedes tener acceso directo y sin intermediarios a la red, permitiéndote transmitir tus transacciones de forma segura e incluso privada y anónima, ya que no tienes ningún intermediario entre tú y la red.

Los incentivos para tener tu propio nodo pueden no parecer muy atractivos, pero esto es solo porque, por lo general, confiar no es una mala estrategia. No obstante, sabemos los riesgos que entraña, y por esto se hace importante conocer el valor de llevar tu propio nodo. Cuando yo monté mi propio nodo, entendí un poco el valor de esto. Al principio, monté un monedero en Electrum, que es uno de los sistemas típicos, al menos al principio, para almacenar tus saldos en Bitcoin. Cuando este monedero de Electrum se conectaba a la red para conocer mi saldo en Bitcoin, tenía que conectarse al nodo de otra persona. Tenías que elegir ese proxy y, claro, esto significaba que yo tenía que confiar en que la información sobre mi saldo provenía de un tercero, que es un poco similar a cuando tú vas al banco y el banco te dice: "No, tú tienes esto, es lo que tienes", y tienes que confiar en que esto realmente es así. Entonces, cuando yo creé mi nodo y me conecté por primera vez a él, dije: "Ah, mira, ya lo compruebo yo solito". Así que, cuando te haces ese primer nodo y descubres esto, te das cuenta de la importancia de tenerlo.

Por otra parte, esto también permite la privacidad de tus saldos. Cuando tienes que preguntarle a otro por tu saldo en Bitcoin, claramente esa información ya no es tan privada como cuando solo lo ves tú. Es un poco ese mensaje que sale siempre en los cajeros, ¿no? De "pon la mano antes de que la gente vea lo que tienes ahí". Pues esto es igual; si tú tienes tu propio nodo, puedes verificar y con privacidad absoluta el saldo que tienes. Además, verificas, como decía, también la cadena, que es una de las principales características o ventajas de tener un nodo, ya que puedes ver qué porcentaje del total de bitcoins es lo que tú tienes y verificar que esto es así en cada momento. Además, también te permite montar un monedero multifirma. Hay posibilidades de hacer esto sin tu propio nodo, pero de nuevo tienes que confiar en un tercero. Si tienes tu propio nodo, puedes montar un monedero multifirma, que como sabemos, es hoy día el monedero más seguro o que ofrece más seguridad a los tenedores de Bitcoin, ya que implica la necesidad de varias firmas que luego se ponen de acuerdo dentro de tu nodo. Así que tener tu propio nodo también te permite acceder a esto.

No solamente son estas las características y ventajas de tener tu nodo en Bitcoin, sino que también puedes crear tu propio nodo y tu propio canal de Lightning, que veremos posteriormente para qué se usa Lightning. Finalmente, es una actividad que realmente recomiendo a cualquiera. Es como crear un Lego, pero que al mismo tiempo tiene una utilidad y te da acceso a un tipo de información que es muy interesante de observar. Es una experiencia que recomiendo a cualquiera y que, como veremos en la demo, es muy sencillo de llevar a cabo. Así que se lo recomiendo a todo el mundo y estas son las principales ventajas de hacerlo.

Veamos ahora algunos consejos de seguridad para manejar tu propio nodo. Ahora que ya imagino que tendrás tu propio nodo instalado, estas son algunas de las recomendaciones para seguir gestionándolo de manera segura. En primer lugar, mantén actualizado tu nodo de Bitcoin Core. Las actualizaciones de software en Bitcoin Core corrigen errores que ayudan a detectar, bueno, que se pueden detectar, digamos, en el mismo y que te mantienen seguro. Siempre puedes ver qué viene en las nuevas actualizaciones, así que si hay algo que no te gusta, siempre puedes preguntar o verlo en más detalle.

En segundo lugar, realiza un respaldo periódico de tu monedero, con el fin de que no pierdas acceso al mismo y siempre mantengas la sincronización de la cadena. Tercer punto: también es importante mantener ese respaldo, a ser posible, en un disco duro portátil que esté bien asegurado, es decir, no tengas todo dentro del mismo ordenador. En cuarto lugar, realiza escaneos de seguridad sobre tu computadora. Al final, nadie está seguro de lo que puede haber dentro de su ordenador, por eso de vez en cuando un escaneo no viene mal. Y quinto, verifica que tengas firewalls bien instalados y configurados dentro de tu computadora. A ser posible, mantén siempre esa revisión, no sea que haya personas que estén escuchando tu internet.

Por último, simplemente usa sistemas de filtrado DNS y asegura este protocolo usando opciones como DNS sobre HTTPS y otros tipos de protocolos de seguridad. De esta manera, aseguras la resolución de nombres en internet, lo que es una medida de seguridad que garantiza que no manipulen tu conexión y te lleven a sitios falsos. Además, muchos DNS privados tienen la capacidad de bloquear publicidad y sitios atacantes. Esto es algo que tienes que tener en cuenta, así como las típicas recomendaciones de usar VPN, tratar de usar Tor más a menudo, tener el ordenador bien actualizado y otra serie de recomendaciones de seguridad que creo que todos hemos escuchado varias veces.

Finalmente, si usas Bitcoin Core junto con otras interfaces como Spectre Desktop, mantén estas soluciones actualizadas y bien configuradas para evitar fugas de información. Como verás, en el momento en el que montas tu nodo, hacer esto no es difícil y, de hecho, si lo montas con un tercero, como puede ser MyNode, hay otros servicios que te permiten hacerlo y te mantienen estas actualizaciones de manera muy sencilla. Es decir, tú los vas viendo en tu dashboard y es fácil para ti elegir: "Vale, esta actualización ya está aquí, voy a actualizarlo y tener todo siempre al día". Así que, como verás, no es una actividad difícil; al contrario, es sencilla y muy satisfactoria.

### Crea tu primer Nodo de Bitcoin
Aunque parezca lo contrario, montar un Nodo de Bitcoin es muy sencillo.

Lo básico que necesitamos:
1. Un ordenador, ya sea nuevo o de segunda mano. Incluso con una Raspberry.
2. Conexión a Internet.
3. 10 minutos de tu tiempo para realizar la instalación.

El software de Bitcoin ha sido creado para que sea muy sencillo de instalar. En todo caso, nuestro viaje para instalar el nodo comienza en la web de [Bitcoincore.org](https://bitcoincore.org/en/download/), desde allí descargaremos el software necesario para iniciar nuestro propio nodo.

![[234.E2_bitcoin_core.png]]

Una vez allí, solo debes hacer clic en el botón “Download Bitcoin Core” y comenzará la descarga

 Ahora podrás ver la información de la última versión del software (en este caso Bitcoin Core v23.0) y las distintas opciones de descarga (para Windows, MacOS o Linux). En este punto es vital que tengas en cuenta dos cosas:
1. Descarga la versión de Bitcoin Core que se ajuste a tu ordenador. Si tienes Windows, deberás descargar la versión para Windows. Si usas MacOS o Linux, entonces deberás descargar las versiones correspondientes a esos sistemas.
2. Como bien dice la web, la sincronización inicial lleva bastante tiempo. Esto se debe a que Bitcoin descargará TODO el historial de la blockchain, desde la transacción 1 hasta la más actual, verificando en todo ese tiempo las transacciones hasta dejar el nodo instalado en su totalidad. En este caso, debes tener en cuenta que deberás dejar encendido el ordenador en todo momento, para que la descarga se realice y el nodo mantenga su actividad. Si apagas el ordenador el nodo iniciará en el punto donde ha quedado, pero lo ideal es dejarlo encendido en todo momento.

Dicho esto, en este ejemplo elegiremos la versión para Windows para instalar nuestro nodo Bitcoin.

![[234.E2_nodo_windows.png]]

#### Iniciando la instalación
Realizada la descarga, solo debemos hacer clic en el ejecutable descargado y comenzar con la instalación. La instalación es bastante sencilla, simplemente debes seguir las instrucciones de instalación que aparecen en pantalla. Al hacer doble clic en el ejecutable comienza el proceso:

![[534.E2_wizard.png]]

Se te pedirá que configures el directorio del nodo, el cual puedes ajustar para una ubicación por defecto o personalizada. En nuestro caso, usaremos la configuración por defecto.

![[534.E2_directorio.png]]

Otra opción que verás es la del espacio de almacenamiento que usarás para el nodo. En este caso, tienes dos opciones:
1. Usar la versión por defecto, que creará un nodo del tipo «pruned». Este tipo de nodo usará solo una pequeña parte de disco duro para almacenar los datos de la red, lo que lo hace perfecto para ordenadores con pocos recursos de almacenamiento.
2. Puedes ajustarlo para un nodo completo, pero para ello deberás contar con al menos un disco duro de 1 TB de espacio libre para que se descargue todo el historial y se mantenga en tu ordenador en todo momento. Y ten en cuenta que cada bloque añade peso que debe ser almacenado.

En cualquier caso, ambos nodos te permitirán enviar y recibir BTC de forma totalmente descentralizada, sin depender de terceros.  Finalmente comenzará el funcionamiento del nodo, tal como lo ves en la siguiente captura:

![[534.E2_start.png]]

Con el funcionamiento del nodo, seguramente verás una advertencia del Firewall de Windows, acepta esta advertencia, ya que creará la regla de comunicación para que el nodo funcione sin problemas.

![[534.E2_firewall.png]]

Si has seguido estos pasos ya tendrás instalado el nodo de Bitcoin en el computador que has decidido usar para este fin y habrás completado tu camino hacia una mayor descentralización.

### Tips de seguridad
Ahora que tienes tu nodo de Bitcoin instalado, estas son algunas recomendaciones para seguir gestionándolo de forma segura:
1. **Mantén actualizado tu nodo de Bitcoin Core.** Las actualizaciones de software en Bitcoin Core corrigen errores que puedan detectarse en el mismo y te mantienen seguro. Siempre puedes ver qué viene en las nuevas actualizaciones.
2. **Realiza un respaldo periódico de tu monedero Bitcoin Core,** con el fin de que no pierdas acceso a la misma y siempre mantengas la sincronización del mismo. Mantén este respaldo de ser posible en un disco duro portátil bien asegurado. 
3. **Realiza escaneos de seguridad sobre tu computadora,** sea Windows, MacOS o GNU/Linux. Recuerda que los virus y _malware_ afectan a todos los sistemas por igual. 
4. **Verifica que tengas _firewalls_ bien instalados y configurados.** Mantén siempre una revisión sobre los mismos evitando que que terceros puedan acceder a tu sistema. 
5. **Usa sistemas de filtrado DNS y asegura este protocolo usando opciones como DNS over HTTPS (DoH) o DNS over TLS (DoT), junto a DNSSEC.** Asegurar la resolución de nombres en Internet es una medida de seguridad que garantizan que no manipulen tu conexión y te lleven a sitios falsos, además, muchos DNS privados tienen la capacidad de bloquear publicidad y sitios atacantes. 
6. **Usa conexiones seguras por medio de VPN, Tor e I2P,** en todos los casos podrás agregar una medida de privacidad adicional sobre tu conexión. 
7. **Mantén tu sistema operativo actualizado** y bien protegido contra amenazas. 
8. **Si usas Bitcoin Core junto con otras interfaces (como Specter Desktop) mantén estas soluciones actualizadas y bien configuradas** para evitar fugas de información.

## U5. Práctica
### Conéctate a un Nodo Bitcoin Core por medio de la Interfaz RPC (Video)
![[536.E2_Conéctate_a_un_Nodo_Bitcoin_Core_por_medio_de_la_Interfaz_RPC.mp4]]
[P-BTC-RPC](https://app.web3mba.io?wvideo=v86ejlljsu)

Una de las funciones más útiles que podemos ver dentro de los softwares de criptomonedas es la de activar el servidor RPC. Los servidores RPC dentro de estos softwares de nodos nos permiten acceder y utilizar o crear aplicaciones externas al mismo nodo, así como requerir información de estos y analizarlos para luego generar aplicaciones mucho más avanzadas o más centradas en una determinada función.

Veamos, por ejemplo, el caso de los exploradores de bloques. Normalmente, cuando observamos un explorador de bloques, simplemente vemos una interfaz gráfica que se encarga de mostrar la información del explorador como tal. Entonces, vamos a ver un momento aquí en el explorador de BitTuny y a analizar cómo funciona un poco este explorador. Normalmente, lo que sucede con estos exploradores es que se solicita información a los nodos mediante este servidor RPC, y luego esta información es analizada y almacenada en bases de datos que posteriormente son consultadas a través de otros lenguajes, como JavaScript, para mostrar información que le interesa a los usuarios. Por supuesto, esta información que se extrae de los nodos se obtiene mediante llamadas al servidor RPC de estos softwares de nodos y luego es transformada y analizada por diferentes lenguajes de programación, como Python, JavaScript, Go o C, dependiendo de cómo esté escrita nuestra aplicación.

Por supuesto, esta utilidad es la que nos permite generar cosas como los exploradores de bloques, pero también nos permite crear otras aplicaciones más avanzadas, como los DEX o intercambios descentralizados, como BISC, que es un intercambio descentralizado para Bitcoin que utiliza precisamente la capacidad RPC para generar toda la funcionalidad que necesita este intercambio descentralizado para operar dentro de la red Bitcoin. Así, podemos entender que los RPC son una parte muy importante del software de los nodos. A continuación, veremos cómo utilizar este software o cómo habilitar el servidor RPC dentro de Bitcoin Core.

Actualmente, aquí ya estamos ejecutando una instancia de Bitcoin Core. Tenemos una wallet creada, que es reciente, y vemos que estamos sincronizando nuestro nodo. Entonces, ¿cómo activamos el servidor RPC dentro de Bitcoin Core? Simplemente vamos a la configuración y aquí podemos ver que está la opción de activar el servidor RPC completamente seleccionada. Esto activa, de forma inicial, el servidor RPC dentro de Bitcoin Core. Sin embargo, también en el archivo de configuración podemos establecer toda esta funcionalidad simplemente abriendo el archivo y verificando o colocando la siguiente información dentro del mismo. En este caso, "server=1" activa nuestro servidor RPC, "rpcbind" y esta dirección IP que está aquí nos indica que el servidor RPC va a estar escuchando únicamente en la dirección local. En este caso, la dirección local es 127.0.0.1 y que todas las IP con "rpc" al lado pueden requerir información a esa dirección. El puerto, en este caso, será el puerto RPC 8332 y el usuario y la contraseña serán "username" y "password".

Un punto a tener en cuenta es que si vas a generar una aplicación que estará en un ambiente de producción o que estará abierta a Internet, estos usuarios y contraseñas deben ser seguros y completamente fortificados. De ser posible, utiliza tokens de acceso para evitar que un tercero malicioso pueda acceder a tu nodo y realizar acciones no deseables dentro del mismo. Recordemos que tenemos activada ya la opción de RPC dentro de Bitcoin Core. ¿Cómo podemos interactuar con ella utilizando un lenguaje de programación, por ejemplo, Python? Para eso, simplemente deberíamos hacer lo siguiente: ir a Python y realizar la instalación de nuestro intérprete de Bitcoin Core.

Recordemos que Python es un lenguaje interpretado, por lo que es fácilmente portable a otras arquitecturas y sistemas operativos, y que comprende o tiene soporte para varias plataformas, como Windows, MacOS y Linux. De hecho, en Linux, la mayoría de las distribuciones tienen un instalador o compilador de Python ya instalado. Por ejemplo, aquí que estoy utilizando Linux, vamos a abrir un momento la terminal. Si escribimos "python3", vemos que estamos utilizando la versión de Python 3.10.8 dentro de nuestra instalación del sistema operativo. Así, podemos estar seguros de que estamos utilizando Python en nuestro computador.

Lo siguiente que vamos a hacer es generar un entorno de programación para utilizar la librería Python necesaria para interactuar con el nodo RPC de Bitcoin. Esta librería que vamos a utilizar es muy conocida: la librería Python Bitcoin RPC. Esta librería fue creada por JigarSick, uno de los desarrolladores de Bitcoin Core, así que podemos estar seguros de que estamos utilizando una librería confiable. Esta librería nos permite tener una conexión con el servidor RPC de Bitcoin Core y desde allí enviar comandos que luego son respondidos por el software de Bitcoin Core, proporcionándonos la información que le estamos requiriendo. Es bastante sencilla de utilizar. Aquí hay algunos ejemplos de software que podemos utilizar para obtener información básica de nuestros nodos. Simplemente pueden copiar estos ejemplos y trabajar sobre ellos para requerir la información que deseen.

Para eso, simplemente tienen que instalar la librería. Aquí está la orden para instalarla: "pip install bitcoin.py". Simplemente pueden copiarla y pegarla. Vamos a crear aquí: "pip install python-bitcoin-rpc". Simplemente la instalan y con ello estará completamente instalada la versión que necesitamos para esta librería. Una vez instalada, simplemente nos queda entonces empezar a programar las instrucciones que necesitamos para solicitar información.

¿Cómo podemos hacer eso? Bueno, en este caso vamos a utilizar Visual Studio Code. Yo ya tengo aquí un código previamente realizado en el que he hecho algunas pruebas, pero voy a explicar un poco qué hace este código. Este código carga la librería Python, la librería de autorización, y va a realizar una conexión a nuestro nodo local utilizando esta variable "btcrpc" y el método "AuthServiceProxy". Este método le pedirá a nuestro nodo, que está en la dirección 127.0.0.1 en el puerto 8332, que indique el usuario y la contraseña, y nos dará acceso para que podamos enviar información a nuestro nodo. Una vez que se complete este proceso, simplemente podemos crear diferentes variables para obtener información de los nodos utilizando los comandos RPC de Bitcoin Core.

Aquí podemos ver ya tres variables que he creado: "BTCChainInfo", que es para obtener la información de la cadena; "MainPoolInfo", que es para obtener la información del Main Pool; y "WalletInfo", para obtener la información de lo que sería el monedero dentro de nuestro software de nodo. Para ello, simplemente utilizamos la conexión, que en este caso es "BTCRPC", y utilizamos los comandos RPC del software de Bitcoin Core que son "getblockchaininfo", "getmempoolinfo" y "getwalletinfo".

¿Dónde podemos ver estos comandos? O sea, ¿dónde está el conocimiento necesario para saber qué comando podemos utilizar? Bien, si vamos a Bitcoin Core, aquí en Bitcoin Core, y vamos a la opción de ventana, consola, podemos ver lo siguiente. Aquí están todos los comandos RPC que están habilitados dentro de nuestro software de nodo y que podemos utilizar para obtener información de él mismo. En este caso, aquí están cada una de estas operaciones que podemos utilizar. Simplemente, por ejemplo, si queremos obtener información, lo que tenemos que hacer es llegar y colocar "btcrpc." seguido del comando correspondiente junto con los valores necesarios para hacer la llamada al software.

Así, por ejemplo, si quiero obtener la información de la cadena, simplemente debo escribir "btcChainInfo" que será igual a nuestro nodo, la conexión de nuestro nodo con el comando RPC que es "getblockchaininfo". Vamos a ver qué información nos ofrece esto. Simplemente vamos a cerrar y ejecutar este dato. Cuando lo ejecuto, me da la información de la cadena. Estamos en la cadena mainnet, nuestro nodo está sincronizándose y va por el bloque 206,985. También tenemos que existen 766,536 bloques dentro de la cadena de blockchain, es decir, actualmente el último bloque que hay es el 766,536. Y así tenemos el resto de información de nuestro nodo: la dificultad, el tamaño de disco que está ocupando nuestro nodo y el tamaño máximo que puede ocupar. En este caso, estamos utilizando un nodo podado con un límite de 2 GB de almacenamiento.

Si queremos, por ejemplo, obtener información de la mempool, igualmente pasamos una variable, "mempoolInfo", obtenemos la información utilizando el comando RPC "getmempoolinfo" utilizando esta estructura. Para imprimir la información, simplemente tenemos que hacer el llamado a la función. En este caso, vamos a hacer un "clear" y luego un "F5". Aquí podemos ver entonces la información de la mempool desplegada en nuestra consola. Si queremos obtener la información de la wallet, igualmente copiamos la variable y si la ejecutamos, podemos ver que aquí está nuestra wallet con el nombre de prueba, la versión de la wallet y toda la información de saldo que está dentro de esa wallet.

Entonces, podemos entender cómo los RPC nos permiten obtener información de los softwares de nodo, de todo lo que es el estatus de la blockchain y procesarlo a través de un lenguaje de programación que nos permite generar o crear nuevas herramientas de forma bastante sencilla, lo que nos permite generar nuevas aplicaciones que los usuarios puedan disfrutar. Por ejemplo, podemos crear un nodo de Bitcoin que se esté ejecutando como nodo y podemos crear una aplicación que utilice el RPC para comunicarse con ese nodo y enviar y recibir transacciones. Este sería el método que normalmente se utiliza en las wallets que vemos en teléfonos Android o en software de computadoras, como ElectrumX o Electrum Wallet.

Por ejemplo, Electrum Wallet, si vamos aquí a ese servicio, Electrum. En este caso, Electrum y Electrum X son dos softwares creados en Python que están completamente al servicio de las personas. Uno de ellos es el servidor de la cadena; en este caso, Electrum X es el servidor, o lo que sería el equivalente a Bitcoin Core, y Electrum Wallet, que sería la parte del monedero, completamente separado del servidor, manteniendo así un mayor control y nivel de seguridad. Esta sería una de las utilidades que nos permiten los servidores RPC y que podemos disfrutar a través de este lenguaje de programación llamado Python.

Así pues, espero que les haya gustado este pequeño ejemplo de cómo utilizar un servidor RPC, de cómo podemos activarlo dentro de Bitcoin y generar aplicaciones bastante sencillas para utilizar información de la cadena y poder analizarla con otros lenguajes. Con esta práctica, les invito a que disfruten de su potencial y nos vemos en otra próxima ocasión.

### ¿Qué es Python?
Es un lenguaje de programación de alto nivel que se utiliza para desarrollar aplicaciones de todo tipo. 

A diferencia de otros lenguajes como Java o .NET, se trata de un lenguaje interpretado, es decir, que no es necesario compilarlo para ejecutar las aplicaciones escritas en Python, sino que se ejecutan directamente por el ordenador utilizando un programa denominado interpretador, por lo que no es necesario _traducirlo_ a lenguaje máquina. 

Python no solo es un lenguaje potente, sino que también resulta muy sencillo de leer y escribir debido a su alta similitud con el lenguaje humano. Además, se trata de un lenguaje multiplataforma de código abierto y, por lo tanto, gratuito, lo que permite desarrollar software sin límites. Con el paso del tiempo, Python ha ido ganando adeptos gracias a su sencillez y a sus amplias posibilidades, sobre todo en los últimos años, ya que facilita trabajar con Inteligencia Artificial, Big Data, Machine Learning, Data Science, Science Modeling, entre muchos otros campos en auge.

Por supuesto, también podemos usar Python, no solo en el diseño de blockchain (a nivel educativo e incluso a nivel final), para la creación de nodos y monederos (Electrum, por ejemplo, está escrito en Python) y por supuesto, para crear nuestras propias aplicaciones usando Python para conectarnos a nodos con los que haya una capa de compatibilidad. 

#### El Origen de Python
Python remonta su origen a principios de los años 90, cuando Guido Van Rossum, un trabajador del Centrum Wiskunde & Informatic (CWI), tuvo la idea de desarrollar un nuevo lenguaje basándose en un proyecto anterior, el lenguaje de programación “ABC”, que él mismo había desarrollado junto a sus compañeros.

Su filosofía fue la misma desde el primer momento: crear un lenguaje de programación que fuera muy fácil de aprender, escribir y entender, sin que esto frenara su potencial para crear cualquier tipo de aplicación. Este reto fue el que llevo a la creación de Python en 1991 y desde entonces, el lenguaje no solo ha evolucionado y mejorado, sino que se ha convertido en uno de los mayores lenguajes de programación usados en el mundo. 

Actualmente, Python tiene 3 versiones con soporte que son la Python 3.8, Python 3.9 y Python 3.10, todos ellos con soporte de seguridad y mejoras que le hacen un lenguaje cada vez más potente en el mundo. 

#### ¿Dónde se utiliza Python?
Entre los espacios donde Python es ampliamente usado podemos mencionar: 
1. **Data Analytics y Big Data.** Gracias a su simplicidad y el desarrollo de grandes herramientas para esta área, Python es uno de los lenguajes de programación más usados en el mundo del Big Data.
2. **Data mining.** La minería de datos o _data mining_ nos permite analizar grandes bases de datos con el objetivo de predecir futuras tendencias. Este es un proceso donde Python es uno de los lenguajes preferidos para ser usados en dicha tarea. 
3. **Data science.** Herramientas como “Pandas” o “NumPy”, permiten a los científicos, matemáticos y físico crear modelos de data science con el que trabajr de forma muy sencilla, desplazando herramientas como MATLAB y MAPLE.
4. **Inteligencia artificial.** Python cuenta con grandes frameworks diseñados para hacer de la IA algo no solo para desarrollar aplicaciones, sino también para desarrollar nuevos modelos y formas de extender este campo. 
5. **Blockchain.** En Blockchain, Python también se ha ganado un lugar especial, no solo permitiendo la creación de software de nodos y monederos, sino también permitiendo aprender de forma muy sencilla como funciona esta tecnología. 
6. **Machine learning.** El _machine learning_ o aprendizaje automático es otra de las tecnologías que está cambiando el mundo tal y como lo conocemos. La robótica y la IA son ahora capaces de aprender por sí mismas a medida que van procesando más y más datos. De esta forma, obtienen información cada vez más relevante que les permite tomar las decisiones adecuadas. Por supuesto, Python es también muy eficaz en este campo, en el tratamiento de datos eficaz es esencial.
7. **Desarrollo web.** Python también permite desarrollar webs complejas en menos líneas de código, lo que permite que estas sean más ligeras y optimizadas. Django es uno de los frameworks de Python más populares de la actualidad, que puede ser utilizado para crear webs dinámicas y muy seguras.
8. **Juegos y gráficos 3D.** Python también posee una gran capacidad para manejar gráficos 3D gracias la gran cantidad de marcos de trabajo y herramientas existentes. PyGame, Blender o Arcade son algunos de los más conocidos.

#### Instalando Python
Instalar Python es una tarea bastante sencilla, ya que está disponible para todos los grandes sistemas operativos conocidos, incluyendo Windows, GNU/Linux (donde viene por defecto), MacOS, FreeBSD, OpenBSD y otros derivados UNIX. 

En esta oportunidad, instalaremos Python 3.10para realizar nuestra primera prueba ente lenguaje. Para instalar solo debes buscar la web oficial de Python y su [sección de descarga](https://www.python.org/downloads/windows/):

![[237.E2_python_instalando.png]]

Nota: No es necesario instalar Python como administrador para usarlo, pero debes asegurarte de agregarlo al PATH del sistema en Windows.

Descargado el software, solo deberás hacer doble clic sobre el mismo y empezar la instalación.

![[237.E2_python_install.png]]

Una vez que comencemos la instalación asegúrate de seleccionar la opción “Add to Path” e instalar:

![[237.E2_add_path.png]]

Y con eso ya empezará el proceso de instalación:

![[237.E2_python_progress.png]]
  
Para probar que todo es correcto, solo deberás buscar Python en tu inicio y podrás iniciar la versión instalada. 

![[237.E2_version.png]]

Al hacer clic ya podrás iniciar el intérprete 

![[237.E2_interprete.png]]

### RPC en Bitcoin y Python
El software de Bitcoin Core, tiene una funcionalidad RPC muy potente que le permite interactuar con otros servicios y software por medio del mismo.

RPC es el acrónimo de Llamada a procedimiento remoto o Remote Procedure Call, y es una técnica que utiliza el modelo cliente-servidor para ejecutar tareas en un proceso diferente, como podría ser en una computadora remota. A veces solamente se le llama como llamada a una función o subrutina remota.

### ¿Cómo funciona la llamada a procedimiento remoto?
El funcionamiento de un RPC es bastante sencillo y puede sintetizarse en:
1. **El cliente hace la llamada al procedimiento remoto mediante un mensaje a través de la red.** Este se detiene, ya que es un proceso síncrono, es decir, necesita una respuesta del servidor para poder continuar su ejecución. En esta llamada se incluye un stub (o resguardo en español) el cual se encarga de ajustar parámetros y direcciones de memor**ia de un ambiente (el cliente) a otro (el servidor).**
2. **El servidor recibe la petición y desempaqueta el mensaje para extraer la información necesaria para realizar la tarea.** El stub ayuda a que el servidor sea capaz de convertir parámetros de una representación a otra (de ser necesario), para traducir direcciones de memoria de cliente a servidor, etc.
3. **El servidor ejecuta la tarea.**
4. **El servidor crea un mensaje de respuesta para el cliente en el que incluye el resultado de la tarea que este le pidió realizar.**
5. **El cliente recibe y desempaqueta el mensaje de respuesta del servidor.** Continúa con su ejecución normal.

En el caso de Bitcoin, el servidor es ejecutado por el software Bitcoin Core y debe ser configurado en dicho software. Una vez habilitado podemos conectarnos a este servidor y dar instrucciones remotas al nodo para que nos otorgue información o acceso a la red BTC por medio del mismo. 

### ¿Para qué se usa el modo RPC?
El modo RCP de Bitcoin Core es usado para que otro software o funcionalidades, puedan interactuar con el nodo de Bitcoin que tenemos instalado.

Por ejemplo, podemos ejecutar un nodo de Bitcoin con modo RPC activo y el monedero desactivado. Esto permite que tengamos un nodo Bitcoin funcional al que podemos acceder desde una aplicación que hará de wallet o monedero de nuestras criptomonedas, gestionando nuestras claves públicas/privadas desde un espacio más protegido, lo que es ideal para la seguridad, al agregar una capa adicional de software y seguridad en el manejo de nuestras criptomonedas. Esto es precisamente lo que hacen los exchanges, ya que, en estos, JAMÁS tienes acceso directo a los nodos, si no que realizar operaciones por medio de una API y una serie de capas de abstracción y seguridad que ayudan a sostener la seguridad de dicho Exchange. 

Otro uso del modo RPC es en la construcción de servicios más avanzados. Por ejemplo, los exploradores de bloque obtienen toda la información de la cadena de los nodos de Bitcoin por medio de RPC, información que es analizada y clasificada por el software del explorador y que luego es colocada en una base de datos para un acceso más rápido. 

Finalmente, otro uso del modo RPC es la construcción de sistemas de pago online descentralizados (como BTCPay) o la creación de nodos y servicios relacionados con Lightning Network, ya que estos dependen de este servicio para conectar con el nodo de Bitcoin y obtener información de la red para su trabajo en Layer2.

### Habilitando el modo RPC en Bitcoin Core
Habilitar el modo RPC en Bitcoin Core es bastante sencillo, todo lo que debes hacer es colocar estas líneas en el archivo bitcoin.conf de Bitcoin Core:
```
regtest=1
rpcuser=test
rpcpassword=test
rpcauth=test:5bde9441a7a40e1893364a85daf11dda$2c0b031c825ebefc4723c81f5f928be91bd29230d1bc80ee3823521dc0883a16
```

Esto le indica a Bitcoin Core (más específicamente a bitcoind) que debe iniciar una red interna (Regtest) con el usuario RPC “test” y la contraseña “test”, al cual se le agrega el parámetro de autorización (RPCAUTH) que está descrito (RPCAUTH, es el nuevo medio de conexión segura para los nodos Bitcoin Core por medio de RPC, más adelante RPCUSER y RPCPASSWORD, serán totalmente eliminados del soporte RPC de Bitcoin Core.

## U6. Lightning Network
### Lightning Network (Video)
![[539.E2_Lightning_Network.mp4]]
[Lightning Network](https://app.web3mba.io?wvideo=41qddtth6r)

¿Qué es Lightning Network? El protocolo Lightning Network es un protocolo ideado para mejorar la escalabilidad de Bitcoin. Siempre surge la cuestión de la escalabilidad. No obstante, la escalabilidad realmente es algo que es necesario, pero solo cuando lo es, no antes. Al final, se habla de que es necesario que el protocolo X, nuevamente Bitcoin, tenga que ser escalable. Bueno, pero tiene que ser escalable cuando realmente esto sea necesario. Hoy en día, enviar una transferencia a través de la red de Bitcoin puede costar entre medio euro y dos euros. Entonces, realmente, los bloques no están llenos, de modo que no es demasiado importante que se alcance una mayor escalabilidad. Al menos, no hoy. Claro, cuanto más va creciendo la red, más necesario es dicha escalabilidad. Pero, como digo, es algo que es necesario cuando lo es.

Lightning Network trabaja como una segunda capa sobre Bitcoin, una que permite a Bitcoin realizar cosas que normalmente no podría y, más específicamente, transacciones instantáneas y con muy bajas comisiones. El desarrollo de este protocolo comenzó con los trabajos de Joseph Poon y Thaddeus Dryja, pero en la actualidad son empresas como Blockstream, Lightning Labs, Async, entre otras, quienes impulsan su desarrollo. El white paper de este desarrollo se puede encontrar en un enlace en su página web. Para entender un poco el potencial de esta tecnología, debemos tener presente dos cosas. La primera es que Bitcoin se creó como una solución de dinero digital. La segunda es que ese objetivo es hoy en día imposible si observamos el estado actual de la red y cómo funciona el software de Bitcoin. La razón de esto es muy sencilla: Bitcoin tiene un problema para escalar. En la actualidad, Bitcoin solo puede procesar de 7 a 8 transacciones por segundo. Esta es una capacidad muy pequeña que no puede hacer frente a las soluciones fiat, como Visa o Mastercard. Por esta razón, se entendía necesario encontrar una nueva forma de realizar transacciones de forma rápida, que fuera sencilla de utilizar y compatible con Bitcoin sin hacer grandes modificaciones. La respuesta a estas necesidades y más fue Lightning Network, protocolo del cual aprenderemos un poco más a continuación.

¿Por qué se necesita mejorar esta escalabilidad o por qué se entiende que es necesaria? Si Bitcoin tiene una red tan poderosa y extensa, entonces, ¿por qué debe mejorar esta función? La respuesta corta es que al mejorar la escalabilidad, las transacciones se realizan de forma más rápida y con menos coste. Para explicar la respuesta de forma más extensa, hagamos este pequeño ejercicio. Imagina que hay una transacción en Bitcoin que realizas tú. En ese momento, la red Bitcoin tiene muy poco uso y el coste en comisiones de esa transacción es muy pequeño. Sin embargo, el coste de las comisiones puede aumentar debido a que el uso de la red aumente. Esto se debe a que se genera una cola o un exceso de transacciones en la mempool. Como comentaba, cuantas más transacciones intentan incluirse en el bloque, más se incrementa el coste de la transacción; más hay que pagar para entrar en dicho bloque. Es ahí cuando los mineros suelen priorizar las transacciones con mayor pago de comisiones para obtener así más ganancias. De esa manera, si deseas que una transacción sea procesada de forma rápida, entonces tendrás que pagar más en comisiones. Pero este último caso también nos indica que los costes de las comisiones aumentarán hasta el punto de no permitirnos hacer micropagos. Por ejemplo, enviar un dólar puede resultar más caro que un dólar, de modo que es una situación totalmente sin sentido que la mejora de escalabilidad podría solucionar. De ahí la necesidad de mejorar esta función o esta capacidad en Bitcoin, donde Lightning Network ofrece una solución perfecta para dicho problema, permitiendo operaciones con costes mínimos, gran velocidad y seguridad.

Habiendo dicho esto, es importante entender que el dinero, en general, funciona en capas. Aquí me refiero a capas. Incluso en el momento en que el oro era el dinero más usado, el oro estaba en la base y, para escalar el oro, la gente no iba con oro por ahí, sino que usaba certificados de oro, que era lo que movía el dinero papel; ese es el comienzo del dinero papel. Así teníamos en la base el oro y sobre él teníamos el dinero papel. Ahora, la idea sería tener Bitcoin en la base y, sobre la blockchain base de Bitcoin, tendríamos una capa como Lightning Network. Ahora, esto funciona de manera muy similar a los tesoros del banco central americano. Tendríamos tesoros en la base y, por encima de los tesoros, tendríamos dinero fiat.

En 2021, para que veamos un poco el contexto de la capacidad de escalabilidad supuesta de Bitcoin, en ese año Bitcoin movió 3 trillones de valor. Es decir, en la capa base, movió 3 trillones de valor, solo por debajo de Visa y Mastercard, creciendo a un ritmo mucho mayor que estas. O sea que, si bien se dice que Bitcoin debe ser más escalable, nos referimos aquí a la rapidez solamente, pues, en cuanto a valor movido, Bitcoin puede mover mucho más valor que soluciones muy escalables como pueden ser Visa y Mastercard. Y estos números así lo reflejan. De hecho, el problema muchas veces al hacer transferencias en otros sistemas en esa capa base se ve en ejemplos como el de una transferencia que está todavía pendiente de oro, que tiene que ir de Reino Unido a Austria, que se inició en 2015 y que aún no se ha completado. Así que esas transferencias en la base son complejas. Claramente, las transacciones en la base de Bitcoin solo tardan 10 minutos, no 7 años.

Hablemos un poco de la seguridad de Lightning Network. En cuanto a la seguridad, existe un paper publicado en 2019 que realiza un análisis bastante técnico sobre la robustez de este desarrollo. Sus autores, Aquelos Clagias y Orfeas Stefanos Tirofinitis, realizaron un exhaustivo examen sobre la seguridad de la red Lightning y su resultado fue un documento de 84 páginas que puedes consultar. Dentro de las conclusiones, se entendía que Lightning Network ofrece las suficientes garantías para evitar la pérdida de Bitcoin en dicha red y que la seguridad de la red es un gran beneficio. Al mismo tiempo, indica que el protocolo puede ser aceptado o adaptado a distintas redes que necesiten de sus capacidades. No obstante, tampoco nos quedamos en un paper; al final, la importancia de Lightning es que, como es un código abierto, mucha gente está desarrollando sobre él, lo que permite escalar con un riesgo muy bajo.

Hablemos un poco de las ventajas de Lightning, aunque ya hemos cubierto algunas de ellas. En primer lugar, Lightning ofrece una de las opciones más poderosas para mejorar la escalabilidad de Bitcoin. Lightning puede llevar a Bitcoin hasta niveles cercanos a un millón de transacciones por segundo, mucho más que lo que manejan sistemas de pago como Visa o Mastercard. En segundo lugar, ofrece altos niveles de seguridad y anonimato, siendo esta parte muy importante, y esto se debe a que las transacciones ocurren off-chain, es decir, fuera de la cadena, por lo que los pagos son prácticamente imposibles de rastrear. Además, Lightning es compatible con otros proyectos de criptomonedas como pueden ser Litecoin u otros. En cuarto lugar, Lightning es capaz de reducir enormemente el nivel de tráfico de transacciones dentro de la red Bitcoin, lo que permite que esa red funcione de manera más eficiente. Las transacciones usando Lightning Network se realizan de forma casi instantánea, lo que permite la realización de micropagos e incluso la automatización de los mismos. También existe la capacidad de realizar intercambios atómicos cross-chain, es decir, entre cadenas, y esto facilita que dos cadenas de bloques que usen esta función puedan intercambiar tokens sin necesidad de un intermediario, como podría ser una bolsa.

También hay, claro, desventajas. Una de las principales es que los pagos solo pueden realizarse a usuarios que estén conectados a un canal de pago. Esto quiere decir que el usuario debe estar activo y conectado al canal. Las transacciones de criptomonedas tradicionales no tienen esta limitación. Lightning es un protocolo que está en constante desarrollo y esto es importante tenerlo en cuenta. Prueba de ello es que sus creadores aún recomiendan no usar esta red para operaciones con altas sumas de dinero. Es un protocolo que también limita la liquidez del canal al total de criptomonedas que sostienen todas las partes. Esta es otra situación que atenta contra las operaciones de alto valor, pues lleva a los usuarios a dividir sus fondos para tener liquidez en la blockchain normal y en los canales Lightning.

¿Cómo funciona la Lightning Network? Para entender cómo funciona, lo mejor es desarrollar o desglosar paso a paso todo su proceso de funcionamiento. Por esta razón, te explicaremos con un sencillo ejercicio cómo se realiza este proceso junto a otros puntos de interés para despejar así todas tus dudas. En primer lugar, dentro de Lightning tendremos dos participantes que crearán una transacción inicial en la cadena de bloques, pongamos 20 dólares. De esos 20 dólares, 10 serán de Carmen, el participante número 1, y 10 de Aitor, el número 2. Este reparto podría ser distinto y puede variar dentro del canal que mencionamos anteriormente, por lo que Carmen podría tener 15 y Aitor 5. Al final, en este caso, serían 20. Lo que Lightning hace es tomar la tecnología tras los canales de pago y crear una red que los conforma utilizando smart contracts para asegurarse de que la red pueda funcionar de forma descentralizada. En este sentido, nos quedaría el siguiente desglose del proceso. Carmen abriría un canal de pago con Aitor, que a su vez tiene un canal con Laura, que a su vez tiene un canal abierto con David. Entonces, hablamos de estas cuatro partes participando en distintos canales de pago o Payment Channels. Carmen, como decíamos, quiere intercambiar activos con David, por lo que podrá enviar fondos a través de Aitor y Laura para que lleguen en última instancia a David, que es el receptor. Debido a la naturaleza de la Lightning Network, Carmen no tendría por qué confiar en Aitor y Laura dentro del proceso, ya que se usa la criptografía para asegurarse de que los fondos que recibirá David serán exactamente los mismos que ha mandado Carmen. Si no, se devolverán de forma automática a Carmen.

Ahora bien, nos quedamos con una serie de preguntas que son muy importantes y que debemos responder. ¿Cómo es posible confiar en este tercer paso? ¿Qué sucede con la disponibilidad? ¿Y cómo se combate el posible engaño? Bien, ¿cómo es posible confiar en ese paso 3? En realidad, Aitor y Laura actúan como nodos dentro de la red que podemos equiparar a los mineros de la red Bitcoin. Esto gracias a que ellos procesan de forma descentralizada todas las transacciones sin tener control de los fondos que ayudan a mover. Por esa razón, en ningún momento Aitor y Laura podrían robar los fondos de Carmen, ya que tan solo se recibirán los fondos a enviar si ya se ha realizado la transacción de salida al receptor final, que en este caso, como decíamos, es David.

¿Qué sucede con la disponibilidad? Como decíamos, si Aitor se desconecta, los fondos del canal no quedarían indefinidamente atrapados en él, sino que dentro del mecanismo de smart contract de Lightning, los usuarios pueden cerrar de forma unilateral los canales. De esta forma, si Aitor desapareciera, Carmen podría recuperar su dinero de nuevo gracias al atributo de tiempo añadido en el contrato. Cuando un canal se cierra, a la vez, tras haberse realizado un número indefinido de transacciones en él, los fondos finales de cada parte constarán en la blockchain en 10 minutos o en la blockchain base, o lo que tarden en aparecer en la red.

¿Cómo se combate entonces el engaño? Bueno, si Carmen enviara fondos de su dirección multifirma a David en la Lightning Network pero no cumple y lo que hace es emitir una transacción antigua en la blockchain para cerrar el canal en el estado en el que estaba antes de enviar la transacción a David, el propio software, en búsqueda de este tipo de acciones, hará que Carmen pierda todos sus fondos enviados a David. Esto se hace así como penalización a tal acción, por lo que todo aquel que intente transmitir una transacción antigua e inválida será penalizado. Gracias a esta red de canales persona a persona, es posible encontrar un patrón dentro de la red para poder transmitir transacciones fuera de la cadena de bloques. Todo ello sin perder la confianza de que posteriormente, y tras cerrarse el canal, constará dentro de la blockchain.

Como hemos visto a lo largo de la historia de la explicación de este ejemplo, la importancia es tener saldos en esos canales, pues si la transacción empieza en el lado A con Aitor, David, Carmen, Laura, da igual, y quiere enviar a otra persona que está al otro extremo del canal, lo que hará falta será ir pasando por diferentes canales que tendrán que tener suficiente saldo para poder irlo moviendo de un lado a otro, para que finalmente llegue al último receptor. Esto habla de la importancia de los saldos y de su mantenimiento; puede ocurrir que si se pasa mucho saldo de un extremo a otro, luego no haya suficiente saldo en el extremo inicial para poder permitir otro nuevo salto. Entonces hay que tratar de mover de nuevo ese saldo que está en un lado al principio del canal. Y para esto hay empresas que están surgiendo ya que gestionan el mantenimiento de estos canales.

Lightning ha crecido enormemente en los últimos meses; concretamente, 2021 también ha sido su año de mayor crecimiento, y esto gracias a que han surgido muchos más canales, permitiendo así que se produzcan estos pagos descentralizados sobre una segunda capa de Bitcoin de manera sencilla y con todas las características y ventajas que ofrece Lightning y que hemos visto. Cubramos el software o varios tipos de software usados para la Lightning Network. Empecemos con el LNP Node o LNP Node. LNP Node es un nuevo nodo de Lightning Network escrito en Rust. Es un conjunto de microservicios capaces de ejecutar tanto la red de Lightning, tal y como está definida en los estándares Bolt, como el Lightning generalizado, con nombre en código Bifrost, una refactorización completa de los protocolos de la red que soporta Taproot, firmas Schnorr, activos RGB y demás servicios como los DLCs, canales multipares, fábricas de canales, composibilidad de canales y muchas otras características tan avanzadas. El nodo LNP funciona con protocolos de red de Internet2 y una arquitectura de microservicios especialmente diseñada.

El ENP o Lightning Network Protocol es la unificación de la red Lightning normal o la heredada y de Bifrost, como decimos. Por su parte, Internet2 es un conjunto de buenas prácticas para utilizar los protocolos existentes en las comunicaciones de red, preservando la mayor parte de la privacidad y el anonimato. Soporta tanto operaciones peer-to-peer como RPC, que son entre cliente y servidor, y representa comunicaciones encriptadas para P2P y 0MQ, encriptado también para comunicaciones cliente-servidor. Esto permite evitar los escollos más comunes con las autoridades de certificación centralizada o los protocolos JSON, XML, RPC o de servicios web de baja eficiencia en texto plano. La capa peer-to-peer es un extracto de Bolt 8 y parcialmente de Bolt 1, ampliado para soportar mensajería arbitraria, RPC, peer-to-peer y APIs de publicación y suscripción sobre TCP-IP. Es 100% compatible con Lightning, pero permite mucho más que los usos actuales de Lightning. El protocolo se define como un conjunto de normas que son extensiones estrictas de Bolt. En otras palabras, con este protocolo se puede hacer una mensajería arbitraria y construir sistemas distribuidos complejos sin autoridad central, por lo que la asociación LNP-BP la utilizamos en todas partes, incluso para las comunicaciones internas de Lightning entre microservicios.

Bifrost es una forma de definir los canales de pago de forma modular y extensible, de manera que se puedan añadir fácilmente nuevas salidas de transacciones a las transacciones de compromiso, cambiar pagos, usar Taproot y hacer mucha experimentación sin inventar nuevos mensajes y estándares cada vez. Dentro de las funciones de LNP podemos describir unas pocas. Por ejemplo, ofrece la capacidad de crear nodos que permiten actualizar de forma segura el protocolo mediante la creación de microservicios y módulos que se pueden añadir al nodo con el fin de extender sus funcionalidades según sean requeridas. También permite la creación de protocolos sobre Lightning en una capa 3, como sería RGB o DLC. Está preparado para el móvil, para la nube, para la web, gracias a una arquitectura de microservicios especialmente diseñada. Permite la dockerización, ofrece soporte para 0MQ, añade soporte para implementar canales bidireccionales y otra serie de características que podéis analizar en más detalle.

Pasemos ahora a tratar Core Lightning o C-Lightning. Core Lightning es uno de los softwares para nodos de Lightning Network que ha estado en uso desde su producción en la red principal de Bitcoin desde principios de 2018 y que está en manos de Blockstream, una de las principales empresas del sector centrada en el desarrollo de Bitcoin. Escrito en el lenguaje de programación C, que ofrece a los desarrolladores un alto grado de control sobre el comportamiento de su código, incluso a bajo nivel, CLN tiene un enfoque en la eficiencia, así como en proporcionar a los desarrolladores y usuarios una implementación modular basada en plugins de protocolo de escalamiento en la capa 2 de Bitcoin. Core Lightning solo funciona en Linux y en Mac y requiere una versión local o remota de Bitcoin. El proceso de instalación de la versión local de Bitcoin es muy sencillo; solo se necesita un código de la versión local y el código de la versión local de Bitcoin es el mismo que el de la versión local. Superior, 0.16 o superior, es decir, necesita un nodo de Bitcoin Core instalado, como os comenté antes, y que esté completamente al día con la red en la que el usuario está ejecutando y retransmitiendo las transacciones. Al ser una implementación ligera, CLN permite un gran nivel de personalización, ya que ofrece al usuario hacer lo suyo y añadir solo las características que quiera o necesite. La modularidad, la eficiencia y la solidez del código de CLN también tienen sus inconvenientes, por otra parte. De hecho, sus desarrolladores se han ceñido mucho a la filosofía llamada KISS, Keep it simple, stupid, y UNIX, Do one thing and keep it right. De allí que el protocolo sea extremadamente sencillo y robusto, lo que agrega una gran capa de seguridad y permite la construcción de aplicaciones sobre el mismo para que puedan disfrutar de dichas habilidades. Si bien en seguridad y utilidad C-Lightning es excelente, a nivel de uso para usuarios nóveles puede ser todo un reto. Sin embargo, la implementación de Blockstream se centra en gran medida en el proceso de especificación y genera gran parte de su código a partir de las especificaciones Bolt directamente. Si bien esto garantiza una implementación totalmente compatible con las especificaciones, el equipo dispone de menos tiempo para comercializar su trabajo e identifica esto como la razón por la que ve menos participación de la comunidad en este sistema que en otros. Por otro lado, dada su eficiencia y ligereza, CLN es probablemente la implementación más adecuada para los dispositivos de baja especificación. El equipo de Blockstream también ha desarrollado un conjunto de nuevas características que amplían la funcionalidad actual de Volt, que como hemos dicho es lo que usan, y que suelen ser borradores de especificaciones o propuestas de especificaciones como la apertura de canales colaborativos, los anuncios de liquidez y Volt 12. CLN ofrece al usuario la posibilidad de probar estas próximas especificaciones. Por ejemplo, la apertura de canales colaborativos, antes llamados canales de financiación dual, permite a los participantes abrir un nuevo canal de forma colaborativa, financiando conjuntamente la transacción de financiación del canal. Actualmente, los canales se abren con una transacción de financiación unilateral, es decir, por una persona, pero estos canales permitirían hacerlo en colaboración y también al mismo tiempo permitirían hacer coin joins. Los Coin Joins, como sabemos, permiten dificultar la trazabilidad de las monedas. También se puede hacer uso de los anuncios de liquidez que aprovechan la apertura de canales de colaboración. Según una entrada del blog de Blockstream, son una forma ligera de proporcionar la capacidad de coordinar el despliegue de liquidez en toda la red, de forma descentralizada y accesible. Esta es una característica que intenta resolver un problema común en Lightning, que es la liquidez entrante.

Por otra parte, tenemos la Lightning Network Daemon, o sea, tenemos aquí la LND, una implementación completa de un nodo de la red Lightning. LND tiene varios servicios de cadena backend enchufables, incluyendo BTCD, un nodo completo, Bitcoin NDI y Neutrino, un nuevo cliente ligero experimental. El código base del proyecto utiliza el conjunto BTC Suite de bibliotecas Bitcoin y también exporta un gran conjunto de bibliotecas aisladas reutilizables relacionadas con la red Lightning dentro de ella. En el estado actual, el LND es capaz de hacer una serie de cosas como crear canales, cerrar canales, gestionar completamente todos los estados de los canales, realizar la búsqueda de rutas dentro de la red, reenviando pasivamente los pagos entrantes. También permite cosas como el envío de pagos salientes encriptados, actualizar las tarifas dentro de los canales. En general, un montón de cosas, una serie de capacidades que permiten la mayor facilidad en la gestión de dichos canales, que como hemos dicho siempre es uno de los principales escollos a la hora de gestionar tu propio canal de Lightning.

Bien, entonces, como hemos visto, hay diferentes softwares que tratan de solucionar o de facilitar la tarea de manejar un canal en Lightning y de usar esta segunda capa de Bitcoin, cuyo objetivo es, como hemos dicho, permitir una mayor escalabilidad. Al final, me remito a lo dicho al principio, y es que la escalabilidad es algo que se trabajará. En función de la necesidad del usuario de usar dicha escalabilidad, se irán dedicando más recursos por parte del mundo entero en mejorar. Y como hemos visto, ya hay varias implementaciones que usan distintos sistemas para permitir esto, y en los siguientes años lo único que nos queda esperar es que estas soluciones se vayan incluso mejorando y permitiendo su uso de manera aún más sencilla para los usuarios. Así que es un sector a tener en cuenta y esperar que vaya mejorando.

### ¿Qué es Lightning Network?
Es un protocolo ideado para mejorar la escalabilidad de Bitcoin que trabaja como una segunda capa sobre Bitcoin.

Permite a BTC realizar cosas que normalmente no podría y más específicamente, transacciones instantáneas y con muy bajas comisiones.

El desarrollo de este protocolo comenzó con los trabajos de Joseph Poon y Thaddeus Dryja. Pero en la actualidad son empresas como Blockstream, Lightning Labs y ACINQ, entre otros, quienes impulsan el desarrollo del mismo. El whitepaper de este desarrollo se puede encontrar en el enlace de su página web principal.

Para entender un poco el potencial de esta tecnología, debemos tener presentes dos puntos: 
1. Bitcoin se creó como una solución de dinero digital. 
2. Ese objetivo es imposible de alcanzar en el estado actual de la red y el software Bitcoin. 

> El motivo de esto es muy sencillo: Bitcoin tiene problemas para escalar. 

En la actualidad, Bitcoin solo puede procesar de 7 a 8 transacciones por segundo. Esta es una capacidad muy pequeña y que no puede hacer frente a las soluciones fiat como Visa o Mastercard. 

Por esta razón se entendía necesario una nueva forma de realizar transacciones de forma rápida, que fuera sencilla de utilizar y compatible con Bitcoin sin hacer grandes modificaciones. La respuesta a estas necesidades y más es Lightning Network, protocolo del cual aprenderemos un poco más a continuación.

#### ¿Por qué se necesita mejorar la escalabilidad de Bitcoin?
**Respuesta corta:** Al mejorar la escalabilidad, las transacciones se hacen de forma más rápida y son menos costosas.

Para explicar la respuesta de forma larga hagamos este pequeño ejercicio. 

- **Imagina que has realizado una transacción en Bitcoin.** En ese momento la red Bitcoin tiene muy poco uso y el costo en comisiones de cada transacción es muy pequeño.
- **Sin embargo, el coste de las comisiones puede aumentar debido a que el uso de la red aumenta.** Esto se debe a que se genera una cola o exceso de transacciones en la _mempool_. Es allí, cuando los mineros suelen priorizar las transacciones con mayor pago de comisiones para obtener más ganancias. De esa forma, si deseas que una transacción sea procesada de forma rápida, entonces tendrás que pagar más en comisiones.

Pero este último caso nos indica también que los costos de las comisiones aumentarán hasta el punto de no permitirnos hacer micro pagos. Por ejemplo, enviar 1 dólar puede resultarnos en más de 1 dólar por el coste de la comisión. Esta es una situación sin sentido y que la mejora de escalabilidad puede solucionar, de allí la necesidad de mejorar esta característica en Bitcoin y donde Lightning Network ofrece una solución perfecta para el problema, permitiendo operaciones con costos mínimos, gran velocidad y seguridad. 

#### Seguridad de Lightning Network
Al respecto de la seguridad, existe un _paper_ publicado en 2019 que realiza un análisis bastante técnico sobre la robustez de este desarrollo.

Los autores, Aggelos Kiayias y Orfeas Stefanos Thyfronitis Litos realizaron un exhaustivo examen sobre la seguridad de la red Lightning y el resultado del mismo es un documento de 84 páginas que puedes [consultar](https://eprint.iacr.org/2019/778.pdf).

El resultado de dicho estudio es tranquilizador, ya que indica que la red Lightning Network ofrece las suficientes garantías para evitar la pérdida de BTC en la red, y al mismo tiempo, indica que el protocolo puede ser adaptado a distintas redes que necesiten de sus capacidades, con mucha facilidad.

#### Ventajas y desventajas de Lightning Network
##### Ventajas
1. **Ofrece una de las más poderosas opciones para mejorar la escalabilidad de Bitcoin.** Lightning puede llevar a Bitcoin hasta niveles cercanos a 1 millón de transacciones por segundos, mucho más que las manejadas por sistemas de pago como VISA o MasterCard.
2. **Ofrece altos niveles de seguridad y anonimato.** Esto debido a que las transacciones ocurren off-chain por lo que los pagos son prácticamente imposibles de rastrear.
3. **Lightning es compatible con otros proyectos de criptomonedas, además de Bitcoin.** Por ejemplo, es posible usar Lightning con Litecoin. 
4. **Es capaz de reducir enormemente el nivel de tráfico de transacciones dentro de la red Bitcoin.** Esto haría que la red funcione de forma mucho más eficiente.
5. **Las transacciones usando Lightning Network se realizan de forma casi instantánea.**
6. **Permite la realización de micropagos,** permitiendo incluso la automatización de los mismos.
7. **Habilita la capacidad de realizar intercambios atómicos _cross-chain_.** Esto permite que dos cadenas de bloques que usen la misma función hash, puedan intercambiar tokens sin necesidad de un intermediario como un Exchange.

##### Desventajas
1. **Los pagos solo pueden realizarse a usuarios que estén conectados a un canal de pago.** Esto quiere decir, que el usuario debe estar activo y conectado al canal. Las transacciones de criptomonedas tradicionales no tienen esta limitación.
2. **Es un protocolo que está en constante desarrollo.** Prueba de ello, es que sus creadores aún recomiendan no usar Lightning para operaciones con altas sumas de dinero.
3. **El protocolo limita la liquidez del canal al total de criptomonedas que sostienen todas las partes.** Esta es otra situación que atenta contra las operaciones de alto valor, pues lleva a los usuarios a dividir sus fondos para tener liquidez en la blockchain normal y en los canales Lightning.

### ¿Cómo funciona Lightning Network?
Para entender cómo funciona Lightning Network lo mejor es desglosar paso a paso todo su proceso de funcionamiento.

Por esa razón te explicaremos, con un sencillo ejercicio, como se realiza este proceso junto a otros puntos de interés para despejar dudas.

- Dentro de Lightning tendremos dos participantes que crearán una transacción inicial en la cadena de bloques de 20$. 
- De esos 20$, 10$ serán del Usuario A y 10$ del Usuario B. 
- Este reparto podría ser distinto y puede variar dentro del canal que mencionamos anteriormente, por lo que el Usuario A podría tener 15$ y el Usuario B 5$, al final de todos los intercambios.

Lo que Lightning hace es tomar la tecnología tras los canales de pago y crear una red que los conforma utilizando smart contracts para asegurarse de que la red puede funcionar de forma descentralizada.

#### Ejemplo básico del funcionamiento de Lightning Network
El proceso sería el siguiente:
1. Un usuario A abre un canal de pago con un usario B, quien tiene un canal abierto con un usario C y este tiene un canal abierto con un usuario D.
2. Ahora mismo tenemos 4 partes participando en distintos canales de pago o _payment channels_.
3. **A quiere intercambiar activos con D,** por lo que podrá enviar fondos a través de B y C para que lleguen en última instancia a D, el receptor.
4. Debido a la naturaleza de la Lightning Network, A no tendría por qué confiar en B y C dentro del proceso, ya que se usa la criptografía para asegurarse de que los fondos que recibirá D serán exactamente los mismos que ha mandado A. Si no es así, se devolverán de forma automática al usuario A.

Ahora bien, nos quedamos con una serie de preguntas que son muy importantes responder: 
- ¿Cómo es posible confiar en el paso 3?
- ¿Qué sucede con la disponibilidad?
- ¿Cómo se combate el engaño?

#### ¿Cómo es posible confiar en el paso 3?
En realidad, B y C actúan como nodos dentro de la red que podemos equiparar a los mineros de la red Bitcoin. 

Esto sucede gracias a que ellos procesan de forma descentralizada todas las transacciones sin tener control de los fondos que ayudan a mover.

Por esa razón, en ningún momento B y C podrían robar los fondos de A, ya que tan solo se recibirán los fondos a enviar si ya se ha realizado la transacción de salida al recipiente final que en este caso es D.

#### ¿Qué sucede con la disponibilidad?
Si B se desconecta, los fondos del canal no quedarían indefinidamente atrapados en él, sino que dentro del mecanismo de Smart Contract de Lightning Network, los usuarios pueden cerrar de forma unilateral los canales. 

De esta forma, si B desapareciera, A podría recuperar su dinero de nuevo gracias al atributo de tiempo añadido en el contrato.

Cuando un canal se cierre a la vez tras haberse realizado un número de intercambios indefinido en él, los fondos finales de cada parte constarán en la Blockchain en 10 minutos o lo que tarde en aparecer el próximo bloque de la red.

#### ¿Cómo se combate el engaño?
1. Imaginemos que A envía fondos de su dirección multifirma a D en la Lightning Network.
2. El usuario A no cumple con lo pactado, sino que emite una transacción antigua en la Blockchain para cerrar en canal en el estado en el que estaba antes de enviar la transacción a D.
3. En este caso, el propio software, que localiza este tipo de comportamientos, hará que A pierda todos sus fondos enviados a D.
4. Esto es una penalización por intentar enviar una transacción antigua

Gracias a esta red de canales persona a persona es posible encontrar un patrón dentro de la red por el que poder transmitir transacciones fuera de la cadena de bloques sin límites. 

Todo ello sin perder la confianza de que posteriormente y tras cerrarse el canal constará dentro de la Blockchain Bitcoin.

### Software para Lightning Network
1. LNP Node
2. Core Lightning (C-Lightning)
3. LND

#### 1 | LNP Node 
Es un nuevo nodo de Lightning Network escrito en Rust. 

Es un conjunto de microservicios capaces de ejecutar tanto la Red de Lightning (LN) tal y como está definida en los estándares BOLT como el Lightning generalizado con nombre en código "Bifrost": una refactorización completa de los protocolos de la red que soporta Taproot, firmas Schnorr, activos RGB (un estándar para el diseño de tokens y Smart Contracts avanzados sobre LN/Bitcoin), DLCs, canales multipares, fábricas de canales, composibilidad de canales y muchas otras características avanzadas. El nodo LNP funciona con protocolos de red de Internet2 y una arquitectura de microservicios especialmente diseñada.

Lightning Network Protocol es la unificación de la red Lightning "normal" (o "heredada") y de Bifrost.

Por su parte, Internet2 es un conjunto de buenas prácticas para utilizar los protocolos existentes en las comunicaciones de red, preservando la mayor parte de la privacidad y el anonimato. Soporta tanto operaciones P2P como RCP (cliente-servidor) y representa comunicaciones encriptadas Noise_XK (en lugar de SSL/TLS) para P2P y ZeroMQ encriptado para comunicaciones cliente-servidor. Esto permite evitar los escollos más comunes con las autoridades de certificación centralizadas o los protocolos JSON, XML RPC o de servicios web de baja eficiencia en texto plano. 

La capa P2P es un extracto de BOLT-8 y, parcialmente, de BOLT-1, ampliado para soportar mensajería arbitraria, RPC, P2P y APIs de publicación y suscripción sobre TCP/IP, TCP/Tor, UDP, ZeroMQ y canales de comunicación de alta latencia (redes de malla/satélite) con cifrado de extremo a extremo. Es 100% compatible con LN, pero permite mucho más que los usos actuales de LN. El protocolo se define como un conjunto de normas LNPBP15-19, que son extensiones estrictas de BOLT. En otras palabras, con este protocolo se puede hacer una mensajería arbitraria (y construir sistemas distribuidos complejos sin autoridades centrales), por lo que la Asociación LNP/BP la utilizamos en todas partes, incluso para las comunicaciones internas entre microservicios.

Bifrost es una forma de definir los canales de pago de forma modular y extensible, de manera que se pueden añadir fácilmente nuevas salidas de transacciones a la transacción de compromiso, cambiar de pagos HTLCs a PTLCs, usar Taproot y hacer mucha experimentación sin inventar nuevos mensajes y estándares cada vez.

##### Funciones de LNP
LNP ofrece la capacidad de crear nodos que permiten:
1. Actualizar de forma segura el protocolo, por medio de la creación de microservicios y módulos que se pueden añadir al nodo con el fin de extender sus funcionalidades según sean requeridas. 
2. Permite la creación de protocolos sobre LN (capa 3), como RGB, DLCs o el protocolo propuesto Lightspeed, que requieren una modificación en la estructura de la transacción de compromiso, sin que ello requiera una refactorización del código base del protocolo. 
3. Está preparado para el móvil, la nube y la web, gracias a una arquitectura de microservicios especialmente diseñada. 
4. Permite la _dockerización_ para la escalabilidad en cuanto a procesos separados (escalabilidad por canal, etc.)
5. Ofrece soporte para ZeroMQ rápido y eficaz para APIs e IPCs.
6. Añade soporte para implementar:
	- Canales bidireccionales
	- Fábricas de canales/canales multipartitos;
	- Puntos de pago;
	- DLCs en LN;
	- Contratos inteligentes RGB (sistema de contratos inteligentes validados por el cliente);
	- Future Storm - canales de estado de almacenamiento y mensajería;
	- Future Prometheus - canales de estado de computación de alta carga;
	- Protocolo de pago Lightspeed;
	- Schnorr's/Taproot.

#### 2 | Core Lightning (C-Lightning)
También conocido como CLN, es uno de los softwares para nodos Lightning Network que ha estado en uso de producción en la red principal de Bitcoin desde principios de 2018 y que está en manos de Blockstream, una de las principales empresas del sector que está centrada en el desarrollo de Bitcoin.

Escrito en el lenguaje de programación C, que ofrece a los desarrolladores un alto grado de control sobre el comportamiento de su código, incluso a bajo nivel, CLN tiene un enfoque en la eficiencia, así como en proporcionar a los desarrolladores y usuarios una implementación modular, basada en plugins, de protocolo de escalamiento de la capa 2 de Bitcoin.

Core Lightning solo funciona en Linux y MacOS, y requiere una versión local o remota de bitcoind 0.16 o superior (es decir, necesita un nodo de Bitcoin Core instalado) que esté completamente al día con la red en la que el usuario está ejecutando y retransmita las transacciones. 

> Al ser una implementación ligera, CLN permite un gran nivel de personalización, ya que permite al usuario hacerlo suyo y añadir solo las características que quiera o necesite.

La modularidad, la eficiencia y la solidez del código de CLN también tiene sus inconvenientes. De hecho, sus desarrolladores se han ceñido mucho a la filosofía KISS (Keep In Simple Stupid) y UNIX (Do one thing, and do it right). De allí que el protocolo sea extremadamente sencillo y robusto, lo que agrega una gran capa de seguridad y permite la construcción de aplicaciones sobre el mismo para que puedan disfrutar de esas habilidades. Si bien en seguridad y utilidad, C-Lightning es excelente, en cuanto a uso para usuarios noveles puede ser todo un reto aprender la gestión del software. 

Sin embargo, la implementación de _Blockstream_ se centra en gran medida en el proceso de especificación y genera gran parte de su código a partir de las especificaciones BOLT directamente. Si bien esto garantiza una implementación totalmente compatible con las especificaciones, el equipo dispone de menos tiempo para comercializar su trabajo e identifica esto como la razón por la que ve menos participación de la comunidad y de los nodos que otras implementaciones.

Por otro lado, dada su eficiencia y ligereza, CLN es probablemente la implementación más adecuada para los dispositivos de baja especificación. 

Por otra parte, el equipo de Blockstream también ha desarrollado un conjunto de nuevas características que amplían la funcionalidad actual de BOLT, que suelen ser borradores de especificaciones o propuestas de especificaciones, como la apertura de canales colaborativos, los anuncios de liquidez y BOLT 12. CLN ofrece al usuario la posibilidad de probar estas próximas especificaciones.

Por ejemplo, la apertura de canales colaborativos, antes llamados "canales de financiación dual", permite a los participantes abrir un nuevo canal de forma colaborativa financiando conjuntamente la transacción de financiación del canal. Actualmente, los canales se abren con una transacción de financiación unilateral por parte de un participante. Las aperturas de canales en colaboración también permiten los CoinJoins distribuidos en un canal abierto de Lightning (qué es un CoinJoin).

También se puede hacer uso de los anuncios de liquidez que aprovechan la apertura de canales de colaboración. Según una entrada del blog de Blockstream: 

> "Son una forma ligera de proporcionar la capacidad de coordinar el despliegue de liquidez en toda la red de forma descentralizada y accesible"

Esta es una característica que intenta resolver un problema común en Lightning: la liquidez entrante.

#### 3 | Lightning Network Daemon - LND
Es una implementación completa de un nodo de la Red Lightning. 

LND tiene varios servicios de cadena back-end enchufables, incluyendo btcd (un nodo completo), bitcoind, y neutrino (un nuevo cliente ligero experimental). El código base del proyecto utiliza el conjunto btcsuite de bibliotecas Bitcoin, y también exporta un gran conjunto de bibliotecas aisladas reutilizables relacionadas con la Red Lightning dentro de ella. 

En el estado actual, LND es capaz de:
1. Crear canales.
2. Cerrar canales.
3. Gestionar completamente todos los estados de los canales, incluyendo los excepcionales.
4. Mantener un gráfico de canales totalmente autenticado y validado.
5. Realizar la búsqueda de rutas dentro de la red, reenviando pasivamente los pagos entrantes.
6. Envío de pagos salientes encriptados en cebolla a través de la red.
7. Actualización de las tarifas anunciadas.
8. Gestión automática de canales (piloto automático).
9. Cumplimiento de las especificaciones de la red Lightning

LND se ajusta plenamente a la especificación de la red Lightning (BOLTs). El conjunto de documentos de especificación, así como nuestra implementación de la especificación, son todavía un trabajo en curso. Dicho esto, el estado actual del cumplimiento de BOLT por parte de LND es el siguiente:
1. **BOLT 1:** Protocolo de base.
2. **BOLT 2:** Protocolo de pares para la gestión de canales.
3. **BOLT 3:** Formatos de transacciones y scripts de Bitcoin.
4. **BOLT 4:** Onion Routing Protocol.
5. **BOLT 5:** Recomendaciones para la gestión de transacciones en la cadena.
6. **BOLT 7:** Descubrimiento de nodos y canales P2P.
7. **BOLT 8:** Transporte cifrado y autenticado.
8. **BOLT 9:** Banderas de características asignadas.
9. **BOLT 10:** Arranque de DNS y localización asistida de nodos.
10. **BOLT 11:** Protocolo de facturación para Lightning Payments.

## U6. Práctica 1
### Creando tu primer monedero para Lightning Network (Video)
![[543.E2_Creando_tu_primer_monedero_para_Lightning_Network.mp4]]
[Creando tu primer monedero para Lightning Network](https://app.web3mba.io?wvideo=r4oeyo3n34)

Una de las cosas que más preocupa a quienes recién inician en el mundo de Bitcoin es cómo utilizar o aprovechar el potencial que tiene Lightning Network. Pues bien, eso es muy sencillo utilizando monederos como Zap. En este caso, vamos a buscar Zap HQ y aquí podemos ver el Zap de la Rueda. Este monedero es del tipo no custodial, es decir, las claves y el control del dinero que están dentro de este monedero están completamente bajo tu poder. Podemos utilizarlo tanto para la red Bitcoin como para Lightning Network.

Como pueden ver, es una aplicación bastante potente porque nos ofrece la capacidad de utilizar estas dos formas de dinero que nos ofrece Bitcoin: la red on-chain, que sería el BTC como tal, y la red Lightning Network, que también sería el mismo BTC, pero con la capacidad de realizar nuestras transacciones de forma mucho más rápida y económica utilizando esta nueva red de Bitcoin.

Ahora bien, ¿cómo podemos instalar este software en nuestros computadores o teléfonos celulares? Desde la página web podemos ver que podemos descargar tanto la versión para escritorio como para las versiones de Mac y Android. Simplemente, si hacemos clic en cada uno de estos íconos, podemos ver Zap dentro de Google Play para instalarlo en nuestros teléfonos Android, o podemos realizar pruebas beta en el ecosistema Mac para el resto de dispositivos iOS.

Ahora bien, ya que estamos en un computador con Windows, vamos a ver cómo podemos integrar este interesante monedero en nuestro sistema. Simplemente vamos aquí y aquí están todas las opciones de descarga. En este caso, vamos a la opción para Windows y, fíjense que también tenemos la opción para Mac OS y para Linux. Arriba podemos ver las versiones de descarga directa para Android y las opciones testnet y testfly para iOS. Vamos a elegir la versión para Windows; la última versión es la 0.7.2 beta y simplemente comenzamos nuestras descargas.

Ahora que hemos descargado la aplicación, procedemos con la instalación. La instalación se puede realizar sin necesidad de permisos administrativos, así que simplemente hacemos doble clic y el proceso de instalación comienza. Una vez que termine, iniciará automáticamente la aplicación y podremos empezar con la configuración de la misma.

Muy bien, ahora que la aplicación ha iniciado, podemos comenzar el proceso de configuración del monedero Zap. En este caso, tenemos la opción de conectar un monedero que ya tengamos listo a un nodo de Bitcoin, un nodo LND, que en este caso es el nodo de Lightning Network que está utilizando Zap. También podemos utilizarlo para recuperar una cuenta que ya hayamos creado anteriormente o simplemente podemos crear una nueva, que es el proceso que vamos a realizar en este momento. Simplemente le damos "Next" y comenzamos con el proceso de generación de la semilla. Aquí está nuestra semilla. Iniciamos el proceso de verificación. En este caso, nos dan las palabras que vamos a verificar; simplemente las introducimos y colocamos la clave que protegerá nuestro monedero.

En este caso, nos está pidiendo cómo vamos a hacer el respaldo de nuestros canales de Lightning Network. Recomendamos actualizar el respaldo local de manera que puedas tener acceso y control de lo mismo en todo momento. Vamos a hacer este respaldo en una carpeta dentro de "Documentos", llamada "nd states". Iniciamos "Next" y con eso comienza el proceso de creación de nuestro monedero.

En este caso, nos está pidiendo que agreguemos fondos a nuestro monedero y para ello vamos a utilizar esta dirección a la que enviaremos el dinero inicial perteneciente a nuestro monedero BTC. Desde allí, podemos transformar este BTC en montos de Satoshi que estén disponibles dentro de Lightning Network.

Una vez terminada la sincronización del monedero Zap, podemos ver rápidamente que tenemos la capacidad para hacer pagos o recibirlos. En este caso, nuestro monedero se llama "test" y podemos crear canales sobre Lightning. Podemos manejarlos o crear nuevos canales, y además, tenemos una dirección de Bitcoin asociada a nuestro monedero, que en este caso es la dirección que está aquí. Esta dirección la podemos utilizar para enviar dinero a nuestro monedero y realizar transacciones on-chain directamente sobre la red Bitcoin, o podemos realizar pagos directamente sobre Lightning Network.

Por ejemplo, si queremos recibir un pago, simplemente hacemos clic en "Receive" y si queremos recibir un pago de cinco dólares, aquí está la cantidad en Satoshis. Podemos decir "tip" y hacemos la solicitud; automáticamente se genera el pedido para este pago, que tiene un valor de 5 dólares, y aquí está la dirección de pago para Lightning Network, junto con el código QR para ese pago, de manera que simplemente se puede escanear y realizar el pago correspondiente.

También podemos realizar pagos directamente a direcciones de Bitcoin on-chain; estas direcciones comienzan con BC1, 1 o 3, tal como estamos acostumbrados en el ecosistema Bitcoin. O podemos hacer pagos a través de "Payment Request", que son las direcciones que hemos visto anteriormente en la solicitud que hicimos, o mediante las llaves públicas de los nodos. En este caso, esto aplica a Lightning Network. Simplemente debemos pegar las direcciones en este espacio y allí podemos realizar los diferentes pagos utilizando Lightning Network, o bien, directamente utilizando Bitcoin on-chain, de acuerdo a nuestras necesidades y a las direcciones que estemos utilizando.

Automáticamente, el monedero Zap detecta qué tipo de dirección estamos utilizando. Si, por ejemplo, estamos utilizando una dirección que comienza con "1", la dirección es on-chain, y, por tanto, el pago que realizará Zap será una transacción on-chain. Si es un "payment request" con LN, con Lightning Network, será el pago directamente por Lightning Network. Este cambio es automático.

Finalmente, también podemos crear canales. Podemos crear un nuevo canal de Lightning Network y aquí están los nodos sugeridos para este sistema de pago. Podemos utilizar los nodos de Zap, JAWS, BitRefine, TipMe, OpenNode y LPEGO. Generalmente, los sistemas o canales de los nodos más utilizados son los de JARS y Bitrefed, que son muy utilizados para compras en línea. OpenNode y TippingMe también son utilizados principalmente para hacer donaciones o "tipping" a personajes bien conocidos en la comunidad. Zap también tiene la capacidad de crear este tipo de canales dentro de Lightning Network.

En este sentido, queda claro que el potencial de Zap como monedero de Bitcoin y de Lightning Network es bastante útil y que no representa una mayor dificultad manejar este monedero de acuerdo a las especificaciones de uso para usuarios nuevos que están recién llegando a este sistema. Además, puedes crear otros monederos que puedes añadir a cada uno de los perfiles que estás viendo aquí, con el fin de que puedas tener otros monederos que utilizar dentro de tus diferentes perfiles de uso.

Aquí también tienes la opción para verificar los mensajes que puedas recibir dentro de la red y la identificación del nodo de Lightning Network que estamos utilizando, que en este caso es la versión LND 0.10.2 beta, que pertenece a nuestro monedero o a nuestro nodo LND para Lightning Network. Así terminamos este pequeño repaso de lo que es Zap, de cómo instalarlo y de cómo configurarlo para utilizarlo dentro de la red on-chain de Bitcoin y dentro de Lightning Network para realizar pagos o recibirlos con este material.

## U6. Práctica 2
### Modelos de negocio con un Nodo LN (Video)
![[544.E2_Modelos_de_negocio_con_un_Nodo_LN.mp4]]
[Modelos de negocio con un nodo LN.mp4](https://app.web3mba.io?wvideo=58gxfaex31)

Una de las cosas que más solemos ver dentro del mundo de las criptomonedas es la recomendación de instalar nuestros propios nodos para estar completamente descentralizados. Esto es cierto porque, a medida que instalamos nuestros propios nodos, tenemos la capacidad de interactuar con las redes blockchain de esos nodos de forma completamente descentralizada, teniendo nosotros el control total de dicha interacción.

Por ejemplo, cada vez que instalamos un nodo de Bitcoin, podemos interactuar, enviar y recibir información de la red Bitcoin sin que ningún intermediario esté de por medio, participando y teniendo la capacidad de prohibirnos esa conexión o de simplemente transformar esa conexión o interacción en algo que esté completamente a su merced. Podríamos verlo en el sentido de cómo ocurre con las redes o los wallets, como sería MetaMask, que dependen de servicios como Infura, que en este caso sería un tercero, para conectarse a la red de Ethereum y poder realizar operaciones con los tokens que tengamos dentro de la wallet MetaMask.

Este tipo de relación se puede evitar si, por ejemplo, instalamos un nodo de Ethereum dentro de nuestro computador y redirigimos toda esa interacción de MetaMask a nuestro nodo personal, de manera que podamos interactuar directamente con Ethereum sin tener que pasar por los servicios hospedados por Infura. Esta es una opción que nos permite descentralizar la interacción y que, adicionalmente, evita cualquier tipo de baneo o de listado negro que controle la forma en que interactuamos y realizamos operaciones dentro de la red de T-LINK. Lo mismo ocurre con el resto de redes. Cada uno de los nodos que podamos instalar dentro de esas redes puede servirnos para mantener una interacción directa y sin intermediarios, ayudándonos a mantener la seguridad de nuestras operaciones en las mismas.

Sin embargo, la instalación de nodos no solamente responde a un punto de descentralización. También responde a la necesidad de utilizar dichos nodos para tener la seguridad de implementar servicios que puedan ser útiles tanto para nosotros como para terceros. Utilizar el software de los nodos para generar software como servicio o SaaS. Este tipo de servicios puede ser implementado con diferentes herramientas. Por ejemplo, con servicios como Rasp. Rasp.Blitz, que es un desarrollo que nos permite crear nodos de Bitcoin online y en red de forma completamente hecha en casa. Este servicio, como pueden ver, tiene una página bastante sencilla, pero cuenta con todo lo necesario para desplegar este tipo de nodos que nos puedan servir en casa y que podamos tener interacción o control completo de nuestros nodos.

Por supuesto, no es el único, y hoy quiero mostrarles uno que no solamente nos permitirá crear nuestros propios nodos y monederos, sino también generar un software como servicio adicional, un valor agregado que es BTC Pay Server. En este caso, vamos a buscar la página de BTC Pay Server y vamos a explicar un poco de qué trata este proyecto. BTC Pay Server, como ven aquí en su página principal, es un servicio de pasarelas de pago, tal como podemos ver en pasarelas de pago como BTC Pay o BitPay, para ser más precisos. Este tipo de pasarelas de pago se pueden integrar a sitios web, tiendas en línea o tiendas físicas. BTC Pay Server permite a los usuarios de BTC Pay acceder a sus pasarelas de pago. Así que, si desean, pueden acceder a BTC Pay en su página de internet.

Gracias a la creación de estos servicios, se puede disfrutar de ellos teniendo el control total del mismo, utilizando software de nodos de Bitcoin y de otros monederos que son soportados, como la ICOIN. Generalmente, solo soporta servicios que están generados o que han sido forjados a partir del software de Bitcoin Core, como la ICOIN Gresley Coin. Este tipo de monedas podemos utilizarla con BTC Pay Server y también nos permite generar servicios de la ICOIN Network, que podemos integrar a tiendas físicas mediante un sistema de botones o mediante un sistema de generación de páginas web completamente dedicadas a vender o promocionar ciertos productos.

Ahora bien, BTC Pay Server tiene la opción de ser desplegado mediante hostings, es decir, por medio de hostings ya preparados directamente por terceros, para que con un par de clics podamos disfrutar de este tipo de servicios. Obviamente, esto no elimina la tercerización del acceso, porque este tercero también puede, al final, darnos la espalda y cerrar el acceso a dicho servidor, lo que nos dejaría sin acceso a este tipo de servicios. Sin embargo, BTC Pay Server tiene la capacidad de ser autohospedado. Es decir, podemos instalar nuestras propias instancias y mantenerlas bajo nuestro completo control. Para ello, vamos a ir al GitHub de BTC Pay Server, donde hay una opción muy interesante que es BTCPay Server Docker.

BTCPay Server Docker utiliza el software de Docker para crear un contenedor con todo lo necesario para ejecutar nuestro software de BTCPay Server. Como requisitos para instalar BTCPay Server Docker, necesitas instalar Docker. Vamos a ver un momento la página web de este desarrollo. Docker es simplemente una aplicación especializada que te permite instalar contenedores de aplicaciones dentro de tu sistema operativo. Estos contenedores tienen todas las dependencias, todo lo que se necesita para ejecutar una determinada aplicación, y es indistinto del sistema operativo que estés utilizando. Docker puede instalarse tanto para sistemas operativos Linux como para sistemas operativos Windows y Mac OS.

Ten en cuenta que en Windows hay un requerimiento adicional, que en este caso es WSL o Windows Subsystem for Linux, que es la opción más acorde o la mejor opción para ejecutar este tipo de software dentro de este sistema operativo. Para aquellos que tengan Windows y estén viendo este video, Windows Subsystem for Linux para Windows. Aquí pueden encontrar todas las instrucciones de instalación para WSL. Les recuerdo que WSL es un servicio que solamente está disponible para sistemas operativos Windows 10 o superiores y que deben tener un determinado nivel de hardware para ejecutarlo. Les recomiendo que las personas que se pongan a investigar con Windows Subsystem for Linux lo intenten con al menos 8 GB de memoria RAM y un procesador con un mínimo de 4 CPUs o 4 hilos de ejecución dentro de sus capacidades, porque este software es bastante pesado y requerirá de muchos recursos de computación para ejecutarse.

Todo esto que está aquí es la forma en cómo se instala dentro de Windows, y esto simplemente se cumple para las personas que tengan Windows. Estos dos requisitos, el de Docker y WSL, solo se cumplen para Windows. En el caso de que tengas Linux, generalmente Linux tiene la capacidad de instalar este tipo de aplicaciones de forma bastante más sencilla, porque hay soporte de forma nativa. Y en el caso de que tengas Mac OS, debes asegurarte de que tengas al menos 8 GB de memoria RAM, porque en macOS se ejecuta sobre una máquina virtual y esto, obviamente, requiere un poco más de recursos para poder ejecutarse.

En todo caso, aquí en Docker están todas las informaciones necesarias o todos los requisitos de este tipo de software para que se pueda ejecutar dentro de determinadas computadoras, y te recomiendo que leas esta información e instales estas dos herramientas para empezar a utilizar este tipo de servicios. Lo recomendable en este caso es que, si quieres probarlo, utilices una máquina virtual, que puede ser creada con VirtualBox o cualquier otro tipo de virtualización, e instales un sistema operativo como Linux. En este caso, estoy utilizando un sistema operativo Linux, en este caso Ubuntu 20.04, para instalar lo que se va a hacer con BTC Pay Server y probar este software para que ustedes entiendan cómo se instala y qué hacer.

Ahora bien, dicho esto, conocidas las dependencias iniciales para llegar a instalar este software, lo primero que vamos a hacer es realizar unas instalaciones un poco más generales. Lo primero que vamos a hacer es ir a la terminal y hacer una instalación de un software. Vamos a hacer una actualización inicial para comenzar la instalación de BTCPay. Vamos a hacer la instalación inicial de un software que necesitamos, que en este caso es git y rsync. El comando `apt install` es para instalar dentro de Ubuntu git y rsync. Estos dos software los vamos a utilizar o son requisitos previos para instalar lo que sería BTC Pay Server mediante Docker. Entonces, hacemos la instalación y esperamos un momento.

Ok, ya ha sido instalado. Entonces, lo siguiente que vamos a hacer es clonar el repositorio de BTCPayServerDocker. Para hacer la clonación, utilizamos el comando `git clone` y vamos a ir a la página de BTCPayServerDocker. Vamos a copiar esta línea y la vamos a pegar. Le damos a Enter. Y allí está nuestra clonación. Esperamos un momento. Muy bien, ya hemos terminado la clonación. Sigamos y revisemos. Podemos ver aquí nuestra carpeta BTCPayServerDocker. Entramos. Y en este punto, vamos a seguir las instrucciones que están dentro de lo que sería el repositorio de BTCPay Server.

Lo más interesante es la configuración de los parámetros necesarios para comenzar con la instalación, que serían estas variables de entorno. Vamos a copiarlas. Y lo que vamos a hacer en este punto es irnos a root. Aquí estamos en root, vamos a crear un documento, vamos a crear este archivo y vamos a copiar estas variables. Estas variables que están aquí son algunas variables iniciales que nos permitirán instalar BTCPay Docker dentro de nuestra computadora. Lo primero que vemos aquí es `BTCPayServerHost`, que en este caso lo vamos a cambiar a localhost. Normalmente debería ser la dirección o la URL del dominio que hayas comprado en caso de que quieras poner esto dentro de lo que sería el servicio de internet, pero como vamos a hacer un despliegue local, vamos a poner localhost.

La siguiente variable de entorno es `nBitcoinNetwork`, que en este caso va a ser la red mainnet, es decir, vamos a usar la red mainnet de Bitcoin. La primera criptomoneda que vamos a utilizar en BTC Pay Server va a ser la de BTC, pero también podemos agregar otra criptomoneda. En caso de que queramos agregar otra criptomoneda, ponemos `crypto2` y vamos a poner Litecoin. Estas serían las dos criptomonedas que estarían disponibles dentro de nuestro BTC Pay Server y otras opciones que serían `Additional Fragments`, que son opciones adicionales dentro de lo que sería BTC Pay Server. Estas opciones están descritas un poco más abajo.

Si ven aquí, están los fragments. Estas opciones son todas las que están disponibles para colocarse dentro de esta línea. La opción que tenemos en este caso, que es `OpsaveStorageS`, nos permite obtener o mantener dentro de nuestra computadora un Pruned Node de Bitcoin o Litecoin de hasta 50 GB. En este caso, como estamos ejecutando una máquina virtual reducida en espacio de almacenamiento, vamos a utilizar la versión XXS y la vamos a colocar aquí. Ya tenemos con eso el fragment necesario.

El `ReverseProxy` y `LightningNetwork`, en este caso, son opciones que están aquí. Vamos a verificar que esta opción de fragments nos funcione. Vamos a ver si podemos ejecutar Lightning Network con esa capacidad. Por ejemplo, aquí con XXS nos aparece que efectivamente no está soportado, por lo que no podemos ejecutar Lightning, así que debemos quitarla y dejar activado el servicio SSH para poder acceder a nuestro BTC Pay Server mediante ese servicio de conexión remota.

Ya con eso, simplemente guardamos el archivo y lo cargamos mediante un `source`. Esto se asegurará de que todas las variables de entorno estén cargadas dentro de nuestro entorno de ejecución. Aquí están, lo pueden ver, cada una de las opciones. Y cuando estemos ejecutando el script de instalación, que se ejecuta con el siguiente comando `btcpayserver-setup`, entonces comenzaríamos la instalación de BTCPay Server directamente. Esto va a tardar un poco, no se desesperen, es un proceso de instalación bastante lento. Simplemente coloquen el comando tal como aparece en pantalla y esperemos a que se culmine el proceso de instalación.

Vamos a iniciar, ahí está, efectivamente ya está comenzando la instalación. Todo este proceso se hace de forma automática, no deben tocar absolutamente nada, simplemente esperen a que todo el proceso termine y ya entonces tendremos nuestro BTC Pay Server sin ningún error ejecutándose dentro de nuestra computadora. Muy bien, aquí ya hemos terminado la instalación de nuestro BTC Pay Server dentro de nuestro computador, lo que incluye la instalación de lo que sería Bitcoin y su Bitcoin Core, Litecoin y su software de nodo, y todas las herramientas necesarias para ejecutar nuestro servidor BTC Pay Server.

Lo siguiente que vamos a hacer es acceder a nuestra página web, en este caso vamos a utilizar la dirección localhost. Ya automáticamente estamos entrando a nuestro BTC Pay Server. En caso de que tengan su servidor, existen una serie de comandos que son los que están aquí mostrados. Uno de ellos, muy importante, es el de cambiar el dominio. Ustedes tienen que llamar a este script que está en `user/local/bin/change-domain`. Aquí pueden colocar el dominio que necesiten. Por ejemplo, un dominio que no debería darles problemas sería localhost o una dirección dentro de lo que sería su red, en caso de que la máquina virtual que estén utilizando tenga acceso a red directa por medio de un bridge o cualquier otro tipo de medio de comunicación que les permita una dirección IP definida mediante algún protocolo como DHCP.

En todo caso, si se presenta algún problema, les recomiendo que utilicen este comando `change-domain` para cambiarlo, al menos, a localhost, de manera que no tenga ningún tipo de inconveniente, ya que es la opción más segura en caso de que tengan algún problema de acceso. Recordemos que esto está pensado siempre para ser desplegado dentro de internet y contando con dominios ya registrados a nivel de DNS, por lo que pueden presentarse algunos problemas y estas son las opciones para solucionarlo. Dicho esto, ya tenemos el localhost, ya podemos entonces entrar y generar nuestra primera cuenta. Vamos a crear nuestra cuenta de prueba.

Vamos a generar una cuenta, una contraseña segura mediante el sistema de generación de contraseñas de Firefox. Creamos nuestra cuenta, actualizamos y ya aquí podemos ver que se están sincronizando nuestros nodos, en este caso de Bitcoin y de Litecoin. Ya está el proceso de sincronización, simplemente tenemos que esperar a que se inicialice todo lo que es el proceso de sincronización, que eso puede tardar algún tiempo dependiendo del tamaño de cada uno de los nodos de las blockchains.

Ahora bien, BTC Pay Server, como ya he dicho antes, nos permite generar un servicio de sistema de pago utilizando nodos que están bajo nuestro completo control. Aquí podemos crear una tienda, manejar plugins, crear una serie de mejoras a lo que es nuestro Pay Server, incluyendo, por ejemplo, la capacidad de crear plugins para Shopify, crowdfunding, puntos de venta, botones de pago para páginas web, y también podemos agregar, obviamente, otros plugins que necesitemos. Por ejemplo, podemos hacer sistemas de intercambio mediante Fixer Flow App, podemos crear sistemas con PodServer, Rockstar HighSplit, una serie de plugins adicionales que están a nuestra disposición y que simplemente podemos instalar haciendo clic dentro de este sistema.

Ahora bien, si queremos crear una tienda, simplemente debemos hacer clic en "Create Store" y darle un nombre a la tienda. Vamos a llamarla "Test", elegimos la moneda fiat que queramos manejar, en este caso podemos manejar USD, podemos elegir euros, yen japonés, el yuan, podemos elegir una serie de monedas o podemos trabajar directamente con Bitcoin, Satoshi o cualquier otro tipo de criptomonedas que esté listado aquí. Vamos a dejarlo en USD y vamos a poner el precio de origen de los precios de criptomonedas directamente desde CoinGecko. Simplemente vamos a utilizar las opciones por defecto en este caso y le damos crear.

Aquí ya hemos creado nuestra primera cuenta, nuestra primera tienda, en este caso la tienda se llama TEST, y lo que podemos hacer es crear una wallet para esta tienda. En este caso, podemos habilitar el uso de Z-Tweet, compatibilidad con opciones de competitividad legacy o taproot. En este caso, vamos a utilizar setwith y vamos a utilizar el sistema de payjoin. Vamos a verificar aquí, tenemos otras opciones como sería el BIP39, es decir, la clave opcional para la generación de nuestra wallet, la seed phrase en este caso, o importar las claves mediante RPC. Estas son opciones avanzadas, así que simplemente vamos a utilizar las opciones por defecto y vamos a crear.

Y aquí está nuestra seed phrase, nuestras 12 palabras que debemos respaldar. Ya con esto hemos creado nuestra primera wallet y ya podemos verla habilitada aquí. Si queremos ver alguna información de nuestra wallet, simplemente podemos ir a la opción de configuración y ver toda la información de nuestra wallet, incluyendo las claves privadas, toda la información que nos coloca dentro del control de nuestro monedero. En este caso, también podemos ver la SID en caso de que no la hayamos repartido o queramos verificar que nuestro respaldo es correcto. Podemos enviar y recibir este pago de manera escrita también. Todo esto con esta interfaz que, obviamente, nos coloca en ventaja con respecto a lo que serían diferentes monederos de este tipo.

Por ejemplo, un monedero como el que parece un sistema de pago, una plaza de pago que no se puede ver, como el que aparece en BitPay, no te permitiría un manejo tan claro o tan preciso como lo hace BTC Pay Server, porque está diseñado para hacer ese tipo de tareas de la forma más sencilla posible. Ahora bien, aquí hemos creado nuestra wallet BTC. Si queremos crear nuestra wallet Litecoin, también la podemos crear. Recuerden que hemos activado esta opción como la segunda criptomoneda que podemos utilizar dentro del sistema, y simplemente tenemos que hacer el mismo procedimiento en caso de que queramos crearla.

Y aquí está, simplemente ya aparecen las dos opciones. Recordemos también que podemos crear monederos de Lightning Network tanto para Bitcoin como para Litecoin. Recuerden que Litecoin también tiene una Lightning Network, pero como estamos en una máquina virtual y tenemos problemas de espacio, hemos elegido una opción de almacenamiento que no nos permite ejecutar monederos Lightning, así que no podemos utilizarlo en este punto. Sin embargo, si tenemos una máquina virtual o un hardware mucho más potente con más almacenamiento, lo ideal sería habilitar esta opción para poder recibir y enviar pagos utilizando Lightning Network.

Ahora bien, en este caso, ya podemos ver aquí todas las opciones del dashboard, viendo el balance que tenemos, cuántos pagos han salido, cuántos pagos tenemos pendientes, las transacciones, toda esta información está manejada directamente desde esta interfaz. Lo mejor de BTC Pay Server es que podemos crear aplicaciones. Es decir, si tenemos una tienda y un monedero asociado a esa tienda, podemos crear aplicaciones. Estas dos aplicaciones son Punto de Venta y CloudFounder. Por lo menos, estos son los dos plugins o aplicaciones que aparecen por defecto dentro de lo que sería una instalación de BTC Pay Server.

Si queremos integrar un punto de venta, por ejemplo, vamos a darle este nombre, POS. Si lo creamos, lo que nos permitirá es ingresar información de los productos y servicios que tenemos para que sean visitados por una persona y que puedan intercambiarlos por algún pago en criptomonedas. En este caso, podemos llegar y simplemente guardar, y si damos vista, vamos entonces a la tienda de té, que en este caso es el nombre que viene por defecto. Fíjense que ya con esto tenemos la primera tienda y una cosa que debemos tener en cuenta es la forma en la que se realizan los pagos. Cada uno de estos elementos que están aquí puede ser editado y deben tener los precios correspondientes en dólares o, en el caso de que estemos utilizando alguna criptomoneda, para realizar esos pagos.

Obviamente, estos pagos deben ser administrados en las monedas correspondientes y, en caso de que queramos cambiar las formas de pago, simplemente podemos ir a "settings", "general" y aquí están las opciones de pago. Por ejemplo, podemos elegir Satoshis, por poner un ejemplo, y salvamos los cambios. Si salvamos los cambios al hacer este cambio y vamos nuevamente a nuestra tienda, podemos ver que si activamos la opción de Satoshis y salvamos, revisamos la tienda, podemos ver que tenemos los pagos en Satoshis y que simplemente podemos empezar a comprar utilizando Satoshis.

Ahora bien, la opción de crowdfunding para proyectos y otro tipo de cuestiones también lo podemos hacer. Simplemente podemos llegar y crear este tipo de opciones, habilitarlas y configurarlas de manera que se ajusten a nuestras necesidades como medio de control para este tipo de funciones dentro de lo que sería BTC Pay Server. Adicionalmente, también tenemos entre los plugins el botón de pago, que es el que nos permitiría activar las opciones para recibir o para embeber botones de pago dentro de las páginas web. Este sería el botón de pago y lo único que tendríamos que hacer es copiar y colocar dentro de nuestras páginas web el código que está aquí abajo generado, y al colocarlo en una web, rápidamente podríamos ver el sistema funcionando dentro de nuestro sistema.

Entonces, por ejemplo, si copiamos este código y lo colocamos en una página web, veríamos este botón de pago y, al hacer clic, se abrirían nuestras opciones de pago para utilizar BTC Pay Server. Todas estas opciones que acabamos de ver son posibles gracias a que tenemos el control completo y total de los nodos que se están ejecutando y que hacen posible la aplicación de BTC Pay Server. Esto es un ejemplo muy claro de por qué la instalación de nodos personales es tan importante a la hora de crear no solamente servicios asociados a esos nodos, sino también para controlar lo que esos nodos manejan. En este caso, las criptomonedas que esos nodos gestionan. La libertad que ofrece este tipo de sistemas es enorme y eso no lo pueden otorgar otros tipos de sistemas.

Puede que sean mucho más sencillos de manejar, puede que sean instalaciones mucho más amplias en el sentido de que pueden ofrecernos una mayor cantidad de criptomonedas, debido a que, por lo menos, BTC Pay Server está bastante limitado en este sentido, pero eso no quita el hecho de que BTC Pay Server nos ofrece un mayor control y la libertad absoluta a la hora de implementar este tipo de software como servicio. Así que espero que les haya gustado esta práctica de cómo instalar BTC Pay Server, cómo utilizarlo y desplegar sus servicios o capacidades dentro de nuestro computador, y tenerlo a nuestra merced para poder implementar con ellos algunos servicios para nosotros o incluso para terceros, porque esto puede ser implementado para terceros. Nos vemos entonces en otra ocasión con mayor información de cómo utilizar otros sistemas de cerradura.


## U7. Modelos de negocio con un nodo LN (BTC PAY)
### Crear un monedero LN con ZAP
ZAP es un monedero especialmente diseñado para permitirte hacer uso de todo el poder de Lightning Network desde tu ordenador o Smartphone.

La aplicación está pensada para ser sencilla de usar, ofrecer gran nivel de seguridad y todas las funciones que puedas necesitar.

#### 1 | Instalación y configuración inicial
Para descargar ZAP todo lo que debes hacer es ir a la web principal de ZAP y hacer clic en _Download_.

![[545.E2_install_1.png]]

En este punto, debes elegir el sistema operativo que usaras y descargar la versión del software para el mismo (en nuestro caso, Windows).

![[545.E2_install_2.png]]

Para instalar el software no necesitas de permisos administrativos por lo que bastará hacer doble clic sobre el ejecutable para empezar su instalación.

![[545.E2_install_3.png]]

Una vez terminada la instalación comienza el proceso de configuración del nodo Zap. En este punto, debes elegir si crear un nuevo monedero, conectarte a un nodo LN propio que ya tengas configurado o recuperar una wallet LN que hayas creado previamente. 

En este caso, crearemos un nuevo monedero:

![[545.E2_install_4.png]]

Nuestro siguiente paso es salvar la _seed phrase_ del monedero, ten cuidado en copiar de forma exacta y en estricto orden, las 24 palabras que aparecen en la pantalla, luego se te pedirá que confirmes dichas palabras para seguir con la configuración del monedero. 

![[545.E2_install_5.png]]

El siguiente paso en este punto es darle un nombre a tu monedero: 

![[545.E2_install_6.png]]

El siguiente punto es vital. Deberás escoger un lugar donde se almacenará la información de tus canales LN. Ten mucho cuidado al elegir una ubicación segura para esta información y has respaldos programados de la misma, esto te ayudará a mantener esta información y las canales LN que has abierto de forma que puedas volver a restaurarla en caso de que lo necesites. En este caso, Zap ofrece soporte para respaldo local o en la nube (Drive y Dropbox) estas dos ultimas opciones no atentan con la seguridad del nodo, pero si con la privacidad, así que piensa bien antes de elegirlas. En todo caso, si eliges el modo local, podrás respaldar esta info de forma regular en otro disco o unidad USB. 

![[545.E2_install_7.png]]

Finalmente, ya tenemos instalado nuestro monedero ZAP en Windows, y comenzará con el proceso inicial de sincronización. Fíjate, que ya en este punto es seguro agregar fondos al monedero, algo que puedes hacer usando la dirección que aparece en pantalla (una dirección SegWit).

![[545.E2_install_8.png]]

Al finalizar el proceso de sincronización, podemos ver a nuestro monedero ZAP listo para usar Lightning Netwok. 

![[545.E2_install_9.png]]

#### 2 | Enviando un pago
Para enviar un pago en ZAP, todo lo que debes hacer es hacer clic en el botón Pay, copiar la dirección BTC o LN a la que deseas realizar el pago e indicar la cantidad a pagar.

![[545.E2_enviando_1.png]]

Por ejemplo, puedes hacer pagos on-chain, usando BTC directamente con dirección legacy (empiezan en 1), SegWit-MuSig-Legacy Compatible (empiezan por 3) y SegWit (empiezan por bc1). Proporcionando la dirección, ZAP detectará el destino y te mostrará los datos para el envío del pago pudiendo usar saldo on-chain o sobre LN si está disponible. 

![[545.E2_enviando_2.png]]

Por ejemplo, en la siguiente imagen se muestra un pago directo a un nodo LN usando su Pubkey (algo que puede ser usado para colaborar económicamente con esos nodos). 

![[545.E2_enviando_3.png]]

O bien un pago directo a una tienda usando el protocolo Lightning Payments.

![[545.E2_enviando_4.png]]

#### 3 | Recibiendo un pago
Recibir pagos en ZAP es igual de sencillo. Basta con ir a la opción “Recieve” y especificar el pago que recibiremos:

![[545.E2_recibiendo_1.png]]

Indicada la cantidad, solo debemos hacer el “Request” y con ello se genera el QR y la dirección para la recepción del pago usando LN. Esto solo debemos copiarlo y enviarlo a quien nos hará el pago o escanear el QR para que podamos recibir el pago correspondiente de la otra persona. 

![[545.E2_recibiendo_2.png]]

## U7. Práctica
### Bisq, un DEX construido sobre Bitcoin (Video)
![[546.E2_Bisq,_un_DEX_construido_sobre_Bitcoin.mp4]]
[Bisq, un DEX construido sobre Bitcoin](https://app.web3mba.io?wvideo=mmce6k9oef)

Cuando hablamos de exchanges descentralizados, lo primero que se nos viene a la mente son los Smart Contracts y Ethereum. Normalmente, la mayoría de los exchanges descentralizados que conocemos están desplegados dentro de lo que sería la red Ethereum, y es normal, porque Ethereum tiene muchas de las capacidades necesarias para llevar a cabo este tipo de proyectos. Sin embargo, en Bitcoin también hay un exchange descentralizado que funciona de forma completamente distinta a los que podemos ver en redes como Ethereum, Solana o diferentes redes que tienen o utilizan Smart Contracts para hacer realidad este tipo de proyectos. Este exchange descentralizado dentro de Bitcoin se conoce como Bisq, y es lo que veremos a continuación.

Para conocer este proyecto, lo primero que haremos es visitar su página web. Y para ello, vamos a ir a Bisq. Podemos ver aquí Bisq Network. Al entrar, podemos ver que estamos dentro de lo que sería la página web de este proyecto, que, como bien se explica, es un exchange descentralizado y explica que Bisq es una aplicación de código abierto peer-to-peer que permite comprar y vender criptomonedas a cambio de monedas nacionales. No es necesario registrarse. Bisq funciona gracias a dos tecnologías bastante sencillas que hemos conocido dentro de lo que sería el ecosistema. En primer lugar, Bisq utiliza un nodo de Bitcoin para acceder a una red de nodos que se conectan o utilizan la red de Bitcoin para comerciar de forma directa peer-to-peer con otras personas que están dentro de la red Bisq.

Y lo segundo es que utiliza tecnología del tipo Tor para conectar a estas personas de forma completamente segura y privada, manteniendo siempre el anonimato en la mayor medida posible. Para utilizar este cliente descentralizado, lo único que necesitamos es descargar la versión para el sistema operativo que estamos utilizando. En este caso, estamos dentro de una máquina virtual que utiliza el sistema operativo Ubuntu, pero también puede ser descargado para otros sistemas operativos, como Windows o Mac. Todas estas versiones están disponibles para su descarga.

Aquí tienen todas las versiones que están disponibles: tienen versiones para Windows, para macOS, para Ubuntu, Debian, para Fedora, para Linux, y también tienen el código fuente si desean ejecutarlo o compilarlo para un determinado sistema operativo que tengan en casa. Es importante recalcar que Bisq, o todo lo que este tipo de servicios ofrece, es completamente software libre, y podemos descargar su código o ver su código dentro de lo que sería su repositorio en GitHub, dejando claro que no hay una puerta trasera o algún tipo de elemento malicioso que se instale con este tipo de software.

Nosotros ya hemos descargado previamente el software para Debian Ubuntu. En este caso, vamos a hacer la instalación de Bisq utilizando la terminal. Así podemos examinar su interfaz, que en esta fotografía que están viendo es bastante amigable, como pueden ver. Pero vamos a verla directamente en ejecución. Vamos a abrir la terminal y a hacer la instalación correspondiente. En este caso, estamos en descargas. Para instalarlo, simplemente hacemos `sudo apt install` y buscamos nuestro archivo. Aquí está. `sudo apt install` y nuestra clave. Aquí está instalado ya. Esperamos un momento a que se realice el proceso de instalación y, una vez instalado, podemos revisar este tipo de servicio.

Muy bien, aquí está instalado y vamos a buscar Bisq. Una vez instalado, Bisq, por lo menos en el sistema operativo Ubuntu, Debian y otros sistemas operativos Linux, se instala dentro del directorio opcional, o `opt/bisq`, y aquí está nuestro binario Bisq. Simplemente con introducir esta ruta y darle Enter, comenzamos con el proceso de inicialización de nuestro exchange descentralizado. Aquí tenemos el acuerdo de usuario. Estas son las opciones que se tienen en cuenta para utilizar lo que es Bisq y la BisqDAO, porque esto también está manejado por una DAO. Así que simplemente vamos a aceptar el acuerdo y vamos a empezar el proceso.

Como pueden ver, aquí estamos conectando a la red de Bitcoin y se está conectando a través de la red Tor. Como he dicho anteriormente, Bisq cuida mucho de la privacidad de los usuarios y para ello utiliza estas dos tecnologías de manera que, uniendo ambas partes, puedan ofrecer un exchange descentralizado con todas las de la ley, y ofrecer también un alto nivel de descentralización y privacidad a los usuarios que utilizan este tipo de servicios. Ahora vamos a esperar un momento a que se inicie todo el proceso y, una vez que termine de descargar todo lo necesario, vamos a entrar a lo que sería la aplicación como tal.

Muy bien, ya hemos iniciado la aplicación de Bisq y podemos ver que ya tenemos nuestra aplicación abierta. Tenemos un dashboard con las personas que están vendiendo BTC y las personas que están comprando. También tenemos nuestro gráfico de ventas y compras, y podemos ver las distintas opciones que nos ofrece Bisq en su interfaz. Por ejemplo, estamos aquí en la sección de mercado, el libro de ofertas, ofertas según moneda. Podemos ver también las ofertas que existen en distintas monedas. En este caso, podemos ver monedas como EUR, Monero, Dólar estadounidense, Libra esterlina. Todas estas son las ofertas disponibles que podemos utilizar para operar dentro de lo que sería Bisq.

También tenemos ofertas según método de pago, que, como pueden ver aquí, pueden ser métodos de pago como lo serían Alcoin, transferencias SEPA, pagos rápidos, Revolut, etcétera. Swap, BSQ, bancos nacionales, CL, distintas formas de pago que incluyen no solamente criptomonedas, como en este caso serían hardcoins, sino también pagos tradicionales, como serían transferencias bancarias o servicios de pagos digitales, como pueden ser Wootfor u otro tipo de servicios de pagos digitales que están aceptados dentro de Bisq y que cada uno tiene su forma o tipo de funcionamiento específico para evitar que se presenten distintas situaciones no deseadas dentro de lo que sería el funcionamiento de este exchange descentralizado.

Ahora bien, en el área de intercambios podemos ver los diferentes intercambios que se han realizado dentro de Bisq. Podemos ver los intervalos, que van desde el año hasta los 10 minutos. Podemos ver el precio medio de las transacciones que se han realizado, en este caso, declarados por euro, el volumen de operaciones y los diferentes pagos que se han realizado junto con todo su historial correspondiente. Esta información que está aquí se puede exportar a CSV de manera que puedas crear un Excel y analizar la información utilizando alguna función especial que tengas en una hoja de Excel o una hoja Calc. Estas serían las funciones iniciales que podemos ver dentro de Bisq en la parte de mercado.

Ahora bien, también tenemos la opción de comprar. Podemos comprar con fiat. Aquí están todas las opciones fiat que están disponibles. Podemos comprar Bitcoin u otras criptomonedas también. Podemos elegir también para obtener otro tipo de criptomonedas sin mayores complicaciones. Por ejemplo, puede ser Bitcoin, puede ser BSQ, puede ser Monero, o pueden ser otras criptomonedas que estén disponibles dependiendo de las opciones que están dentro de Bisq. También podemos vender. Podemos vender otras criptomonedas. Por ejemplo, podemos vender euros. En caso de que queramos vender euros, podemos obtener criptomonedas a cambio, o podemos vender otras criptomonedas también, como BSQ, Monero u otras que estén registradas dentro de la plataforma.

También podemos tener aquí una parte en la que nos muestra el portafolio que tenemos registrado dentro de lo que serían las operaciones de Bisq. Los fondos, que serían los saldos que tenemos positivos para poder utilizarlos dentro de Bisq. Aquí es donde comienzan las divergencias con respecto a lo que normalmente manejamos dentro de lo que serían los DEX que se ejecutan, por ejemplo, en Ethereum. Bisq, como tal, es un nodo de Bitcoin y tiene su propio monedero. Aquí podemos ver que esta dirección que está aquí pertenece y es exclusiva de esta aplicación Bisq que hemos descargado e instalado dentro de esta máquina virtual.

Tu dirección, en el caso de que instales Bisq dentro de tu computador o en una máquina virtual que estés manejando, será distinta porque, obviamente, el monedero de Bitcoin que estás ejecutando en ese momento es completamente distinto. Puedes estar entonces con total seguridad de que tus Bitcoins dentro de lo que sería Bisq estarán bien protegidos porque se está ejecutando directamente sobre lo que sería una instancia de Bitcoin Core. Aquí no se utiliza otro tipo de software, se utiliza directamente Bitcoin Core para manejar los saldos de Bitcoin que podamos tener dentro de nuestro DEX Bisq. En este punto, también podemos registrar otros tipos de saldo. Podemos generar nuevas direcciones. En este caso, podemos generar direcciones del tipo SegWit, que son las que empiezan por BC1, o también podemos generar otro tipo de direcciones. Por ejemplo, generar una nueva dirección, y aquí damos una dirección del tipo normal, que empiezan por 1, en este caso.

También podemos registrar y enviar fondos, en el caso de que tengamos fondos registrados dentro de nuestro monedero Bisq. Podemos mandar fondos a otras personas que estén dentro de lo que sería la Bisq Network, o incluso fuera de la Bisq Network, porque estas transacciones se están ejecutando directamente sobre Bitcoin y son indistintas a cualquier otro tipo de transacciones. También podemos hacer reserva de fondos, en caso de que queramos reservar algún fondo específico por alguna operación, fondos bloqueados y las transacciones que hemos realizado.

Ahora bien, en este punto, Bisq también ofrece soporte para realizar operaciones. Si vamos a la sección de soporte, podemos ver aquí un pequeño paréntesis de lo que es el soporte que nos ofrece Bisq. Entendiendo que Bisq, como tal, no es una compañía, al igual que pasa con muchos otros DEX, las operaciones que se están realizando dentro de lo que sería la red, si bien son seguras porque están protegidas por lo que serían los Bitcoin Script y otras funciones que están implementadas dentro de Bisq, también pueden tener cierto riesgo si no tenemos en cuenta cómo funciona Bisq y cómo funciona todo este tipo de sistemas.

Recordemos que cuando hacemos una operación de intercambio a través de intercambios descentralizados, por ejemplo, en el caso de Bisq, lo que hacemos es que simplemente llegamos y bloqueamos los saldos hasta que se cumplan las condiciones de intercambio entre la persona con la que estás interactuando y tú. Si no se cumplen las condiciones para realizar el intercambio de forma efectiva, Bisq lo que hará automáticamente es devolver los saldos y darte nuevamente el control sobre tus bitcoins o sobre tus criptomonedas, dependiendo de lo que estés utilizando. En el caso de que estés utilizando un servicio de terceros, allí entran en juego otras reglas que debes tener mucho cuidado de leer en el momento en que estés operando, porque recuerda que los pagos de terceros se manejan fuera de lo que serían las propias de Bitcoin Script que puede manejar Bisq, y por tanto atienden a otro tipo de reglas que deberás tener en cuenta a la hora de realizar este tipo de operaciones.

¿Qué significa esto? Que Bisq ofrece garantías para que puedas realizar operaciones de intercambio entre tú y otros de forma segura utilizando Bitcoin Script, en caso de que estemos utilizando Bitcoin para obtener otras criptomonedas, o en caso de que estemos utilizando Bitcoin para obtener pagos en monedas fiat o monedas nacionales de donde te encuentres, de manera que podamos tener la confianza de realizar este tipo de operaciones sin mayores riesgos. En caso de que algo salga fuera de lo común, hay un árbitro; en este caso, Bisq ofrece un arbitraje bastante completo que nos permitiría recuperar los saldos posibles que tengamos allí en riesgo, siempre y cuando tengamos en cuenta que debemos seguir todos los procesos de disputa que podamos tener para completar los procesos de forma correcta.

Ahora aquí vamos a cerrar este momento. Cerramos por aquí. Aquí está nuestro sistema de soporte. Tenemos la mediación y tenemos los arbitrajes que son los que nos ayudarían en este tipo de situaciones que no deseamos tener, pero que podrían presentarse para hacer reclamaciones por nuestros saldos positivos o por nuestros intercambios que estemos realizando. Vamos entonces a la siguiente pestaña, que es la pestaña de configuración. Aquí nos está diciendo una nueva función de privacidad de datos. Como hemos dicho, Bisq se centra mucho en la privacidad de sus usuarios. Vamos a darle aquí, entendido. Y rápidamente podemos ver las diferentes configuraciones. En este caso, yo que estoy ubicado en Venezuela, me dice que estoy en Venezuela. Si vamos a España y lo colocamos, nos dice aquí todas las operaciones. Podemos llegar y cambiar la diferencia máxima en los precios de mercado. En este caso, sería el tipo de cambio que podríamos realizar. ¿Cuánto sería el máximo que podríamos aceptar? Lo ideal sería cambiarlo a lo mínimo, podría ser 5% o 10%, como mucho, para que no caigamos en un intercambio que sea poco positivo para nosotros.

También vemos que hay soporte para la autoconfirmación de XMR. En este caso, si queremos hacer cambios de Bitcoin a XMR, podemos hacerlo directamente por Bisq. Es completamente un intercambio atómico. Se hace en cadena. Esto nos da la garantía de que los intercambios se van a hacer de forma correcta, protegidos completamente de principio a fin, utilizando las propiedades de Bitcoin Script y los scripts de Monero, dependiendo de que no haya ningún otro intermediario más que tú y la persona con la que estés intercambiando. En este caso, esta opción lo que nos permite es que si hay una confirmación de moneda dentro de lo que sería su red, la detectaremos y automáticamente se hará el intercambio de forma efectiva.

Si vamos entonces a la parte de información de red, podemos ver que estamos conectados efectivamente a la red Bitcoin y que tenemos conexiones con los diferentes nodos que están aquí disponibles y la altura de bloque, que en este caso sería el último bloque emitido por la red Bitcoin. En este caso, sería el bloque 766192. Como pueden ver, es bastante completo el funcionamiento. Aquí están todas las informaciones de las conexiones que se han realizado. Cómo podemos llegar y utilizar Tor, si queremos utilizarlo de forma activa o de forma pasiva, es decir, por activación manual. Todo el tipo de información que podamos utilizar. Podemos llegar incluso a conectarnos a otros nodos específicos en caso de que lo deseemos, para tener un control más granular de lo que sería la interfaz de Bisq y con quienes nos conectamos.

A la siguiente pestaña ahora tenemos la parte de cuentas. Esta parte de cuentas es lo que nos permite tener la información que necesitamos, las diferentes cuentas que vamos a utilizar. En este caso, pueden ser cuentas de Bitcoin, pueden ser cuentas de alguna altcoin, o cuentas de lo que serían servicios bancarios o de otro tipo que podamos mantener aquí como un medio para tener un control más centralizado o gestionar de forma más central toda esta información de los saldos que podamos mantener dentro de Bisq o que queramos manejar dentro de Bisq. Añadir una nueva cuenta, por ejemplo, sí. Aquí tenemos ya la opción de qué método de pago vamos a añadir y todas las opciones de método de pago que están ofrecidas o que están aceptadas por la aplicación. Como pueden ver, son muchas las formas de pago: formas de pagos digitales, formas de pago tradicionales y formas de pago por medio de cuentas de cripto.

En este caso, estamos hablando de las cuentas de moneda nacional, es decir, monedas fiat, pagos tradicionales, pero si queremos una cuenta de altcoin, podemos ir a la sección de cuentas de altcoin y aquí podemos añadir una nueva cuenta. Ya pueden ver que podemos añadir diferentes criptomonedas que deseemos. Simplemente seleccionamos la criptomoneda. En este caso, por ejemplo, vamos a ir a Binance, la dirección, y también podemos exportar las cuentas o importarlas dependiendo de si tenemos ya previamente instalada una configuración de Bisq. En este caso, podemos ver las diferentes criptomonedas que son exportadas por Bisq. Por ejemplo, tenemos aquí Counterparty, que es un token dentro de lo que sería la red Bitcoin. También podemos tener criptomonedas como Dash, Decred. Es decir, no solamente se tocan tokens dentro de lo que sería la red Bitcoin, sino también criptomonedas con sus propias blockchains que podamos utilizar directamente con nuestra cuenta de Bisq.

Las contraseñas del monedero son parte de la seguridad. La semilla del monedero, en este caso, es la semilla del monedero que estoy manejando dentro de Bisq. Esta es información bastante delicada que deben proteger a toda costa. En este caso, ya hay varias advertencias. La semilla del monedero es la siguiente. La muestro, pero recuerden que esta información es delicada y que debería manejarla solo ustedes en cualquier momento. Información del monedero, que nos dice cuáles son las rutas o las claves y toda la información del mismo. Y la copia de seguridad que podamos realizar al monedero Bisq, en caso de que queramos pasar esta información a otra cuenta Bisq, o tener simplemente un respaldo de nuestra cuenta Bisq, para que en caso de emergencia, podamos utilizarlo sin mayores complicaciones.

La DAO, que en este caso es el sistema de gobernanza descentralizada que mantiene en funcionamiento lo que sería la Bisq Network, es todo el sistema de participación para llegar y mantener este sistema funcionando. Todo esto funciona utilizando la red Bitcoin. Como pueden ver, Bisq es completamente distinto a cualquier tipo de exchange descentralizado que hayamos visto, por ejemplo, Uniswap. Es completamente distinto porque, para empezar, no estamos hablando de una aplicación web, sino que estamos hablando de una aplicación que está instalada dentro de nuestro computador y que tenemos control de ella de forma absoluta.

¿Qué significa esto? ¿Qué significa que Bisq está instalado en nuestro computador y cómo es descentralizado esto? Pues bien, teniendo en cuenta que, por ejemplo, Uniswap depende de su descentralización de los smart contracts de Ethereum, pero la interfaz no está descentralizada porque depende de servicios de terceros, como serían los servidores web donde están ubicadas estas interfaces. ¿Qué significa esto? ¿Qué significa que Bisq está instalado en nuestro computador y cómo es descentralizado esto? En este caso, Bisq les ganaría por descentralización porque simplemente bajamos un ejecutable, lo tenemos en nuestra computadora y lo ejecutamos cuando deseemos. Nadie puede llegar y decirnos que no podemos hacer la red Bisq o que no podemos hacer un intercambio en Bisq porque se nos ha bloqueado el acceso o por alguna situación.

Simplemente, con hacer clic o iniciar Bisq, tal como lo hicimos hace un momento, podemos utilizar la red sin mayores complicaciones. Esto, por ejemplo, con Uniswap, no podría ser posible porque en caso de que el servidor donde esté ubicado Uniswap tenga algún filtrado de red, bien sea por IP o bien sea por rango de IP por países, simplemente nos veríamos inhabilitados de acceder a ese servicio. Vamos a hacer un ejemplo, no con Bisq, pero sí lo vamos a hacer con un sistema o con una aplicación que realmente aplica a este tipo de situaciones, por lo menos OpenSea. Si vamos aquí, yo que estoy ubicado en Venezuela, voy a OpenSea. Este sistema, este mercado descentralizado de NFT, nos prohíbe el acceso si no tenemos un servicio de VPN para acceder al mismo. Lo mismo pasa, por ejemplo, con otros servicios, pero es una idea bastante más clara que nos dice que estos servicios que dependen de servicios de terceros, como sería el hosting, pueden llegar a ser bloqueados o censurados.

Pero Bisq, al ser una aplicación directamente ejecutada en nuestra computadora, no hay forma de llegar y censurarla. Porque si bien se aplica la censura de alguna forma, podemos llegar y utilizar la red o podemos utilizar la aplicación por otro medio. Allí es donde Bisq hace su apuesta por Tor, evitando que este tipo de situaciones de censura se puedan aplicar, ya que la red Tor nos proporciona un sistema de conexión prácticamente incensurable con lo que sería el resto de las partes que Bisq necesita para funcionar. Así pues, como pueden ver, Bisq es una apuesta bastante grande de lo que sería un exchange descentralizado de principio a fin. Descentralizado de principio a fin porque no necesitamos de un servicio de terceros, ya que todo lo que necesitamos para ejecutar Bisq y para ser parte de lo que sería su red, lo ejecutamos dentro de nuestra computadora y no requiere de ninguna parte externa para llegar y funcionar.

Allí, donde otros exchanges descentralizados tienen una parte descentralizada, Bisq logra la descentralización completa. Ahora bien, seguramente se estarán preguntando, ¿qué tan seguro es Bisq comparado con otros exchanges descentralizados? Y la verdad es que es bastante seguro porque, por ejemplo, cuando hacemos un intercambio de Bitcoin a Monero, voy a tocar este punto porque Bitcoin y Monero tienen la capacidad de realizar intercambios de forma atómica a nivel de blockchain. Cuando hacemos intercambios de Bitcoin a Monero utilizando Bisq, lo que hace Bisq es lo siguiente: toma tu Bitcoin, genera una transacción especial con una programación en Bitcoin Script que indica a la persona con la que estamos comerciando en Monero que se ha realizado la transacción y que es por un determinado monto. Pero ese monto no será liberado hasta que esa persona no haga la transacción en Monero correspondiente y genere la prueba de que se ha hecho el pago.

Si la prueba de generación de pago se realiza de forma correcta, es decir, la persona que tiene el Monero hace la transacción a nuestra cuenta y genera el script suficiente para llegar y generar esta prueba y la proporciona, solo allí, una vez que esté proporcionada la prueba de pago, es que Bitcoin, o Bisq en este caso, generará la liberación del pago. Y la liberación del pago generalmente se hace con un delay. Es decir, que se ejecuta la liberación de pago y se esperan aproximadamente tres, cuatro, diez bloques de confirmación para que el pago se haga efectivo dentro de las cuentas de lo que serían las personas que están intercambiando Monero por Bitcoin. Es decir, el proceso se hace protegido de forma tal que ninguna de las partes pueda hacer alguna trampa y que todo se realice de la forma correcta y como debe hacerse.

En el caso de que estemos haciendo cambios con monedas nacionales, se aplican las mismas reglas que podemos tener, por ejemplo, en un peer-to-peer normal o en diferentes aplicaciones que utilizan este tipo de esquema de intercambio por fiat, de criptomonedas por fiat, por lo que es bastante seguro utilizar este tipo de servicio. Lo impresionante, en todo caso, es que todo esto, como he dicho ya en anteriores ocasiones, se hace utilizando la red Bitcoin y demuestra que, si bien Bitcoin no tiene smart contracts avanzados, sí permite la construcción de este tipo de aplicaciones con ciertas dificultades técnicas, pero sí lo puede hacer sin ninguna complicación.

Espero que les haya gustado conocer esta aplicación y les invito a que la prueben, a que la conozcan. Un saludo y hagan una prueba para conocer el potencial de Bisq para realizar este tipo de operaciones sin ningún intermediario en ellas. Dicho esto, nos veremos en otro próximo vídeo explicando aún más cómo la tecnología blockchain aboga por una mayor descentralización de las finanzas en el mundo. ¡Gracias por ver el vídeo!