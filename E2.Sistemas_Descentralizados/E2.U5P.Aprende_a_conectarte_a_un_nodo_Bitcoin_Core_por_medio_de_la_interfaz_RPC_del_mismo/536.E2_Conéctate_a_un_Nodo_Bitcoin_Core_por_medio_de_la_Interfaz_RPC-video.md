---
title: Conéctate a un Nodo Bitcoin Core por medio de la Interfaz RPC
URL: https://app.web3mba.io/courses/take/especializacion-2-sistemas-descentralizados/lessons/41199691-conectate-a-un-nodo-bitcoin-core-por-medio-de-la-interfaz-rpc
Tags/Keywords: #Especialidad 2 #Sistemas descentralizados #E2U5 #Creación de un Nodo Bitcoin Core #practica #interfaz rpc #rpc #Jose Maldonado
lang: es-AR
---
# Conéctate a un Nodo Bitcoin Core por medio de la Interfaz RPC
![[536.E2_Conéctate_a_un_Nodo_Bitcoin_Core_por_medio_de_la_Interfaz_RPC.mp4]]
[P-BTC-RPC](https://app.web3mba.io?wvideo=v86ejlljsu)

Una de las funciones más útiles que podemos ver dentro de los softwares de criptomonedas es la de activar el servidor RPC. Los servidores RPC dentro de estos softwares de nodos nos permiten acceder y utilizar o crear aplicaciones externas al mismo nodo, así como requerir información de estos y analizarlos para luego generar aplicaciones mucho más avanzadas o más centradas en una determinada función.

Veamos, por ejemplo, el caso de los exploradores de bloques. Normalmente, cuando observamos un explorador de bloques, simplemente vemos una interfaz gráfica que se encarga de mostrar la información del explorador como tal. Entonces, vamos a ver un momento aquí en el explorador de BitTuny y a analizar cómo funciona un poco este explorador. Normalmente, lo que sucede con estos exploradores es que se solicita información a los nodos mediante este servidor RPC, y luego esta información es analizada y almacenada en bases de datos que posteriormente son consultadas a través de otros lenguajes, como JavaScript, para mostrar información que le interesa a los usuarios. Por supuesto, esta información que se extrae de los nodos se obtiene mediante llamadas al servidor RPC de estos softwares de nodos y luego es transformada y analizada por diferentes lenguajes de programación, como Python, JavaScript, Go o C, dependiendo de cómo esté escrita nuestra aplicación.

Por supuesto, esta utilidad es la que nos permite generar cosas como los exploradores de bloques, pero también nos permite crear otras aplicaciones más avanzadas, como los DEX o intercambios descentralizados, como BISC, que es un intercambio descentralizado para Bitcoin que utiliza precisamente la capacidad RPC para generar toda la funcionalidad que necesita este intercambio descentralizado para operar dentro de la red Bitcoin. Así, podemos entender que los RPC son una parte muy importante del software de los nodos. A continuación, veremos cómo utilizar este software o cómo habilitar el servidor RPC dentro de Bitcoin Core.

Actualmente, aquí ya estamos ejecutando una instancia de Bitcoin Core. Tenemos una wallet creada, que es reciente, y vemos que estamos sincronizando nuestro nodo. Entonces, ¿cómo activamos el servidor RPC dentro de Bitcoin Core? Simplemente vamos a la configuración y aquí podemos ver que está la opción de activar el servidor RPC completamente seleccionada. Esto activa, de forma inicial, el servidor RPC dentro de Bitcoin Core. Sin embargo, también en el archivo de configuración podemos establecer toda esta funcionalidad simplemente abriendo el archivo y verificando o colocando la siguiente información dentro del mismo. En este caso, "server=1" activa nuestro servidor RPC, "rpcbind" y esta dirección IP que está aquí nos indica que el servidor RPC va a estar escuchando únicamente en la dirección local. En este caso, la dirección local es 127.0.0.1 y que todas las IP con "rpc" al lado pueden requerir información a esa dirección. El puerto, en este caso, será el puerto RPC 8332 y el usuario y la contraseña serán "username" y "password".

Un punto a tener en cuenta es que si vas a generar una aplicación que estará en un ambiente de producción o que estará abierta a Internet, estos usuarios y contraseñas deben ser seguros y completamente fortificados. De ser posible, utiliza tokens de acceso para evitar que un tercero malicioso pueda acceder a tu nodo y realizar acciones no deseables dentro del mismo. Recordemos que tenemos activada ya la opción de RPC dentro de Bitcoin Core. ¿Cómo podemos interactuar con ella utilizando un lenguaje de programación, por ejemplo, Python? Para eso, simplemente deberíamos hacer lo siguiente: ir a Python y realizar la instalación de nuestro intérprete de Bitcoin Core.

Recordemos que Python es un lenguaje interpretado, por lo que es fácilmente portable a otras arquitecturas y sistemas operativos, y que comprende o tiene soporte para varias plataformas, como Windows, MacOS y Linux. De hecho, en Linux, la mayoría de las distribuciones tienen un instalador o compilador de Python ya instalado. Por ejemplo, aquí que estoy utilizando Linux, vamos a abrir un momento la terminal. Si escribimos "python3", vemos que estamos utilizando la versión de Python 3.10.8 dentro de nuestra instalación del sistema operativo. Así, podemos estar seguros de que estamos utilizando Python en nuestro computador.

Lo siguiente que vamos a hacer es generar un entorno de programación para utilizar la librería Python necesaria para interactuar con el nodo RPC de Bitcoin. Esta librería que vamos a utilizar es muy conocida: la librería Python Bitcoin RPC. Esta librería fue creada por JigarSick, uno de los desarrolladores de Bitcoin Core, así que podemos estar seguros de que estamos utilizando una librería confiable. Esta librería nos permite tener una conexión con el servidor RPC de Bitcoin Core y desde allí enviar comandos que luego son respondidos por el software de Bitcoin Core, proporcionándonos la información que le estamos requiriendo. Es bastante sencilla de utilizar. Aquí hay algunos ejemplos de software que podemos utilizar para obtener información básica de nuestros nodos. Simplemente pueden copiar estos ejemplos y trabajar sobre ellos para requerir la información que deseen.

Para eso, simplemente tienen que instalar la librería. Aquí está la orden para instalarla: "pip install bitcoin.py". Simplemente pueden copiarla y pegarla. Vamos a crear aquí: "pip install python-bitcoin-rpc". Simplemente la instalan y con ello estará completamente instalada la versión que necesitamos para esta librería. Una vez instalada, simplemente nos queda entonces empezar a programar las instrucciones que necesitamos para solicitar información.

¿Cómo podemos hacer eso? Bueno, en este caso vamos a utilizar Visual Studio Code. Yo ya tengo aquí un código previamente realizado en el que he hecho algunas pruebas, pero voy a explicar un poco qué hace este código. Este código carga la librería Python, la librería de autorización, y va a realizar una conexión a nuestro nodo local utilizando esta variable "btcrpc" y el método "AuthServiceProxy". Este método le pedirá a nuestro nodo, que está en la dirección 127.0.0.1 en el puerto 8332, que indique el usuario y la contraseña, y nos dará acceso para que podamos enviar información a nuestro nodo. Una vez que se complete este proceso, simplemente podemos crear diferentes variables para obtener información de los nodos utilizando los comandos RPC de Bitcoin Core.

Aquí podemos ver ya tres variables que he creado: "BTCChainInfo", que es para obtener la información de la cadena; "MainPoolInfo", que es para obtener la información del Main Pool; y "WalletInfo", para obtener la información de lo que sería el monedero dentro de nuestro software de nodo. Para ello, simplemente utilizamos la conexión, que en este caso es "BTCRPC", y utilizamos los comandos RPC del software de Bitcoin Core que son "getblockchaininfo", "getmempoolinfo" y "getwalletinfo".

¿Dónde podemos ver estos comandos? O sea, ¿dónde está el conocimiento necesario para saber qué comando podemos utilizar? Bien, si vamos a Bitcoin Core, aquí en Bitcoin Core, y vamos a la opción de ventana, consola, podemos ver lo siguiente. Aquí están todos los comandos RPC que están habilitados dentro de nuestro software de nodo y que podemos utilizar para obtener información de él mismo. En este caso, aquí están cada una de estas operaciones que podemos utilizar. Simplemente, por ejemplo, si queremos obtener información, lo que tenemos que hacer es llegar y colocar "btcrpc." seguido del comando correspondiente junto con los valores necesarios para hacer la llamada al software.

Así, por ejemplo, si quiero obtener la información de la cadena, simplemente debo escribir "btcChainInfo" que será igual a nuestro nodo, la conexión de nuestro nodo con el comando RPC que es "getblockchaininfo". Vamos a ver qué información nos ofrece esto. Simplemente vamos a cerrar y ejecutar este dato. Cuando lo ejecuto, me da la información de la cadena. Estamos en la cadena mainnet, nuestro nodo está sincronizándose y va por el bloque 206,985. También tenemos que existen 766,536 bloques dentro de la cadena de blockchain, es decir, actualmente el último bloque que hay es el 766,536. Y así tenemos el resto de información de nuestro nodo: la dificultad, el tamaño de disco que está ocupando nuestro nodo y el tamaño máximo que puede ocupar. En este caso, estamos utilizando un nodo podado con un límite de 2 GB de almacenamiento.

Si queremos, por ejemplo, obtener información de la mempool, igualmente pasamos una variable, "mempoolInfo", obtenemos la información utilizando el comando RPC "getmempoolinfo" utilizando esta estructura. Para imprimir la información, simplemente tenemos que hacer el llamado a la función. En este caso, vamos a hacer un "clear" y luego un "F5". Aquí podemos ver entonces la información de la mempool desplegada en nuestra consola. Si queremos obtener la información de la wallet, igualmente copiamos la variable y si la ejecutamos, podemos ver que aquí está nuestra wallet con el nombre de prueba, la versión de la wallet y toda la información de saldo que está dentro de esa wallet.

Entonces, podemos entender cómo los RPC nos permiten obtener información de los softwares de nodo, de todo lo que es el estatus de la blockchain y procesarlo a través de un lenguaje de programación que nos permite generar o crear nuevas herramientas de forma bastante sencilla, lo que nos permite generar nuevas aplicaciones que los usuarios puedan disfrutar. Por ejemplo, podemos crear un nodo de Bitcoin que se esté ejecutando como nodo y podemos crear una aplicación que utilice el RPC para comunicarse con ese nodo y enviar y recibir transacciones. Este sería el método que normalmente se utiliza en las wallets que vemos en teléfonos Android o en software de computadoras, como ElectrumX o Electrum Wallet.

Por ejemplo, Electrum Wallet, si vamos aquí a ese servicio, Electrum. En este caso, Electrum y Electrum X son dos softwares creados en Python que están completamente al servicio de las personas. Uno de ellos es el servidor de la cadena; en este caso, Electrum X es el servidor, o lo que sería el equivalente a Bitcoin Core, y Electrum Wallet, que sería la parte del monedero, completamente separado del servidor, manteniendo así un mayor control y nivel de seguridad. Esta sería una de las utilidades que nos permiten los servidores RPC y que podemos disfrutar a través de este lenguaje de programación llamado Python.

Así pues, espero que les haya gustado este pequeño ejemplo de cómo utilizar un servidor RPC, de cómo podemos activarlo dentro de Bitcoin y generar aplicaciones bastante sencillas para utilizar información de la cadena y poder analizarla con otros lenguajes. Con esta práctica, les invito a que disfruten de su potencial y nos vemos en otra próxima ocasión.