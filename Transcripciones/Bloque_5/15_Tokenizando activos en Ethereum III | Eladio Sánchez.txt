Speaker 0 | 00:13.398
Para desplegar en la red Matic, la red Mumbai Matic, que es la red testnet de Polygon, lo primero que necesitamos es dinero de esa red para poder desplegar. Para ello nos vamos a crear una cuenta, la vamos a asociar a nuestro metamask, vamos a crear la cuenta de ese metamask y desde ahí vamos a sacar la clave privada de esa cuenta y vamos a conseguir dinero para ella. Esta vez no utilizo navegación privada porque si no no puedo acceder a Metamask. Vamos a darle aquí a Metamask. Nos vamos a poner aquí en Expandir Vista para que sea más sencillo. Seleccionamos aquí y le vamos a dar a crear una cuenta. La vamos a llamar mba-nft-account. La cuenta da igual donde la creemos. Ahora mismo estoy conectado a la red de GANache, pero lo podemos crear en cualquier lado. Ahora vamos a buscar poligon testnet. Y aquí nos salen varias urls que son de importancia. Por ejemplo, tenemos aquí el explorador de la testnet, mumbai.poligonscan.com Desde aquí podremos comprobar las transacciones que realizamos, cuando desplegamos el smart contract, etc. Luego aquí tenemos el Polygon Fossil. Esta es una web desde la que nosotros introducimos nuestra dirección, nuestra wallet, y entonces nos mandarán un poquito de ematic para que tengamos suficiente moneda para poder pagar las fees, desplegar el contrato, mintear y tal. Entonces, como ya nos hemos creado una cuenta, la vamos a copiar. Entonces nos van a dar un MATIC. Confirmamos la transacción. Esto va a tardar un poquito, así que lo estamos haciendo antes de lo demás para que nos dé tiempo a hacer otras cosas. Aquí tenemos guías de cómo conectarnos a la red y demás. Porque en metamask por defecto seguramente no tengáis esa red. Pero bueno, podéis buscar en cualquier lado cómo hacerlo. Aquí os van a indicar el nombre de la red, el RPC, el ID de la chain, el símbolo, todo eso. Entonces nosotros de aquí por ahora nos vamos a copiar únicamente esto. Vosotros si no lo tenéis en metamask deberéis añadir esa red. y aquí os aparecerá. Entonces yo aquí la tengo como Mumbai. Vale, me cambio y... Ah, pues ya nos han mandado... no nos han mandado un MATIC completo, nos han mandado 0,2. Así que... bueno, vamos a ver si nos pueden dar otro poco. Submit... igual no podemos porque normalmente tarda un ratito. Vale, hasta dentro de unos minutos no vamos a poder. Vamos a ver si con esto podemos seguir para adelante. Hemos copiado de la guía, en la documentación oficial también os vendrá, un RPC que esté libre, no hace falta tener una cuenta de infura ni nada por facilitar las cosas. Entonces nos venimos de nuevo aquí a nuestro proyecto hardhat, nos vamos al fichero de configuración y tenemos la red de GANACHE. Vamos a añadir otra red que va a ser la red de MUMBAI. Aquí vamos a poner la URL. ¿Cuál es el problema? En Ganache o en la red de desarrollo de Hardhat teníamos ya automáticamente una serie de cuentas con dinero que firmaban las transacciones y demás. Ahora mismo no. Tenemos que indicar desde qué cuenta vamos a hacerlo y tenemos que hacerlo de una manera que nos permita firmar las transacciones y demás. No podemos poner simplemente nuestro adres. Una manera de las más sencillas es poner simplemente la clave privada de la cuenta. Con esto hay que tener cuidado porque la clave privada, ya sabéis que quien la coja, ya va a tener el control total sobre la cuenta. Por eso yo estoy haciendo esto con una cuenta nueva para que no podáis simplemente coger esa private key y usarla. Bueno, esta en concreto la podéis coger porque me va a dar igual, pero no os recomiendo que la cojáis porque igual no va a tener suficientes matics. Entonces pues nos vamos a poner aquí. Vamos a crear una constante que va a ser matic-privatekey. Es... bueno, matic, no, perdón, Mumbai, para no confundirlo con la testnet, con la mainnet, perdón. Vale, y entonces aquí tenemos que poner cuál va a ser nuestra clave privada. Eso ahora vemos cómo lo hacemos. Entonces tenemos aquí la URL y luego aquí hay otro campo que vamos a poner que es accounts. y entonces en accounts tenemos que poner aquí un array con la serie de claves privadas que creamos. En este caso, como solo vamos a tener una, va a ser esta. Pues vamos a por la clave privada. Para ello, aquí en el metamask tenemos esta clave y entonces le damos aquí a detalles de la cuenta, que es esta que nos acabamos de crear, y entonces podemos darle aquí a exportar clave privada. Entonces aquí voy a introducir mi contraseña, confirmo, y entonces aquí me está generando la clave privada. Vale, pues la copiamos y ahora pues vamos a ir a... de nuevo volvemos al proyecto y entonces aquí es donde ya la podemos poner. La clave privada, vamos a ponerle antes un 0x porque esto es un hash hexadecimal, entonces 0x y la clave privada que hemos copiado. Con esto ya cuando hagamos un despliegue ya vamos a hacerlo desde el... cuando estamos haciendo lo del getSigners y sacamos el loaner va a ser esta. Y con esta ya sabemos que ya tiene un poco de ether y ya podemos hacer un despliegue. Vale, pues sin más vamos a desplegar. llamamos de nuevo al script de Deploy NFT Contract y ahora en la red le vamos a indicar cuál es, que es el de Mumbai. Vale, está haciendo la cuenta D65, comprobamos que coincide, D65 es el mismo nombre. Esto como ya no es una red de desarrollo sino que es una red de verdad pues como veis tarda un poquito más. Pero bueno ya parece que ha conseguido desplegarlo. Vemos en qué... en dónde se ha desplegado, cuál es el hash de la transacción y demás. Entonces bueno si nosotros ahora copiamos este hash de transacción y nos vamos al explorador y aquí lo introducimos Entonces vemos que esta es una transacción que ha tenido éxito y ha desplegado un smart contract 0e0... que comprobamos que coincide con lo que nos dice aquí, 0e0... Ya tenemos aquí desplegado en una red pública de pruebas nuestro NFT. Lo siguiente que vamos a hacer es mintear un NFT. Lo que pasa es que nosotros aquí estamos utilizando un test Turi de mentira. ¿Por qué no hacemos uno de verdad? Podemos hacerlo, por ejemplo, en IPFS y luego posteriormente lo vamos a ver en OpenSIM. ¿Cómo hacemos esto? Necesitamos hostear en IPFS un fichero JSON que tiene que tener un nombre, una descripción y una imagen. Vamos a poner aquí nft.json. Aquí lo creamos. Nombre, mynft, envie, etc. Descripción. This is a test NFT for Mumbai. Imagen. Pues imagen aquí podemos coger cualquiera, no lo sé. Vamos a coger por ejemplo una imagen... Igual podemos coger el logo de Web3MBI. Vamos a coger este mismo. Por poner algo, no es de igual que otra. Esto es solo de ejemplo. Entonces imagen, vamos a poner aquí la URL de la imagen. Vale, pues ya tenemos aquí nuestro JSON válido. Y claro, vosotros igual me estáis preguntando ¿por qué tiene esta estructura? ¿por qué no se llama de otra manera? Bueno, eso sí, por ejemplo, si os vais a OpenSCE, buscáis OpenSCE, metadata. Entonces aquí en los documentos, en la documentación de OpenSCE te explica cómo hacer un token URI que... que OpenSys sepa interpretar. Por defecto el nombre, la imagen, la descripción, también tiene otras cosas como external url, una serie de atributos y tal. Esto está referido también en el estándar de metadatos del Rc721 de Ethereum. Tenemos ya esta información, tenemos el JSON y ahora vamos a hostearlo en alguna red. Una manera que tenemos de hostearlo en IPFS es si nos vamos a una web que se llama nft.storage Aquí hacemos un login. Este login realmente no es necesario que os hagáis una cuenta con contraseña y tal. Podéis poner aquí un email y a este email os van a mandar una URL con la que ya podréis acceder. Ahora mismo estoy abriendo mi email para venir aquí con esta URL. Vale, copio el enlace y lo pego. Es un enlace gigante pero bueno. Vale, con esto ya nos hemos autenticado y entonces aquí ya nos va a aparecer... Como digo, esto va un pelín lento pero bueno, va a su ritmo. Una vez que esto consiga loggearse, nos van a aparecer aquí nuestros ficheros. Yo tengo aquí algunos que otros. Y entonces vamos a subir un fichero. ¿Cuál es el fichero que vamos a subir? Pues el fichero JSON que hemos generado. Vale. Entonces lo tenemos aquí. lo voy a arrastrar hasta aquí o podríamos darle a choose file y buscar donde está upload. Pues es este de aquí. Podemos ver la fecha, no viene aquí nombre ni nada, entonces ahora está en cola. Entonces en algún momento esto va a estar. Entonces si le damos aquí a copiar la URL del IPFS, cuando nos podemos venir aquí en el mintNFT y entonces, bueno, aquí lo podemos hacer también con una variable const tokenURI va a ser esto. Y ya está. Como veis esto no es HTTP, es IPFS, dos puntos, tal  pero bueno, OpenSIM va a ser capaz de interpretar esto correctamente. Aquí ponemos el token URI. Y bueno, vamos a ver si le damos a View URL a ver si ha cargado ya. Muy bien, pues ya lo tenemos aquí hosteado. Va ahí en ftnv8, thisisatest, ta  en la imagen. Muy bien, pues entonces ya podemos mintear este NFT. Vale, ahora cuidado porque el adres que tenemos aquí era el que habíamos dejado previamente, que es el de GANACHE, pero no, aquí queremos poner el nuevo, el de MUMBAI. Vale, lo copiamos aquí y ahora vamos a mintear NFT igual que hemos hecho antes, solo que en lugar de NETWORK GANACHE va a ser NETWORK MUMBAI. Está utilizando ese contrato. Vemos que lo ha captado bien porque el nombre y el símbolo lo coge correctamente. Y ahora pues va a lanzar la transacción. Va a llamar aquí al Mint y va a pasarle el owner address y el token URI. Entonces ahora está esperando a que se confirme. Ya se ha confirmado y vemos incluso cuál es el hash de la transacción. 0xd36... Ahora vamos a comprobar eso, vamos a irnos a la web aquí. Este es el contrato que hemos desplegado antes. Si actualizamos la página en el navegador, aquí vemos que ha habido una transacción, incluso aquí nos dice el método mint, entonces esto lo que nos dice ya es que se ha minteado un... se ha minteado un NFT. Si vemos aquí podemos verlo con más detalle. Si vamos aquí a decode nos dice el adres ha sido a esta dirección y el token URI es este que hemos puesto. Muy bien pues ya tenemos un smart contract NFT desplegado en la testnet y ya tenemos un NFT minteado para esta cuenta. ¿Qué vamos a hacer a continuación? Vamos a acceder a OpenSci, solo que como esto es de Testnet hay que entrar en testnets.openci.io Aquí le vamos a dar a nuestro perfil y entonces nos tenemos que conectar con Metamask Vale, nos conectamos con Metamask solo que esta cuenta no es la adecuada, así que vamos a darle aquí y vamos a conectar con mbanftaccount que es el que hemos seleccionado antes cambiamos de cuenta, fijaos que estáis en la red de Mumbai, cuando nos conectamos por primera vez nos va a decir vale tienes que aceptar y tal, entonces aceptamos, esto nos va a sacar una notificación de Metamask que dice que tenemos que firmar cierta información, pero bueno esto realmente no es una transacción como tal así que no vais a gastar gas, por eso no os preocupéis. Vale, pues entonces le hemos dado de nuevo, vamos al perfil. Vale, entonces tenemos aquí el perfil sin nombre porque esto se acaba de crear y ya nos aparece aquí nuestro NFT. Esta es la colección, este es el NFT específico, lo que pasa es que ahora mismo no aparece la imagen porque los metadatos a veces tardan en cargar, sobre todo cuando estamos utilizando testnet. Pero bueno, esto ya lo tenemos aquí, ya tenemos aquí el nombre del NFT, MyNFTNBA, y tenemos aquí la descripción, This is a test NFT for Mumbai, que esto se corresponde con lo que habíamos visto anteriormente que era la descripción que habíamos puesto. Y aquí si nos vamos a detalles, podemos acceder hasta la dirección del contrato. Esto nos lleva directamente a lo que hemos visto antes, al explorador. Así que bueno, pues con esto ya tenemos todo. ¿Qué más podremos hacer aquí? Bueno, pues también nos podemos personalizar un poco el perfil si queremos. Aquí en ajustes, ahora mismo está sin nombre, pues podemos ponerlo con nombre el audio, podemos cambiar la imagen, el audio ya existe, el audio envíe ahí. Vale, y ya se ha guardado, pues ahora nos volvemos a nuestro perfil. y con la esperanza de que esto se hubiese actualizado... pues no, parece que aún no se ha actualizado como digo, en la red de testnet tarda un rato en cargar las imágenes y demás pero bueno, como ya habéis visto, ya tenemos aquí nuestro NFT con nuestro nombre y con nuestra descripción y parece que ha funcionado todo correctamente, así que vamos a finalizar aquí el vídeo